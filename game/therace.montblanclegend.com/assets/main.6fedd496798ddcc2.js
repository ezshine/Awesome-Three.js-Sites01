//  Merci-Michel [R]
//  https://www.merci-michel.com/
//  Build 20220509-171726

var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;import{r as l,c,w as i,a as u,b as d,d as m,e as p,f as v,g as f,h as b,i as g,j as h,_ as w,o as y,k,l as _,n as $,m as O,p as L,q as M,s as T,u as I,t as R,v as j,x as D,y as C,z as A,A as H,B as P,F as S,C as E,D as x,E as U,G as q,H as F,I as V,M as Z,J as B,K as X,L as G,N as J,O as z,P as K,Q as N,R as W,S as Y,T as Q,U as ee}from"./vendor.24dfb0b2798ddcc2.js";import{M as te,_ as ae,I as ne}from"./IconArrowTrans.70120118798ddcc2.js";let se=location.origin+window.__DATA.config.basepath;const oe=window.__DATA.site.locale;!!window.__DATA.site.locales[oe].default||(se+="/"+oe+"/");function re(e={}){let u,d,m=null,p=0;const v=l(null),f=l(!1),b=c(),g={sendFinish:(e,t)=>{L(),b.sendMessage(te.DisplayFinish,JSON.stringify({score:Math.round(e),best:Math.round(t)})),d=setTimeout((()=>b.close()),1500)}},h={left:!1,right:!1,state:0,reset:()=>{h.update(!1,!1),h.update(!0,!1)},update:(e,t)=>{e?h.right=t:h.left=t,h.state=t?e?1:-1:e?h.left?-1:0:h.right?1:0}},w=(y=((e,t)=>{for(var a in t||(t={}))s.call(t,a)&&r(e,a,t[a]);if(n)for(var a of n(t))o.call(t,a)&&r(e,a,t[a]);return e})({install:function(e){b.install(e),e.provide("rtcDisplay",w),u=e.config.globalProperties,u.$rtcDisplay=w,b.config({apiKey:"AIzaSyCxxnDuXA-OXZm7pj0mV8b0xtFX2CJXUpM",authDomain:"montblanc-race.firebaseapp.com",databaseURL:"https://montblanc-race-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"montblanc-race",storageBucket:"montblanc-race.appspot.com",messagingSenderId:"540821151036",appId:"1:540821151036:web:1577948aedadeab9bdd239"}),b.watch(_),b.watchStatus(M)},rtc:b,webRTC:b,createRoom:async function(){return m=await b.createRoom(),m},controls:h,error:v,throwError:O,cancelError:L,enabled:f,enable:function(){u.$stores.menuOpen=!1,f.value=!0},disable:function(){u.$stores.menuOpen=!1,f.value=!1},reset:k},g),t(y,a({get roomURL(){return se+"remote/?c="+(m||"")},get roomID(){return m}})));var y;return w;function k(){clearTimeout(d),L(),h.reset(),u.$router.push({name:"qrcode-home"})}function _(e){const t=u.$route&&u.$route.name;switch(e){case"remoteReady":case te.RemoteReady:"qrcode-home"===t&&u.$router.push({name:"game"});break;case te.RemoteLeftUp:h.update(!1,!1);break;case te.RemoteLeftDown:h.update(!1,!0);break;case te.RemoteRightUp:h.update(!0,!1);break;case te.RemoteRightDown:h.update(!0,!0)}}function $(){k()}function O(){i.game.state.isGameRunning()&&(v.value||(v.value=!0,p=setTimeout($,1e4)))}function L(){v.value=!1,clearTimeout(p)}function M(e){"error"===e||"close"===e?O():"connect"===e&&L()}}const le=[(e=>(L("data-v-12b2ca22"),e=e(),M(),e))((()=>_("div",{class:"burgermenu-lines"},null,-1)))];var ce=w({setup(e){function t(){i.audio.playSound("UI_Hover_Tiny")}function a(){i.audio.playSound("UI_Validate_Small"),O.$stores.menuOpen=!O.$stores.menuOpen}return(e,n)=>(y(),k("button",{class:$(["menubtn",{hidden:e.$rtcDisplay.enabled.value}]),"aria-label":"menu",onMouseenter:t,onClick:a},[_("div",{class:$(["burgermenu",{menuOpen:e.$stores.menuOpen,menuPause:"game"===e.$route.name}])},le,2)],34))}},[["__scopeId","data-v-12b2ca22"]]);const ie=[(e=>(L("data-v-5e5f33e6"),e=e(),M(),e))((()=>_("img",{src:ae,draggable:"false",alt:"Montblanc Legend Red"},null,-1)))];var ue=w({setup(e){const t=["game"],a=T((()=>{const e=O.$route&&O.$route.name;return!!O.$stores.menuOpen||!t.includes(e)})),n=T((()=>O.$rtcDisplay.enabled.value||"home"===O.$route.name));return(e,t)=>(y(),k("figure",{class:$(["mbLogo",{visible:I(a)}])},[_("button",{class:$({visible:I(a),inactive:I(n)}),onClick:t[0]||(t[0]=t=>e.$router.push({name:"home"}))},ie,2)],2))}},[["__scopeId","data-v-5e5f33e6"]]);const de={class:"header"};var me=w({setup:e=>(e,t)=>(y(),k("header",de,[R(ue),R(ce)]))},[["__scopeId","data-v-0fcb5028"]]);const pe={class:"menu-cta__text"},ve=["innerHTML"],fe=["innerHTML"],be={class:"menu-cta__picture"},ge=["innerHTML"],he=["innerHTML"];var we=w({setup(e){const t=j(),a=D(),n="game"===t.currentRoute.value.name;function s(){a.menuOpen=!1,"game"!==t.currentRoute.value.name?t.push({name:"game"}):i.game.replay()}return(e,t)=>(y(),k("button",{class:"menu-cta",onClick:s},[_("div",pe,[n?(y(),k("span",{key:0,innerHTML:e.$l("menu.cta.restart")},null,8,ve)):(y(),k("span",{key:1,innerHTML:e.$l("menu.cta.play")},null,8,fe))]),_("div",be,[n?(y(),k("div",{key:0,class:"icon",innerHTML:I('<svg width="28" height="33" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.368 8.584c.65-.162 1.46-.162 2.272-.162 6.329 0 11.36 5.03 11.36 11.36 0 6.329-5.031 11.36-11.36 11.36S3.28 26.11 3.28 19.781" stroke="#fff" stroke-width="3" stroke-miterlimit="10"/><path d="M14.64 16.536 4.5 8.422 14.64.308v16.228Z" fill="#fff"/><path d="M10 17 0 8.5 10 0v17Z" fill="#fff" fill-opacity=".33"/></svg>\n')},null,8,ge)):(y(),k("div",{key:1,class:"icon restart",innerHTML:I('<svg width="32" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.597 13.146a1 1 0 0 1 0 1.708L1.52 27.074A1 1 0 0 1 0 26.222V1.779A1 1 0 0 1 1.52.925l20.077 12.22Z" fill="#fff"/><path opacity=".33" d="M30.597 13.146a1 1 0 0 1 0 1.708L10.52 27.074A1 1 0 0 1 9 26.222V1.779a1 1 0 0 1 1.52-.854l20.077 12.22Z" fill="#fff"/></svg>\n')},null,8,he))])]))}},[["__scopeId","data-v-b3e66172"]]);var ye=w({setup(e){const t=D(),a=[];let n,s=0,o=0;const r=e=>{e&&a.push({el:e,offset:10*(Math.random()+1)})};function l(e){if(t.menuOpen){o+=e;for(let r=0;r<a.length;r++){const l=a[r],c=l.offset;s=P(s,t.muted?0:1,.01,e),n=.6*(Math.sin(o*(.007+6e-5*c)+30*c)+1),l.el.style.transform=`scaleY(${.5+n*s})`}}}function c(){t.muted=!t.muted}return C((()=>{A.add(l),l(1e3)})),H((()=>{a.length=0,A.remove(l)})),(e,t)=>(y(),k("button",{class:"sound",onClick:c},[(y(),k(S,null,E(10,((e,t)=>_("div",{key:t,ref:r,class:$(["sound__bar",`bar${t+1}`])},null,2))),64))]))}},[["__scopeId","data-v-4a2627ec"]]);const ke={class:"menu-content"},_e=["href"],$e=["href"],Oe={key:0},Le=["href"],Me={class:"sound-lang"};var Te=w({setup(e){const{wait:t}=x(),{$l:a}=U(),n=D(),s=l(!1),o=l(!1),r=l(),c=l(),u=l();let d,m=0;async function p(){const e=++m,a=n.menuOpen;a&&(s.value=!0,i.audio.playSound("UI_Pause")),a?await async function(){document.documentElement.classList.add("menuOpen"),await B(),r.value&&r.value.getBoundingClientRect();o.value=!0}():await async function(){document.documentElement.classList.remove("menuOpen"),o.value=!1,await t(1200)}(),e===m&&(n.menuOpen||(s.value=!1))}return C((()=>{d=q((()=>n.menuOpen),p,{immediate:!0})})),H((()=>{d&&d()})),(e,t)=>s.value?(y(),k("div",{key:0,ref:(e,t)=>{t.base=e,r.value=e},class:$(["menu",{menuOpen:o.value}])},[_("div",{ref:(e,t)=>{t.topArrow=e,c.value=e},class:"menu-arrowTop"},[R(ne,{color:"#ff2222"})],512),_("div",{ref:(e,t)=>{t.botArrow=e,u.value=e},class:"menu-arrowBot"},[R(ne,{color:"#ff2222"})],512),_("div",ke,[R(we),_("ul",null,[_("li",null,[_("a",{href:I(a)("menu.cta.product.link"),rel:"noopener noreferrer",target:"_blank",onClick:t[0]||(t[0]=t=>{e.$stats.event({name:"click_product"})})},F(I(a)("menu.cta.product.text")),9,_e)]),_("li",null,[_("a",{href:I(a)("menu.cta.termslink"),rel:"noopener noreferrer",target:"_blank",onClick:t[1]||(t[1]=t=>{e.$stats.event({name:"click_legals"})})},F(I(a)("menu.cta.terms")),9,$e)]),e.$stores.noCookie?V("",!0):(y(),k("li",Oe,[_("a",{href:I(a)("menu.cta.privacylink"),rel:"noopener noreferrer",target:"_blank",onClick:t[2]||(t[2]=t=>{e.$stats.event({name:"click_privacy"})})},F(I(a)("menu.cta.cookies")),9,Le)]))]),_("div",Me,[R(ye),R(Z)])])],2)):V("",!0)}},[["__scopeId","data-v-cef51d22"]]);var Ie={setup(e){const t={passive:!0},a=l(),n=T((()=>O.$route&&"register"===O.$route.name&&a.value));function s(e){a.value=window.scrollY>50}return C((()=>{window.addEventListener("scroll",s,t)})),H((()=>{window.removeEventListener("scroll",s,t)})),(e,t)=>(y(),k("div",{class:$(["gradient",{visible:I(n)}])},null,2))}};var Re=w({setup(e){const t=U(),a=["result","register","confirmation","qrcode-home","qrcode-pairing","qrcode-error"],n=T((()=>t.$stores.gameTutorialVisible||a.includes(t.$route.name)));return(e,t)=>(y(),k("div",{class:$(["blackOverlay",{visible:I(n)}])},null,2))}},[["__scopeId","data-v-834be4d6"]]);var je=w({setup(e){const t=l(),a=l(),n=l(),s=T((()=>"game"!==O.$route.name||!O.$stores.keysVisible)),o=T((()=>O.$stores.gameTutorialVisible));let r;return C((()=>{r=i.controls.direction.watchImmediate((e=>{a.value=e<0,n.value=e>0}))})),H((()=>{i.controls.direction.unwatch(r)})),(e,r)=>(y(),k("div",{ref:(e,a)=>{a.keys=e,t.value=e},class:$(["keys",{hidden:I(s),presentation:I(o)}])},[_("div",{class:$(["keys__left",{active:a.value}]),"aria-label":"left"},[R(X)],2),_("div",{class:$(["keys__right",{active:n.value}]),"aria-label":"right"},[R(X)],2)],2))}},[["__scopeId","data-v-19eeacac"]]);const De=["innerHTML"],Ce={class:"webrtc-error__title"};var Ae=w({setup(e){const t=T((()=>!!O.$rtcDisplay.error.value));return(e,a)=>(y(),k("section",{class:$(["webrtc-error",{visible:I(t)}])},[_("div",{class:"webrtc-error__icon",innerHTML:I(G)},null,8,De),_("div",Ce,[_("p",null,F(e.$l("webRTC.pairing.borne.fail")),1)])],2))}},[["__scopeId","data-v-2fc4c7b1"]]);const He={class:"ui"};const Pe=Y({setup:e=>(C((()=>{let e=null;J((()=>{const t=document.documentElement,a=O.$route;null!==e&&t.classList.remove(e);const n=e="site-page-"+a.name;t.classList.add(n)})),O.$stores.noCookie&&O.$stats.init()})),"orientation"in screen&&(window.screen.orientation.onchange=function(){this.type.startsWith("landscape")&&document.documentElement.classList.contains("android")?document.body.webkitRequestFullscreen({navigationUI:"hide"}):document.webkitCancelFullScreen&&document.webkitExitFullscreen()}),(e,t)=>{const a=z("AnimatedRouterView"),n=z("WebGL");return y(),k(S,null,[_("main",He,[R(me),R(Ie),R(Te),e.$rtcDisplay.enabled.value?V("",!0):(y(),K(je,{key:0})),e.$rtcDisplay.enabled.value||e.$stores.noCookie?V("",!0):(y(),K(N,{key:1,"text-html":e.$l("cookies.description"),"accept-html":e.$l("cookies.button.accept"),"decline-html":e.$l("cookies.button.discard")},null,8,["text-html","accept-html","decline-html"])),e.$rtcDisplay.enabled.value?(y(),K(Ae,{key:2})):V("",!0),R(a),R(Re)]),R(n),W(" "+F(),1)],64)})});Q((async()=>{await async function(e,t={}){const a=await u(Object.assign({},t.appHooks));e.use(a);const n=await d(Object.assign({},t.router));e.use(n);const s=await m(Object.assign({},t.stores));e.use(s);const o=await p(Object.assign({},t.preloader));e.use(o);const r=await v(Object.assign({},t.i18n));e.use(r);const l=await f(Object.assign({},t.device));e.use(l);const c=await b(Object.assign({},t.viewport));e.use(c);const i=await g(Object.assign({},t.webgl));e.use(i);const w=await re(Object.assign({},t.rtcDisplay));e.use(w);const y=await h(Object.assign({},t.statsPlugin));e.use(y)}(Pe,{router:{historyMode:ee}});const e=Pe.config.globalProperties.$router;Pe.config.globalProperties.$rtcDisplay.enabled.value&&e.push({name:"qrcode-home"});const t=new Set(["register","confirmation"]);e.beforeEach(((e,a)=>{if(Pe.config.globalProperties.$stores.noForm&&t.has(e.name))return!1})),Pe.mount("#app")}));
