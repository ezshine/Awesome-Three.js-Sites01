/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[12,44],{381:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(67);function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var base=function(object,e){for(;!Object.prototype.hasOwnProperty.call(object,e)&&null!==(object=Object(o.a)(object)););return object}(e,t);if(base){var desc=Object.getOwnPropertyDescriptor(base,t);return desc.get?desc.get.call(n):desc.value}})(e,t,n||e)}},387:function(e,t,n){n(2)({target:"Math",stat:!0},{sign:n(390)})},390:function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},395:function(e,t,n){var o=n(14),r=n(173);e.exports=o?r:function(e){return Set.prototype.values.call(e)}},396:function(e,t,n){var o=n(2),r=Math.hypot,l=Math.abs,c=Math.sqrt;o({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,div,o=0,i=0,r=arguments.length,d=0;i<r;)d<(n=l(arguments[i++]))?(o=o*(div=d/n)*div+1,d=n):o+=n>0?(div=n/d)*div:n;return d===1/0?1/0:d*c(o)}})},403:function(e,t,n){n(241)("Float32",(function(e){return function(data,t,n){return e(this,data,t,n)}}))},463:function(e,t,n){"use strict";var o=n(2),r=n(285);o({target:"String",proto:!0,forced:n(286)("sub")},{sub:function(){return r(this,"sub","","")}})},507:function(e,t,n){n(241)("Uint16",(function(e){return function(data,t,n){return e(this,data,t,n)}}))},508:function(e,t,n){n(241)("Uint32",(function(e){return function(data,t,n){return e(this,data,t,n)}}))},509:function(e,t,n){var o=n(2),r=n(269).values;o({target:"Object",stat:!0},{values:function(e){return r(e)}})},593:function(e,t,n){n(241)("Int8",(function(e){return function(data,t,n){return e(this,data,t,n)}}))},594:function(e,t,n){n(241)("Int16",(function(e){return function(data,t,n){return e(this,data,t,n)}}))},595:function(e,t,n){"use strict";var o,r=n(7),l=n(106),c=n(169),d=n(267),f=n(641),h=n(19),v=n(55).enforce,m=n(287),y=!r.ActiveXObject&&"ActiveXObject"in r,x=Object.isExtensible,w=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},S=e.exports=d("WeakMap",w,f);if(m&&y){o=f.getConstructor(w,"WeakMap",!0),c.REQUIRED=!0;var P=S.prototype,M=P.delete,A=P.has,I=P.get,C=P.set;l(P,{delete:function(e){if(h(e)&&!x(e)){var t=v(this);return t.frozen||(t.frozen=new o),M.call(this,e)||t.frozen.delete(e)}return M.call(this,e)},has:function(e){if(h(e)&&!x(e)){var t=v(this);return t.frozen||(t.frozen=new o),A.call(this,e)||t.frozen.has(e)}return A.call(this,e)},get:function(e){if(h(e)&&!x(e)){var t=v(this);return t.frozen||(t.frozen=new o),A.call(this,e)?I.call(this,e):t.frozen.get(e)}return I.call(this,e)},set:function(e,t){if(h(e)&&!x(e)){var n=v(this);n.frozen||(n.frozen=new o),A.call(this,e)?C.call(this,e,t):n.frozen.set(e,t)}else C.call(this,e,t);return this}})}},596:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(268);o({target:"WeakMap",proto:!0,real:!0,forced:r},{deleteAll:function(){return l.apply(this,arguments)}})},597:function(e,t,n){var o=n(2),r=n(132);o({global:!0,forced:!n(176)},{DataView:r.DataView})},601:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(463),n(21),n(29),n(175),n(51),n(59);var o=n(369),r=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),o.hb.call(this),this.visible=!1,this.domElement=t;var n=new l;this.add(n);var r=new c;this.add(r);var d=this;J("camera",e),J("object",void 0),J("enabled",!0),J("axis",null),J("mode","translate"),J("translationSnap",null),J("rotationSnap",null),J("scaleSnap",null),J("space","world"),J("size",1),J("dragging",!1),J("showX",!0),J("showY",!0),J("showZ",!0);var f={type:"change"},h={type:"mouseDown"},v={type:"mouseUp",mode:d.mode},m={type:"objectChange"},y=new o.Db;function x(object,e,t){for(var n=e.intersectObject(object,!0),i=0;i<n.length;i++)if(n[i].object.visible||t)return n[i];return!1}var w=new o.Zb,S=new o.Zb,P=new o.qb,M={X:new o.Zb(1,0,0),Y:new o.Zb(0,1,0),Z:new o.Zb(0,0,1)},A=new o.Zb,I=new o.Zb,C=new o.Zb,k=new o.Zb,T=new o.Zb,B=new o.Zb,_=0,E=new o.Zb,R=new o.qb,W=new o.Zb,O=new o.Zb,Z=new o.qb,j=new o.qb,F=new o.Zb,X=new o.Zb,L=new o.qb,Y=new o.Zb,z=new o.Zb,D=new o.qb,V=new o.qb,G=new o.Zb,N=new o.Zb,Q=new o.Zb,U=new o.qb,H=new o.Zb;function J(e,t){var o=t;Object.defineProperty(d,e,{get:function(){return void 0!==o?o:t},set:function(t){o!==t&&(o=t,r[e]=t,n[e]=t,d.dispatchEvent({type:e+"-changed",value:t}),d.dispatchEvent(f))}}),d[e]=t,r[e]=t,n[e]=t}function $(e){if(d.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var n=e.changedTouches?e.changedTouches[0]:e,rect=t.getBoundingClientRect();return{x:(n.clientX-rect.left)/rect.width*2-1,y:-(n.clientY-rect.top)/rect.height*2+1,button:e.button}}function K(e){if(d.enabled)switch(e.pointerType){case"mouse":case"pen":d.pointerHover($(e))}}function ee(e){d.enabled&&(d.domElement.style.touchAction="none",d.domElement.ownerDocument.addEventListener("pointermove",te),d.pointerHover($(e)),d.pointerDown($(e)))}function te(e){d.enabled&&d.pointerMove($(e))}function ne(e){d.enabled&&(d.domElement.style.touchAction="",d.domElement.ownerDocument.removeEventListener("pointermove",te),d.pointerUp($(e)))}J("worldPosition",z),J("worldPositionStart",X),J("worldQuaternion",D),J("worldQuaternionStart",L),J("cameraPosition",E),J("cameraQuaternion",R),J("pointStart",A),J("pointEnd",I),J("rotationAxis",k),J("rotationAngle",_),J("eye",N),t.addEventListener("pointerdown",ee),t.addEventListener("pointermove",K),d.domElement.ownerDocument.addEventListener("pointerup",ne),this.dispose=function(){t.removeEventListener("pointerdown",ee),t.removeEventListener("pointermove",K),d.domElement.ownerDocument.removeEventListener("pointermove",te),d.domElement.ownerDocument.removeEventListener("pointerup",ne),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(object){return this.object=object,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(O,Z,F),this.object.matrixWorld.decompose(z,D,G),j.copy(Z).invert(),V.copy(D).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(E,R,W),N.copy(E).sub(z).normalize(),o.hb.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){y.setFromCamera(e,this.camera);var t=x(n.picker[this.mode],y);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){y.setFromCamera(e,this.camera);var t=x(r,y,!0);if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var o=this.rotationSnap;"X"===this.axis&&o&&(this.object.rotation.x=Math.round(this.object.rotation.x/o)*o),"Y"===this.axis&&o&&(this.object.rotation.y=Math.round(this.object.rotation.y/o)*o),"Z"===this.axis&&o&&(this.object.rotation.z=Math.round(this.object.rotation.z/o)*o)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),Q.copy(this.object.position),U.copy(this.object.quaternion),H.copy(this.object.scale),this.object.matrixWorld.decompose(X,L,Y),A.copy(t.point).sub(X)}this.dragging=!0,h.mode=this.mode,this.dispatchEvent(h)}},this.pointerMove=function(e){var t=this.axis,n=this.mode,object=this.object,o=this.space;if("scale"===n?o="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(o="world"),void 0!==object&&null!==t&&!1!==this.dragging&&-1===e.button){y.setFromCamera(e,this.camera);var l=x(r,y,!0);if(l){if(I.copy(l.point).sub(X),"translate"===n)C.copy(I).sub(A),"local"===o&&"XYZ"!==t&&C.applyQuaternion(V),-1===t.indexOf("X")&&(C.x=0),-1===t.indexOf("Y")&&(C.y=0),-1===t.indexOf("Z")&&(C.z=0),"local"===o&&"XYZ"!==t?C.applyQuaternion(U).divide(F):C.applyQuaternion(j).divide(F),object.position.copy(C).add(Q),this.translationSnap&&("local"===o&&(object.position.applyQuaternion(P.copy(U).invert()),-1!==t.search("X")&&(object.position.x=Math.round(object.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(object.position.y=Math.round(object.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(object.position.z=Math.round(object.position.z/this.translationSnap)*this.translationSnap),object.position.applyQuaternion(U)),"world"===o&&(object.parent&&object.position.add(w.setFromMatrixPosition(object.parent.matrixWorld)),-1!==t.search("X")&&(object.position.x=Math.round(object.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(object.position.y=Math.round(object.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(object.position.z=Math.round(object.position.z/this.translationSnap)*this.translationSnap),object.parent&&object.position.sub(w.setFromMatrixPosition(object.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var c=I.length()/A.length();I.dot(A)<0&&(c*=-1),S.set(c,c,c)}else w.copy(A),S.copy(I),w.applyQuaternion(V),S.applyQuaternion(V),S.divide(w),-1===t.search("X")&&(S.x=1),-1===t.search("Y")&&(S.y=1),-1===t.search("Z")&&(S.z=1);object.scale.copy(H).multiply(S),this.scaleSnap&&(-1!==t.search("X")&&(object.scale.x=Math.round(object.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(object.scale.y=Math.round(object.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(object.scale.z=Math.round(object.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){C.copy(I).sub(A);var d=20/z.distanceTo(w.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(k.copy(N),_=I.angleTo(A),T.copy(A).normalize(),B.copy(I).normalize(),_*=B.cross(T).dot(N)<0?1:-1):"XYZE"===t?(k.copy(C).cross(N).normalize(),_=C.dot(w.copy(k).cross(this.eye))*d):"X"!==t&&"Y"!==t&&"Z"!==t||(k.copy(M[t]),w.copy(M[t]),"local"===o&&w.applyQuaternion(D),_=C.dot(w.cross(N).normalize())*d),this.rotationSnap&&(_=Math.round(_/this.rotationSnap)*this.rotationSnap),this.rotationAngle=_,"local"===o&&"E"!==t&&"XYZE"!==t?(object.quaternion.copy(U),object.quaternion.multiply(P.setFromAxisAngle(k,_)).normalize()):(k.applyQuaternion(j),object.quaternion.copy(P.setFromAxisAngle(k,_)),object.quaternion.multiply(U).normalize())}this.dispatchEvent(f),this.dispatchEvent(m)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(v.mode=this.mode,this.dispatchEvent(v)),this.dragging=!1,this.axis=null)},this.getMode=function(){return d.mode},this.setMode=function(e){d.mode=e},this.setTranslationSnap=function(e){d.translationSnap=e},this.setRotationSnap=function(e){d.rotationSnap=e},this.setScaleSnap=function(e){d.scaleSnap=e},this.setSize=function(e){d.size=e},this.setSpace=function(e){d.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};r.prototype=Object.assign(Object.create(o.hb.prototype),{constructor:r,isTransformControls:!0});var l=function(){o.hb.call(this),this.type="TransformControlsGizmo";var e=new o.X({depthTest:!1,depthWrite:!1,transparent:!0,side:o.s,fog:!1,toneMapped:!1}),t=new o.H({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),n=e.clone();n.opacity=.15;var r=e.clone();r.opacity=.33;var l=e.clone();l.color.set(16711680);var c=e.clone();c.color.set(65280);var d=e.clone();d.color.set(255);var f=e.clone();f.opacity=.25;var h=f.clone();h.color.set(16776960);var v=f.clone();v.color.set(65535);var m=f.clone();m.color.set(16711935),e.clone().color.set(16776960);var y=t.clone();y.color.set(16711680);var x=t.clone();x.color.set(65280);var w=t.clone();w.color.set(255);var S=t.clone();S.color.set(65535);var P=t.clone();P.color.set(16711935);var M=t.clone();M.color.set(16776960);var A=t.clone();A.color.set(7895160);var I=M.clone();I.opacity=.25;var C=new o.q(0,.05,.2,12,1,!1),k=new o.g(.125,.125,.125),T=new o.i;T.setAttribute("position",new o.x([0,0,0,1,0,0],3));var B,_=function(e,t){for(var n=new o.i,r=[],i=0;i<=64*t;++i)r.push(0,Math.cos(i/32*Math.PI)*e,Math.sin(i/32*Math.PI)*e);return n.setAttribute("position",new o.x(r,3)),n},E={X:[[new o.W(C,l),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new o.W(C,l),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new o.G(T,y)]],Y:[[new o.W(C,c),[0,1,0],null,null,"fwd"],[new o.W(C,c),[0,1,0],[Math.PI,0,0],null,"bwd"],[new o.G(T,x),null,[0,0,Math.PI/2]]],Z:[[new o.W(C,d),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new o.W(C,d),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new o.G(T,w),null,[0,-Math.PI/2,0]]],XYZ:[[new o.W(new o.ib(.1,0),f.clone()),[0,0,0],[0,0,0]]],XY:[[new o.W(new o.lb(.295,.295),h.clone()),[.15,.15,0]],[new o.G(T,M),[.18,.3,0],null,[.125,1,1]],[new o.G(T,M),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new o.W(new o.lb(.295,.295),v.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new o.G(T,S),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new o.G(T,S),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new o.W(new o.lb(.295,.295),m.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new o.G(T,P),[.18,0,.3],null,[.125,1,1]],[new o.G(T,P),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},R={X:[[new o.W(new o.q(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new o.W(new o.q(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new o.W(new o.q(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new o.W(new o.ib(.2,0),n)]],XY:[[new o.W(new o.lb(.4,.4),n),[.2,.2,0]]],YZ:[[new o.W(new o.lb(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new o.W(new o.lb(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},W={START:[[new o.W(new o.ib(.01,2),r),null,null,null,"helper"]],END:[[new o.W(new o.ib(.01,2),r),null,null,null,"helper"]],DELTA:[[new o.G((B=new o.i,B.setAttribute("position",new o.x([0,0,0,1,1,1],3)),B),r),null,null,null,"helper"]],X:[[new o.G(T,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new o.G(T,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new o.G(T,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},O={X:[[new o.G(_(1,.5),y)],[new o.W(new o.ib(.04,0),l),[0,0,.99],null,[1,3,1]]],Y:[[new o.G(_(1,.5),x),null,[0,0,-Math.PI/2]],[new o.W(new o.ib(.04,0),c),[0,0,.99],null,[3,1,1]]],Z:[[new o.G(_(1,.5),w),null,[0,Math.PI/2,0]],[new o.W(new o.ib(.04,0),d),[.99,0,0],null,[1,3,1]]],E:[[new o.G(_(1.25,1),I),null,[0,Math.PI/2,0]],[new o.W(new o.q(.03,0,.15,4,1,!1),I),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new o.W(new o.q(.03,0,.15,4,1,!1),I),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new o.W(new o.q(.03,0,.15,4,1,!1),I),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new o.W(new o.q(.03,0,.15,4,1,!1),I),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new o.G(_(1,1),A),null,[0,Math.PI/2,0]]]},Z={AXIS:[[new o.G(T,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},j={X:[[new o.W(new o.Sb(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new o.W(new o.Sb(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new o.W(new o.Sb(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new o.W(new o.Sb(1.25,.1,2,24),n)]],XYZE:[[new o.W(new o.Lb(.7,10,8),n)]]},F={X:[[new o.W(k,l),[.8,0,0],[0,0,-Math.PI/2]],[new o.G(T,y),null,null,[.8,1,1]]],Y:[[new o.W(k,c),[0,.8,0]],[new o.G(T,x),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new o.W(k,d),[0,0,.8],[Math.PI/2,0,0]],[new o.G(T,w),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new o.W(k,h),[.85,.85,0],null,[2,2,.2]],[new o.G(T,M),[.855,.98,0],null,[.125,1,1]],[new o.G(T,M),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new o.W(k,v),[0,.85,.85],null,[.2,2,2]],[new o.G(T,S),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new o.G(T,S),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new o.W(k,m),[.85,0,.85],null,[2,.2,2]],[new o.G(T,P),[.855,0,.98],null,[.125,1,1]],[new o.G(T,P),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new o.W(new o.g(.125,.125,.125),f.clone()),[1.1,0,0]]],XYZY:[[new o.W(new o.g(.125,.125,.125),f.clone()),[0,1.1,0]]],XYZZ:[[new o.W(new o.g(.125,.125,.125),f.clone()),[0,0,1.1]]]},X={X:[[new o.W(new o.q(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new o.W(new o.q(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new o.W(new o.q(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new o.W(k,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new o.W(k,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new o.W(k,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new o.W(new o.g(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new o.W(new o.g(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new o.W(new o.g(.2,.2,.2),n),[0,0,1.1]]]},L={X:[[new o.G(T,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new o.G(T,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new o.G(T,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},Y=function(e){var t=new o.hb;for(var n in e)for(var i=e[n].length;i--;){var object=e[n][i][0].clone(),r=e[n][i][1],l=e[n][i][2],c=e[n][i][3],d=e[n][i][4];object.name=n,object.tag=d,r&&object.position.set(r[0],r[1],r[2]),l&&object.rotation.set(l[0],l[1],l[2]),c&&object.scale.set(c[0],c[1],c[2]),object.updateMatrix();var f=object.geometry.clone();f.applyMatrix4(object.matrix),object.geometry=f,object.renderOrder=1/0,object.position.set(0,0,0),object.rotation.set(0,0,0),object.scale.set(1,1,1),t.add(object)}return t},z=new o.Zb(0,0,0),D=new o.u,V=new o.Zb(0,1,0),G=new o.Zb(0,0,0),N=new o.V,Q=new o.qb,U=new o.qb,H=new o.qb,J=new o.Zb(1,0,0),$=new o.Zb(0,1,0),K=new o.Zb(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Y(E)),this.add(this.gizmo.rotate=Y(O)),this.add(this.gizmo.scale=Y(F)),this.add(this.picker.translate=Y(R)),this.add(this.picker.rotate=Y(j)),this.add(this.picker.scale=Y(X)),this.add(this.helper.translate=Y(W)),this.add(this.helper.rotate=Y(Z)),this.add(this.helper.scale=Y(L)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:H;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var n=[];n=(n=(n=n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var i=0;i<n.length;i++){var r,l=n[i];if(l.visible=!0,l.rotation.set(0,0,0),l.position.copy(this.worldPosition),r=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),l.scale.set(1,1,1).multiplyScalar(r*this.size/7),"helper"!==l.tag){if(l.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){var c=.99;"X"!==l.name&&"XYZX"!==l.name||Math.abs(V.copy(J).applyQuaternion(t).dot(this.eye))>c&&(l.scale.set(1e-10,1e-10,1e-10),l.visible=!1),"Y"!==l.name&&"XYZY"!==l.name||Math.abs(V.copy($).applyQuaternion(t).dot(this.eye))>c&&(l.scale.set(1e-10,1e-10,1e-10),l.visible=!1),"Z"!==l.name&&"XYZZ"!==l.name||Math.abs(V.copy(K).applyQuaternion(t).dot(this.eye))>c&&(l.scale.set(1e-10,1e-10,1e-10),l.visible=!1),"XY"===l.name&&Math.abs(V.copy(K).applyQuaternion(t).dot(this.eye))<.2&&(l.scale.set(1e-10,1e-10,1e-10),l.visible=!1),"YZ"===l.name&&Math.abs(V.copy(J).applyQuaternion(t).dot(this.eye))<.2&&(l.scale.set(1e-10,1e-10,1e-10),l.visible=!1),"XZ"===l.name&&Math.abs(V.copy($).applyQuaternion(t).dot(this.eye))<.2&&(l.scale.set(1e-10,1e-10,1e-10),l.visible=!1),-1!==l.name.search("X")&&(V.copy(J).applyQuaternion(t).dot(this.eye)<0?"fwd"===l.tag?l.visible=!1:l.scale.x*=-1:"bwd"===l.tag&&(l.visible=!1)),-1!==l.name.search("Y")&&(V.copy($).applyQuaternion(t).dot(this.eye)<0?"fwd"===l.tag?l.visible=!1:l.scale.y*=-1:"bwd"===l.tag&&(l.visible=!1)),-1!==l.name.search("Z")&&(V.copy(K).applyQuaternion(t).dot(this.eye)<0?"fwd"===l.tag?l.visible=!1:l.scale.z*=-1:"bwd"===l.tag&&(l.visible=!1))}else"rotate"===this.mode&&(U.copy(t),V.copy(this.eye).applyQuaternion(Q.copy(t).invert()),-1!==l.name.search("E")&&l.quaternion.setFromRotationMatrix(N.lookAt(this.eye,G,$)),"X"===l.name&&(Q.setFromAxisAngle(J,Math.atan2(-V.y,V.z)),Q.multiplyQuaternions(U,Q),l.quaternion.copy(Q)),"Y"===l.name&&(Q.setFromAxisAngle($,Math.atan2(V.x,V.z)),Q.multiplyQuaternions(U,Q),l.quaternion.copy(Q)),"Z"===l.name&&(Q.setFromAxisAngle(K,Math.atan2(V.y,V.x)),Q.multiplyQuaternions(U,Q),l.quaternion.copy(Q)));l.visible=l.visible&&(-1===l.name.indexOf("X")||this.showX),l.visible=l.visible&&(-1===l.name.indexOf("Y")||this.showY),l.visible=l.visible&&(-1===l.name.indexOf("Z")||this.showZ),l.visible=l.visible&&(-1===l.name.indexOf("E")||this.showX&&this.showY&&this.showZ),l.material._opacity=l.material._opacity||l.material.opacity,l.material._color=l.material._color||l.material.color.clone(),l.material.color.copy(l.material._color),l.material.opacity=l.material._opacity,this.enabled?this.axis&&(l.name===this.axis||this.axis.split("").some((function(a){return l.name===a}))?(l.material.opacity=1,l.material.color.lerp(new o.m(1,1,1),.5)):(l.material.opacity*=.25,l.material.color.lerp(new o.m(1,1,1),.5))):(l.material.opacity*=.5,l.material.color.lerp(new o.m(1,1,1),.5))}else l.visible=!1,"AXIS"===l.name?(l.position.copy(this.worldPositionStart),l.visible=!!this.axis,"X"===this.axis&&(Q.setFromEuler(D.set(0,0,0)),l.quaternion.copy(t).multiply(Q),Math.abs(V.copy(J).applyQuaternion(t).dot(this.eye))>.9&&(l.visible=!1)),"Y"===this.axis&&(Q.setFromEuler(D.set(0,0,Math.PI/2)),l.quaternion.copy(t).multiply(Q),Math.abs(V.copy($).applyQuaternion(t).dot(this.eye))>.9&&(l.visible=!1)),"Z"===this.axis&&(Q.setFromEuler(D.set(0,Math.PI/2,0)),l.quaternion.copy(t).multiply(Q),Math.abs(V.copy(K).applyQuaternion(t).dot(this.eye))>.9&&(l.visible=!1)),"XYZE"===this.axis&&(Q.setFromEuler(D.set(0,Math.PI/2,0)),V.copy(this.rotationAxis),l.quaternion.setFromRotationMatrix(N.lookAt(G,V,$)),l.quaternion.multiply(Q),l.visible=this.dragging),"E"===this.axis&&(l.visible=!1)):"START"===l.name?(l.position.copy(this.worldPositionStart),l.visible=this.dragging):"END"===l.name?(l.position.copy(this.worldPosition),l.visible=this.dragging):"DELTA"===l.name?(l.position.copy(this.worldPositionStart),l.quaternion.copy(this.worldQuaternionStart),z.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),z.applyQuaternion(this.worldQuaternionStart.clone().invert()),l.scale.copy(z),l.visible=this.dragging):(l.quaternion.copy(t),this.dragging?l.position.copy(this.worldPositionStart):l.position.copy(this.worldPosition),this.axis&&(l.visible=-1!==this.axis.search(l.name)))}o.hb.prototype.updateMatrixWorld.call(this)}};l.prototype=Object.assign(Object.create(o.hb.prototype),{constructor:l,isTransformControlsGizmo:!0});var c=function(){o.W.call(this,new o.lb(1e5,1e5,2,2),new o.X({visible:!1,wireframe:!0,side:o.s,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new o.Zb(1,0,0),t=new o.Zb(0,1,0),n=new o.Zb(0,0,1),r=new o.Zb,l=new o.Zb,c=new o.Zb,d=new o.V,f=new o.qb;this.updateMatrixWorld=function(){var h=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(h="local"),e.set(1,0,0).applyQuaternion("local"===h?this.worldQuaternion:f),t.set(0,1,0).applyQuaternion("local"===h?this.worldQuaternion:f),n.set(0,0,1).applyQuaternion("local"===h?this.worldQuaternion:f),c.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":c.copy(this.eye).cross(e),l.copy(e).cross(c);break;case"Y":c.copy(this.eye).cross(t),l.copy(t).cross(c);break;case"Z":c.copy(this.eye).cross(n),l.copy(n).cross(c);break;case"XY":l.copy(n);break;case"YZ":l.copy(e);break;case"XZ":c.copy(n),l.copy(t);break;case"XYZ":case"E":l.set(0,0,0)}break;case"rotate":default:l.set(0,0,0)}0===l.length()?this.quaternion.copy(this.cameraQuaternion):(d.lookAt(r.set(0,0,0),l,c),this.quaternion.setFromRotationMatrix(d)),o.hb.prototype.updateMatrixWorld.call(this)}};c.prototype=Object.assign(Object.create(o.W.prototype),{constructor:c,isTransformControlsPlane:!0})},639:function(e,t,n){n(241)("Int32",(function(e){return function(data,t,n){return e(this,data,t,n)}}))},640:function(e,t,n){var o=n(19),r=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&r(e)===e}},641:function(e,t,n){"use strict";var o=n(106),r=n(169).getWeakData,l=n(8),c=n(19),d=n(73),f=n(37),h=n(40),v=n(27),m=n(55),y=m.set,x=m.getterFor,w=h.find,S=h.findIndex,P=0,M=function(e){return e.frozen||(e.frozen=new A)},A=function(){this.entries=[]},I=function(e,t){return w(e.entries,(function(e){return e[0]===t}))};A.prototype={get:function(e){var t=I(this,e);if(t)return t[1]},has:function(e){return!!I(this,e)},set:function(e,t){var n=I(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=S(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,h){var m=e((function(e,o){d(e,m,t),y(e,{type:t,id:P++,frozen:void 0}),null!=o&&f(o,e[h],{that:e,AS_ENTRIES:n})})),w=x(t),S=function(e,t,n){var o=w(e),data=r(l(t),!0);return!0===data?M(o).set(t,n):data[o.id]=n,e};return o(m.prototype,{delete:function(e){var t=w(this);if(!c(e))return!1;var data=r(e);return!0===data?M(t).delete(e):data&&v(data,t.id)&&delete data[t.id]},has:function(e){var t=w(this);if(!c(e))return!1;var data=r(e);return!0===data?M(t).has(e):data&&v(data,t.id)}}),o(m.prototype,n?{get:function(e){var t=w(this);if(c(e)){var data=r(e);return!0===data?M(t).get(e):data?data[t.id]:void 0}},set:function(e,t){return S(this,e,t)}}:{add:function(e){return S(this,e,!0)}}),m}}},642:function(e,t,n){"use strict";var o=n(8),r=n(38);e.exports=function(){for(var e=o(this),t=r(e.add),n=0,l=arguments.length;n<l;n++)t.call(e,arguments[n]);return e}},740:function(e,t,n){n(2)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},741:function(e,t,n){"use strict";var o=n(2),r=n(131).charAt;o({target:"String",proto:!0,forced:n(6)((function(){return"𠮷"!=="𠮷".at(0)}))},{at:function(e){return r(this,e)}})},742:function(e,t,n){"use strict";n(2)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},743:function(e,t,n){n(241)("Uint8",(function(e){return function(data,t,n){return e(this,data,t,n)}}),!0)},744:function(e,t,n){n(241)("Float64",(function(e){return function(data,t,n){return e(this,data,t,n)}}))},745:function(e,t,n){n(2)({target:"Number",stat:!0},{isInteger:n(640)})},746:function(e,t,n){n(2)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},747:function(e,t,n){var o=n(2),r=Math.log,l=Math.LN2;o({target:"Math",stat:!0},{log2:function(e){return r(e)/l}})},748:function(e,t,n){var o=n(2),r=n(289),l=n(6),c=n(19),d=n(169).onFreeze,f=Object.freeze;o({target:"Object",stat:!0,forced:l((function(){f(1)})),sham:!r},{freeze:function(e){return f&&c(e)?f(d(e)):e}})},750:function(e,t,n){"use strict";var o=n(267),r=n(290);e.exports=o("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},751:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(642);o({target:"Set",proto:!0,real:!0,forced:r},{addAll:function(){return l.apply(this,arguments)}})},752:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(268);o({target:"Set",proto:!0,real:!0,forced:r},{deleteAll:function(){return l.apply(this,arguments)}})},753:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(49),c=n(8),d=n(38),f=n(54),h=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{difference:function(e){var t=c(this),n=new(f(t,l("Set")))(t),o=d(n.delete);return h(e,(function(e){o.call(n,e)})),n}})},754:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(8),c=n(39),d=n(395),f=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{every:function(e){var t=l(this),n=d(t),o=c(e,arguments.length>1?arguments[1]:void 0,3);return!f(n,(function(e,n){if(!o(e,e,t))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},755:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(49),c=n(8),d=n(38),f=n(39),h=n(54),v=n(395),m=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{filter:function(e){var t=c(this),n=v(t),o=f(e,arguments.length>1?arguments[1]:void 0,3),r=new(h(t,l("Set"))),y=d(r.add);return m(n,(function(e){o(e,e,t)&&y.call(r,e)}),{IS_ITERATOR:!0}),r}})},756:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(8),c=n(39),d=n(395),f=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{find:function(e){var t=l(this),n=d(t),o=c(e,arguments.length>1?arguments[1]:void 0,3);return f(n,(function(e,n){if(o(e,e,t))return n(e)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},757:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(49),c=n(8),d=n(38),f=n(54),h=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{intersection:function(e){var t=c(this),n=new(f(t,l("Set"))),o=d(t.has),r=d(n.add);return h(e,(function(e){o.call(t,e)&&r.call(n,e)})),n}})},758:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(8),c=n(38),d=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{isDisjointFrom:function(e){var t=l(this),n=c(t.has);return!d(e,(function(e,o){if(!0===n.call(t,e))return o()}),{INTERRUPTED:!0}).stopped}})},759:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(49),c=n(8),d=n(38),f=n(173),h=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{isSubsetOf:function(e){var t=f(this),n=c(e),o=n.has;return"function"!=typeof o&&(n=new(l("Set"))(e),o=d(n.has)),!h(t,(function(e,t){if(!1===o.call(n,e))return t()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},760:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(8),c=n(38),d=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{isSupersetOf:function(e){var t=l(this),n=c(t.has);return!d(e,(function(e,o){if(!1===n.call(t,e))return o()}),{INTERRUPTED:!0}).stopped}})},761:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(8),c=n(395),d=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{join:function(e){var t=l(this),n=c(t),o=void 0===e?",":String(e),r=[];return d(n,r.push,{that:r,IS_ITERATOR:!0}),r.join(o)}})},762:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(49),c=n(8),d=n(38),f=n(39),h=n(54),v=n(395),m=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{map:function(e){var t=c(this),n=v(t),o=f(e,arguments.length>1?arguments[1]:void 0,3),r=new(h(t,l("Set"))),y=d(r.add);return m(n,(function(e){y.call(r,o(e,e,t))}),{IS_ITERATOR:!0}),r}})},763:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(8),c=n(38),d=n(395),f=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{reduce:function(e){var t=l(this),n=d(t),o=arguments.length<2,r=o?void 0:arguments[1];if(c(e),f(n,(function(n){o?(o=!1,r=n):r=e(r,n,n,t)}),{IS_ITERATOR:!0}),o)throw TypeError("Reduce of empty set with no initial value");return r}})},764:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(8),c=n(39),d=n(395),f=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{some:function(e){var t=l(this),n=d(t),o=c(e,arguments.length>1?arguments[1]:void 0,3);return f(n,(function(e,n){if(o(e,e,t))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},765:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(49),c=n(8),d=n(38),f=n(54),h=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{symmetricDifference:function(e){var t=c(this),n=new(f(t,l("Set")))(t),o=d(n.delete),r=d(n.add);return h(e,(function(e){o.call(n,e)||r.call(n,e)})),n}})},766:function(e,t,n){"use strict";var o=n(2),r=n(14),l=n(49),c=n(8),d=n(38),f=n(54),h=n(37);o({target:"Set",proto:!0,real:!0,forced:r},{union:function(e){var t=c(this),n=new(f(t,l("Set")))(t);return h(e,d(n.add),{that:n}),n}})},771:function(e,t,n){var o;o=function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},n.p="",n(n.s=24)}([function(e,t){var n={};e.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n.extend=function(e,t){var o,r;"boolean"==typeof t?(o=2,r=t):(o=1,r=!0);for(var i=o;i<arguments.length;i++){var source=arguments[i];if(source)for(var l in source)r&&source[l]&&source[l].constructor===Object?e[l]&&e[l].constructor!==Object?e[l]=source[l]:(e[l]=e[l]||{},n.extend(e[l],r,source[l])):e[l]=source[l]}return e},n.clone=function(e,t){return n.extend({},t,e)},n.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},n.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),i=0;i<n.length;i++)t.push(e[n[i]]);return t}for(var o in e)t.push(e[o]);return t},n.get=function(e,path,t,n){path=path.split(".").slice(t,n);for(var i=0;i<path.length;i+=1)e=e[path[i]];return e},n.set=function(e,path,t,o,r){var l=path.split(".").slice(o,r);return n.get(e,path,0,-1)[l[l.length-1]]=t,t},n.shuffle=function(e){for(var i=e.length-1;i>0;i--){var t=Math.floor(n.random()*(i+1)),o=e[i];e[i]=e[t],e[t]=o}return e},n.choose=function(e){return e[Math.floor(n.random()*e.length)]},n.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isFunction=function(e){return"function"==typeof e},n.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},n.isString=function(e){return"[object String]"===toString.call(e)},n.clamp=function(e,t,n){return e<t?t:e>n?n:e},n.sign=function(e){return e<0?-1:1},n.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime},n.random=function(t,n){return n=void 0!==n?n:1,(t=void 0!==t?t:0)+e()*(n-t)};var e=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},n.map=function(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n},n.topologicalSort=function(e){var t=[],o=[],r=[];for(var l in e)o[l]||r[l]||n._topologicalSort(l,o,r,e,t);return t},n._topologicalSort=function(e,t,o,r,l){var c=r[e]||[];o[e]=!0;for(var i=0;i<c.length;i+=1){var d=c[i];o[d]||t[d]||n._topologicalSort(d,t,o,r,l)}o[e]=!1,t[e]=!0,l.push(e)},n.chain=function(){for(var e=[],i=0;i<arguments.length;i+=1){var t=arguments[i];t._chained?e.push.apply(e,t._chained):e.push(t)}var n=function(){for(var t,n=new Array(arguments.length),i=0,o=arguments.length;i<o;i++)n[i]=arguments[i];for(i=0;i<e.length;i+=1){var r=e[i].apply(t,n);void 0!==r&&(t=r)}return t};return n._chained=e,n},n.chainPathBefore=function(base,path,e){return n.set(base,path,n.chain(e,n.get(base,path)))},n.chainPathAfter=function(base,path,e){return n.set(base,path,n.chain(n.get(base,path),e))}}()},function(e,t){var n={};e.exports=n,n.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&n.update(t,e),t},n.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<t.length;i++){var o=t[i];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},n.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},n.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},n.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},n.shift=function(e,t){var n=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+o}},function(e,t){var n={};e.exports=n,n.create=function(e,t){return{x:e||0,y:t||0}},n.clone=function(e){return{x:e.x,y:e.y}},n.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},n.rotate=function(e,t,output){var n=Math.cos(t),o=Math.sin(t);output||(output={});var r=e.x*n-e.y*o;return output.y=e.x*o+e.y*n,output.x=r,output},n.rotateAbout=function(e,t,n,output){var o=Math.cos(t),r=Math.sin(t);output||(output={});var l=n.x+((e.x-n.x)*o-(e.y-n.y)*r);return output.y=n.y+((e.x-n.x)*r+(e.y-n.y)*o),output.x=l,output},n.normalise=function(e){var t=n.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.cross=function(e,t){return e.x*t.y-e.y*t.x},n.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},n.add=function(e,t,output){return output||(output={}),output.x=e.x+t.x,output.y=e.y+t.y,output},n.sub=function(e,t,output){return output||(output={}),output.x=e.x-t.x,output.y=e.y-t.y,output},n.mult=function(e,t){return{x:e.x*t,y:e.y*t}},n.div=function(e,t){return{x:e.x/t,y:e.y/t}},n.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},n.neg=function(e){return{x:-e.x,y:-e.y}},n.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(e,t,n){var o={};e.exports=o;var r=n(2),l=n(0);o.create=function(e,body){for(var t=[],i=0;i<e.length;i++){var n=e[i],o={x:n.x,y:n.y,index:i,body:body,isInternal:!1};t.push(o)}return t},o.fromPath=function(path,body){var e=[];return path.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,n,o){e.push({x:parseFloat(n),y:parseFloat(o)})})),o.create(e,body)},o.centre=function(e){for(var t,n,l,area=o.area(e,!0),c={x:0,y:0},i=0;i<e.length;i++)l=(i+1)%e.length,t=r.cross(e[i],e[l]),n=r.mult(r.add(e[i],e[l]),t),c=r.add(c,n);return r.div(c,6*area)},o.mean=function(e){for(var t={x:0,y:0},i=0;i<e.length;i++)t.x+=e[i].x,t.y+=e[i].y;return r.div(t,e.length)},o.area=function(e,t){for(var area=0,n=e.length-1,i=0;i<e.length;i++)area+=(e[n].x-e[i].x)*(e[n].y+e[i].y),n=i;return t?area/2:Math.abs(area)/2},o.inertia=function(e,t){for(var n,o,l=0,c=0,d=e,f=0;f<d.length;f++)o=(f+1)%d.length,l+=(n=Math.abs(r.cross(d[o],d[f])))*(r.dot(d[o],d[o])+r.dot(d[o],d[f])+r.dot(d[f],d[f])),c+=n;return t/6*(l/c)},o.translate=function(e,t,n){var i;if(n)for(i=0;i<e.length;i++)e[i].x+=t.x*n,e[i].y+=t.y*n;else for(i=0;i<e.length;i++)e[i].x+=t.x,e[i].y+=t.y;return e},o.rotate=function(e,t,n){if(0!==t){for(var o=Math.cos(t),r=Math.sin(t),i=0;i<e.length;i++){var l=e[i],c=l.x-n.x,d=l.y-n.y;l.x=n.x+(c*o-d*r),l.y=n.y+(c*r+d*o)}return e}},o.contains=function(e,t){for(var i=0;i<e.length;i++){var n=e[i],o=e[(i+1)%e.length];if((t.x-n.x)*(o.y-n.y)+(t.y-n.y)*(n.x-o.x)>0)return!1}return!0},o.scale=function(e,t,n,l){if(1===t&&1===n)return e;var c,d;l=l||o.centre(e);for(var i=0;i<e.length;i++)c=e[i],d=r.sub(c,l),e[i].x=l.x+d.x*t,e[i].y=l.y+d.y*n;return e},o.chamfer=function(e,t,n,o,c){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,o=o||2,c=c||14;for(var d=[],i=0;i<e.length;i++){var f=e[i-1>=0?i-1:e.length-1],h=e[i],v=e[(i+1)%e.length],m=t[i<t.length?i:t.length-1];if(0!==m){var y=r.normalise({x:h.y-f.y,y:f.x-h.x}),x=r.normalise({x:v.y-h.y,y:h.x-v.x}),w=Math.sqrt(2*Math.pow(m,2)),S=r.mult(l.clone(y),m),P=r.normalise(r.mult(r.add(y,x),.5)),M=r.sub(h,r.mult(P,w)),A=n;-1===n&&(A=1.75*Math.pow(m,.32)),(A=l.clamp(A,o,c))%2==1&&(A+=1);for(var I=Math.acos(r.dot(y,x))/A,C=0;C<A;C++)d.push(r.add(r.rotate(S,I*C),M))}else d.push(h)}return d},o.clockwiseSort=function(e){var t=o.mean(e);return e.sort((function(e,n){return r.angle(t,e)-r.angle(t,n)})),e},o.isConvex=function(e){var i,t,n,o,r=0,l=e.length;if(l<3)return null;for(i=0;i<l;i++)if(n=(i+2)%l,o=(e[t=(i+1)%l].x-e[i].x)*(e[n].y-e[t].y),(o-=(e[t].y-e[i].y)*(e[n].x-e[t].x))<0?r|=1:o>0&&(r|=2),3===r)return!1;return 0!==r||null},o.hull=function(e){var t,i,n=[],o=[];for((e=e.slice(0)).sort((function(e,t){var n=e.x-t.x;return 0!==n?n:e.y-t.y})),i=0;i<e.length;i+=1){for(t=e[i];o.length>=2&&r.cross3(o[o.length-2],o[o.length-1],t)<=0;)o.pop();o.push(t)}for(i=e.length-1;i>=0;i-=1){for(t=e[i];n.length>=2&&r.cross3(n[n.length-2],n[n.length-1],t)<=0;)n.pop();n.push(t)}return n.pop(),o.pop(),n.concat(o)}},function(e,t,n){var o={};e.exports=o;var r=n(0);o.on=function(object,e,t){for(var n,o=e.split(" "),i=0;i<o.length;i++)n=o[i],object.events=object.events||{},object.events[n]=object.events[n]||[],object.events[n].push(t);return t},o.off=function(object,e,t){if(e){"function"==typeof e&&(t=e,e=r.keys(object.events).join(" "));for(var n=e.split(" "),i=0;i<n.length;i++){var o=object.events[n[i]],l=[];if(t&&o)for(var c=0;c<o.length;c++)o[c]!==t&&l.push(o[c]);object.events[n[i]]=l}}else object.events={}},o.trigger=function(object,e,t){var n,o,l,c,d=object.events;if(d&&r.keys(d).length>0){t||(t={}),n=e.split(" ");for(var i=0;i<n.length;i++)if(l=d[o=n[i]]){(c=r.clone(t,!1)).name=o,c.source=object;for(var f=0;f<l.length;f++)l[f].apply(object,[c])}}}},function(e,t,n){var o={};e.exports=o;var r=n(4),l=n(0),c=n(1),d=n(6);o.create=function(e){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},o.setModified=function(e,t,n,r){if(e.isModified=t,n&&e.parent&&o.setModified(e.parent,t,n,r),r)for(var i=0;i<e.composites.length;i++){var l=e.composites[i];o.setModified(l,t,n,r)}},o.add=function(e,object){var t=[].concat(object);r.trigger(e,"beforeAdd",{object:object});for(var i=0;i<t.length;i++){var n=t[i];switch(n.type){case"body":if(n.parent!==n){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(e,n);break;case"constraint":o.addConstraint(e,n);break;case"composite":o.addComposite(e,n);break;case"mouseConstraint":o.addConstraint(e,n.constraint)}}return r.trigger(e,"afterAdd",{object:object}),e},o.remove=function(e,object,t){var n=[].concat(object);r.trigger(e,"beforeRemove",{object:object});for(var i=0;i<n.length;i++){var l=n[i];switch(l.type){case"body":o.removeBody(e,l,t);break;case"constraint":o.removeConstraint(e,l,t);break;case"composite":o.removeComposite(e,l,t);break;case"mouseConstraint":o.removeConstraint(e,l.constraint)}}return r.trigger(e,"afterRemove",{object:object}),e},o.addComposite=function(e,t){return e.composites.push(t),t.parent=e,o.setModified(e,!0,!0,!1),e},o.removeComposite=function(e,t,n){var r=l.indexOf(e.composites,t);if(-1!==r&&(o.removeCompositeAt(e,r),o.setModified(e,!0,!0,!1)),n)for(var i=0;i<e.composites.length;i++)o.removeComposite(e.composites[i],t,!0);return e},o.removeCompositeAt=function(e,t){return e.composites.splice(t,1),o.setModified(e,!0,!0,!1),e},o.addBody=function(e,body){return e.bodies.push(body),o.setModified(e,!0,!0,!1),e},o.removeBody=function(e,body,t){var n=l.indexOf(e.bodies,body);if(-1!==n&&(o.removeBodyAt(e,n),o.setModified(e,!0,!0,!1)),t)for(var i=0;i<e.composites.length;i++)o.removeBody(e.composites[i],body,!0);return e},o.removeBodyAt=function(e,t){return e.bodies.splice(t,1),o.setModified(e,!0,!0,!1),e},o.addConstraint=function(e,t){return e.constraints.push(t),o.setModified(e,!0,!0,!1),e},o.removeConstraint=function(e,t,n){var r=l.indexOf(e.constraints,t);if(-1!==r&&o.removeConstraintAt(e,r),n)for(var i=0;i<e.composites.length;i++)o.removeConstraint(e.composites[i],t,!0);return e},o.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),o.setModified(e,!0,!0,!1),e},o.clear=function(e,t,n){if(n)for(var i=0;i<e.composites.length;i++)o.clear(e.composites[i],t,!0);return t?e.bodies=e.bodies.filter((function(body){return body.isStatic})):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,o.setModified(e,!0,!0,!1),e},o.allBodies=function(e){for(var t=[].concat(e.bodies),i=0;i<e.composites.length;i++)t=t.concat(o.allBodies(e.composites[i]));return t},o.allConstraints=function(e){for(var t=[].concat(e.constraints),i=0;i<e.composites.length;i++)t=t.concat(o.allConstraints(e.composites[i]));return t},o.allComposites=function(e){for(var t=[].concat(e.composites),i=0;i<e.composites.length;i++)t=t.concat(o.allComposites(e.composites[i]));return t},o.get=function(e,t,n){var r,object;switch(n){case"body":r=o.allBodies(e);break;case"constraint":r=o.allConstraints(e);break;case"composite":r=o.allComposites(e).concat(e)}return r?0===(object=r.filter((function(object){return object.id.toString()===t.toString()}))).length?null:object[0]:null},o.move=function(e,t,n){return o.remove(e,t),o.add(n,t),e},o.rebase=function(e){for(var t=o.allBodies(e).concat(o.allConstraints(e)).concat(o.allComposites(e)),i=0;i<t.length;i++)t[i].id=l.nextId();return o.setModified(e,!0,!0,!1),e},o.translate=function(e,t,n){for(var r=n?o.allBodies(e):e.bodies,i=0;i<r.length;i++)d.translate(r[i],t);return o.setModified(e,!0,!0,!1),e},o.rotate=function(e,t,n,r){for(var l=Math.cos(t),c=Math.sin(t),f=r?o.allBodies(e):e.bodies,i=0;i<f.length;i++){var body=f[i],h=body.position.x-n.x,v=body.position.y-n.y;d.setPosition(body,{x:n.x+(h*l-v*c),y:n.y+(h*c+v*l)}),d.rotate(body,t)}return o.setModified(e,!0,!0,!1),e},o.scale=function(e,t,n,r,l){for(var c=l?o.allBodies(e):e.bodies,i=0;i<c.length;i++){var body=c[i],f=body.position.x-r.x,h=body.position.y-r.y;d.setPosition(body,{x:r.x+f*t,y:r.y+h*n}),d.scale(body,t,n)}return o.setModified(e,!0,!0,!1),e},o.bounds=function(e){for(var t=o.allBodies(e),n=[],i=0;i<t.length;i+=1){var body=t[i];n.push(body.bounds.min,body.bounds.max)}return c.create(n)}},function(e,t,n){var o={};e.exports=o;var r=n(3),l=n(2),c=n(7),d=(n(10),n(0)),f=n(1),h=n(15);!function(){o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o.create=function(t){var n={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:r.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},body=d.extend(n,t);return e(body,t),body},o.nextGroup=function(e){return e?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var e=function(body,e){e=e||{},o.set(body,{bounds:body.bounds||f.create(body.vertices),positionPrev:body.positionPrev||l.clone(body.position),anglePrev:body.anglePrev||body.angle,vertices:body.vertices,parts:body.parts||[body],isStatic:body.isStatic,isSleeping:body.isSleeping,parent:body.parent||body}),r.rotate(body.vertices,body.angle,body.position),h.rotate(body.axes,body.angle),f.update(body.bounds,body.vertices,body.velocity),o.set(body,{axes:e.axes||body.axes,area:e.area||body.area,mass:e.mass||body.mass,inertia:e.inertia||body.inertia});var t=body.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),n=body.isStatic?"#555":"#ccc",c=body.isStatic&&null===body.render.fillStyle?1:0;body.render.fillStyle=body.render.fillStyle||t,body.render.strokeStyle=body.render.strokeStyle||n,body.render.lineWidth=body.render.lineWidth||c,body.render.sprite.xOffset+=-(body.bounds.min.x-body.position.x)/(body.bounds.max.x-body.bounds.min.x),body.render.sprite.yOffset+=-(body.bounds.min.y-body.position.y)/(body.bounds.max.y-body.bounds.min.y)};o.set=function(body,e,t){var n;for(n in"string"==typeof e&&(n=e,(e={})[n]=t),e)if(Object.prototype.hasOwnProperty.call(e,n))switch(t=e[n],n){case"isStatic":o.setStatic(body,t);break;case"isSleeping":c.set(body,t);break;case"mass":o.setMass(body,t);break;case"density":o.setDensity(body,t);break;case"inertia":o.setInertia(body,t);break;case"vertices":o.setVertices(body,t);break;case"position":o.setPosition(body,t);break;case"angle":o.setAngle(body,t);break;case"velocity":o.setVelocity(body,t);break;case"angularVelocity":o.setAngularVelocity(body,t);break;case"parts":o.setParts(body,t);break;case"centre":o.setCentre(body,t);break;default:body[n]=t}},o.setStatic=function(body,e){for(var i=0;i<body.parts.length;i++){var t=body.parts[i];t.isStatic=e,e?(t._original={restitution:t.restitution,friction:t.friction,mass:t.mass,inertia:t.inertia,density:t.density,inverseMass:t.inverseMass,inverseInertia:t.inverseInertia},t.restitution=0,t.friction=1,t.mass=t.inertia=t.density=1/0,t.inverseMass=t.inverseInertia=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.angularVelocity=0,t.speed=0,t.angularSpeed=0,t.motion=0):t._original&&(t.restitution=t._original.restitution,t.friction=t._original.friction,t.mass=t._original.mass,t.inertia=t._original.inertia,t.density=t._original.density,t.inverseMass=t._original.inverseMass,t.inverseInertia=t._original.inverseInertia,t._original=null)}},o.setMass=function(body,e){var t=body.inertia/(body.mass/6);body.inertia=t*(e/6),body.inverseInertia=1/body.inertia,body.mass=e,body.inverseMass=1/body.mass,body.density=body.mass/body.area},o.setDensity=function(body,e){o.setMass(body,e*body.area),body.density=e},o.setInertia=function(body,e){body.inertia=e,body.inverseInertia=1/body.inertia},o.setVertices=function(body,e){e[0].body===body?body.vertices=e:body.vertices=r.create(e,body),body.axes=h.fromVertices(body.vertices),body.area=r.area(body.vertices),o.setMass(body,body.density*body.area);var t=r.centre(body.vertices);r.translate(body.vertices,t,-1),o.setInertia(body,o._inertiaScale*r.inertia(body.vertices,body.mass)),r.translate(body.vertices,body.position),f.update(body.bounds,body.vertices,body.velocity)},o.setParts=function(body,e,t){var i;for(e=e.slice(0),body.parts.length=0,body.parts.push(body),body.parent=body,i=0;i<e.length;i++){var n=e[i];n!==body&&(n.parent=body,body.parts.push(n))}if(1!==body.parts.length){if(t=void 0===t||t){var l=[];for(i=0;i<e.length;i++)l=l.concat(e[i].vertices);r.clockwiseSort(l);var c=r.hull(l),d=r.centre(c);o.setVertices(body,c),r.translate(body.vertices,d)}var f=o._totalProperties(body);body.area=f.area,body.parent=body,body.position.x=f.centre.x,body.position.y=f.centre.y,body.positionPrev.x=f.centre.x,body.positionPrev.y=f.centre.y,o.setMass(body,f.mass),o.setInertia(body,f.inertia),o.setPosition(body,f.centre)}},o.setCentre=function(body,e,t){t?(body.positionPrev.x+=e.x,body.positionPrev.y+=e.y,body.position.x+=e.x,body.position.y+=e.y):(body.positionPrev.x=e.x-(body.position.x-body.positionPrev.x),body.positionPrev.y=e.y-(body.position.y-body.positionPrev.y),body.position.x=e.x,body.position.y=e.y)},o.setPosition=function(body,e){var t=l.sub(e,body.position);body.positionPrev.x+=t.x,body.positionPrev.y+=t.y;for(var i=0;i<body.parts.length;i++){var n=body.parts[i];n.position.x+=t.x,n.position.y+=t.y,r.translate(n.vertices,t),f.update(n.bounds,n.vertices,body.velocity)}},o.setAngle=function(body,e){var t=e-body.angle;body.anglePrev+=t;for(var i=0;i<body.parts.length;i++){var n=body.parts[i];n.angle+=t,r.rotate(n.vertices,t,body.position),h.rotate(n.axes,t),f.update(n.bounds,n.vertices,body.velocity),i>0&&l.rotateAbout(n.position,t,body.position,n.position)}},o.setVelocity=function(body,e){body.positionPrev.x=body.position.x-e.x,body.positionPrev.y=body.position.y-e.y,body.velocity.x=e.x,body.velocity.y=e.y,body.speed=l.magnitude(body.velocity)},o.setAngularVelocity=function(body,e){body.anglePrev=body.angle-e,body.angularVelocity=e,body.angularSpeed=Math.abs(body.angularVelocity)},o.translate=function(body,e){o.setPosition(body,l.add(body.position,e))},o.rotate=function(body,e,t){if(t){var n=Math.cos(e),r=Math.sin(e),l=body.position.x-t.x,c=body.position.y-t.y;o.setPosition(body,{x:t.x+(l*n-c*r),y:t.y+(l*r+c*n)}),o.setAngle(body,body.angle+e)}else o.setAngle(body,body.angle+e)},o.scale=function(body,e,t,n){var l=0,c=0;n=n||body.position;for(var i=0;i<body.parts.length;i++){var d=body.parts[i];r.scale(d.vertices,e,t,n),d.axes=h.fromVertices(d.vertices),d.area=r.area(d.vertices),o.setMass(d,body.density*d.area),r.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),o.setInertia(d,o._inertiaScale*r.inertia(d.vertices,d.mass)),r.translate(d.vertices,{x:d.position.x,y:d.position.y}),i>0&&(l+=d.area,c+=d.inertia),d.position.x=n.x+(d.position.x-n.x)*e,d.position.y=n.y+(d.position.y-n.y)*t,f.update(d.bounds,d.vertices,body.velocity)}body.parts.length>1&&(body.area=l,body.isStatic||(o.setMass(body,body.density*l),o.setInertia(body,c))),body.circleRadius&&(e===t?body.circleRadius*=e:body.circleRadius=null)},o.update=function(body,e,t,n){var o=Math.pow(e*t*body.timeScale,2),c=1-body.frictionAir*t*body.timeScale,d=body.position.x-body.positionPrev.x,v=body.position.y-body.positionPrev.y;body.velocity.x=d*c*n+body.force.x/body.mass*o,body.velocity.y=v*c*n+body.force.y/body.mass*o,body.positionPrev.x=body.position.x,body.positionPrev.y=body.position.y,body.position.x+=body.velocity.x,body.position.y+=body.velocity.y,body.angularVelocity=(body.angle-body.anglePrev)*c*n+body.torque/body.inertia*o,body.anglePrev=body.angle,body.angle+=body.angularVelocity,body.speed=l.magnitude(body.velocity),body.angularSpeed=Math.abs(body.angularVelocity);for(var i=0;i<body.parts.length;i++){var m=body.parts[i];r.translate(m.vertices,body.velocity),i>0&&(m.position.x+=body.velocity.x,m.position.y+=body.velocity.y),0!==body.angularVelocity&&(r.rotate(m.vertices,body.angularVelocity,body.position),h.rotate(m.axes,body.angularVelocity),i>0&&l.rotateAbout(m.position,body.angularVelocity,body.position,m.position)),f.update(m.bounds,m.vertices,body.velocity)}},o.applyForce=function(body,e,t){body.force.x+=t.x,body.force.y+=t.y;var n=e.x-body.position.x,o=e.y-body.position.y;body.torque+=n*t.y-o*t.x},o._totalProperties=function(body){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===body.parts.length?0:1;i<body.parts.length;i++){var t=body.parts[i],n=t.mass!==1/0?t.mass:1;e.mass+=n,e.area+=t.area,e.inertia+=t.inertia,e.centre=l.add(e.centre,l.mult(t.position,n))}return e.centre=l.div(e.centre,e.mass),e}}()},function(e,t,n){var o={};e.exports=o;var r=n(4);o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(e,t){for(var n=t*t*t,i=0;i<e.length;i++){var body=e[i],r=body.speed*body.speed+body.angularSpeed*body.angularSpeed;if(0===body.force.x&&0===body.force.y){var l=Math.min(body.motion,r),c=Math.max(body.motion,r);body.motion=o._minBias*l+(1-o._minBias)*c,body.sleepThreshold>0&&body.motion<o._motionSleepThreshold*n?(body.sleepCounter+=1,body.sleepCounter>=body.sleepThreshold&&o.set(body,!0)):body.sleepCounter>0&&(body.sleepCounter-=1)}else o.set(body,!1)}},o.afterCollisions=function(e,t){for(var n=t*t*t,i=0;i<e.length;i++){var r=e[i];if(r.isActive){var l=r.collision,c=l.bodyA.parent,d=l.bodyB.parent;if(!(c.isSleeping&&d.isSleeping||c.isStatic||d.isStatic)&&(c.isSleeping||d.isSleeping)){var f=c.isSleeping&&!c.isStatic?c:d,h=f===c?d:c;!f.isStatic&&h.motion>o._motionWakeThreshold*n&&o.set(f,!1)}}}},o.set=function(body,e){var t=body.isSleeping;e?(body.isSleeping=!0,body.sleepCounter=body.sleepThreshold,body.positionImpulse.x=0,body.positionImpulse.y=0,body.positionPrev.x=body.position.x,body.positionPrev.y=body.position.y,body.anglePrev=body.angle,body.speed=0,body.angularSpeed=0,body.motion=0,t||r.trigger(body,"sleepStart")):(body.isSleeping=!1,body.sleepCounter=0,t&&r.trigger(body,"sleepEnd"))}},function(e,t,n){var o={};e.exports=o;var r=n(3),l=n(2),c=n(7),d=n(1),f=n(15),h=n(0);o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?l.add(t.bodyA.position,t.pointA):t.pointA,o=t.bodyB?l.add(t.bodyB.position,t.pointB):t.pointB,r=l.magnitude(l.sub(n,o));t.length=void 0!==t.length?t.length:r,t.id=t.id||h.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var c={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(c.type="pin",c.anchors=!1):t.stiffness<.9&&(c.type="spring"),t.render=h.extend(c,t.render),t},o.preSolveAll=function(e){for(var i=0;i<e.length;i+=1){var body=e[i],t=body.constraintImpulse;body.isStatic||0===t.x&&0===t.y&&0===t.angle||(body.position.x+=t.x,body.position.y+=t.y,body.angle+=t.angle)}},o.solveAll=function(e,t){for(var i=0;i<e.length;i+=1){var n=e[i],r=!n.bodyA||n.bodyA&&n.bodyA.isStatic,l=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(r||l)&&o.solve(e[i],t)}for(i=0;i<e.length;i+=1)r=!(n=e[i]).bodyA||n.bodyA&&n.bodyA.isStatic,l=!n.bodyB||n.bodyB&&n.bodyB.isStatic,r||l||o.solve(e[i],t)},o.solve=function(e,t){var n=e.bodyA,r=e.bodyB,c=e.pointA,d=e.pointB;if(n||r){n&&!n.isStatic&&(l.rotate(c,n.angle-e.angleA,c),e.angleA=n.angle),r&&!r.isStatic&&(l.rotate(d,r.angle-e.angleB,d),e.angleB=r.angle);var f=c,h=d;if(n&&(f=l.add(n.position,c)),r&&(h=l.add(r.position,d)),f&&h){var v=l.sub(f,h),m=l.magnitude(v);m<o._minLength&&(m=o._minLength);var y,x,w,S,P,M=(m-e.length)/m,A=e.stiffness<1?e.stiffness*t:e.stiffness,I=l.mult(v,M*A),C=(n?n.inverseMass:0)+(r?r.inverseMass:0),k=C+((n?n.inverseInertia:0)+(r?r.inverseInertia:0));if(e.damping){var T=l.create();w=l.div(v,m),P=l.sub(r&&l.sub(r.position,r.positionPrev)||T,n&&l.sub(n.position,n.positionPrev)||T),S=l.dot(w,P)}n&&!n.isStatic&&(x=n.inverseMass/C,n.constraintImpulse.x-=I.x*x,n.constraintImpulse.y-=I.y*x,n.position.x-=I.x*x,n.position.y-=I.y*x,e.damping&&(n.positionPrev.x-=e.damping*w.x*S*x,n.positionPrev.y-=e.damping*w.y*S*x),y=l.cross(c,I)/k*o._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=y,n.angle-=y),r&&!r.isStatic&&(x=r.inverseMass/C,r.constraintImpulse.x+=I.x*x,r.constraintImpulse.y+=I.y*x,r.position.x+=I.x*x,r.position.y+=I.y*x,e.damping&&(r.positionPrev.x+=e.damping*w.x*S*x,r.positionPrev.y+=e.damping*w.y*S*x),y=l.cross(d,I)/k*o._torqueDampen*r.inverseInertia*(1-e.angularStiffness),r.constraintImpulse.angle+=y,r.angle+=y)}}},o.postSolveAll=function(e){for(var i=0;i<e.length;i++){var body=e[i],t=body.constraintImpulse;if(!(body.isStatic||0===t.x&&0===t.y&&0===t.angle)){c.set(body,!1);for(var n=0;n<body.parts.length;n++){var h=body.parts[n];r.translate(h.vertices,t),n>0&&(h.position.x+=t.x,h.position.y+=t.y),0!==t.angle&&(r.rotate(h.vertices,t.angle,body.position),f.rotate(h.axes,t.angle),n>0&&l.rotateAbout(h.position,t.angle,body.position,h.position)),d.update(h.bounds,h.vertices,body.velocity)}t.angle*=o._warming,t.x*=o._warming,t.y*=o._warming}}},o.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+e.pointA.x,y:(e.bodyA?e.bodyA.position.y:0)+e.pointA.y}},o.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+e.pointB.x,y:(e.bodyB?e.bodyB.position.y:0)+e.pointB.y}}},function(e,t,n){var o={};e.exports=o;var r=n(18);o.create=function(e,t){var n=e.bodyA,r=e.bodyB,l=e.parentA,c=e.parentB,d={id:o.id(n,r),bodyA:n,bodyB:r,contacts:{},activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||r.isSensor,timeCreated:t,timeUpdated:t,inverseMass:l.inverseMass+c.inverseMass,friction:Math.min(l.friction,c.friction),frictionStatic:Math.max(l.frictionStatic,c.frictionStatic),restitution:Math.max(l.restitution,c.restitution),slop:Math.max(l.slop,c.slop)};return o.update(d,e,t),d},o.update=function(e,t,n){var l=e.contacts,c=t.supports,d=e.activeContacts,f=t.parentA,h=t.parentB;if(e.collision=t,e.inverseMass=f.inverseMass+h.inverseMass,e.friction=Math.min(f.friction,h.friction),e.frictionStatic=Math.max(f.frictionStatic,h.frictionStatic),e.restitution=Math.max(f.restitution,h.restitution),e.slop=Math.max(f.slop,h.slop),d.length=0,t.collided){for(var i=0;i<c.length;i++){var v=c[i],m=r.id(v),y=l[m];y?d.push(y):d.push(l[m]=r.create(v))}e.separation=t.depth,o.setActive(e,!0,n)}else!0===e.isActive&&o.setActive(e,!1,n)},o.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},o.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},function(e,t,n){var o={};e.exports=o;var r=n(0),l=n(5),c=n(1),d=n(4),f=n(11),h=n(2),v=n(14);!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout((function(){e(r.now())}),1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o.create=function(e){var t={controller:o,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},l=r.extend(t,e);return l.canvas&&(l.canvas.width=l.options.width||l.canvas.width,l.canvas.height=l.options.height||l.canvas.height),l.mouse=e.mouse,l.engine=e.engine,l.canvas=l.canvas||n(l.options.width,l.options.height),l.context=l.canvas.getContext("2d"),l.textures={},l.bounds=l.bounds||{min:{x:0,y:0},max:{x:l.canvas.width,y:l.canvas.height}},1!==l.options.pixelRatio&&o.setPixelRatio(l,l.options.pixelRatio),r.isElement(l.element)?l.element.appendChild(l.canvas):l.canvas.parentNode||r.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),l},o.run=function(t){!function n(time){t.frameRequestId=e(n),o.world(t)}()},o.stop=function(e){t(e.frameRequestId)},o.setPixelRatio=function(e,t){var n=e.options,canvas=e.canvas;"auto"===t&&(t=m(canvas)),n.pixelRatio=t,canvas.setAttribute("data-pixel-ratio",t),canvas.width=n.width*t,canvas.height=n.height*t,canvas.style.width=n.width+"px",canvas.style.height=n.height+"px"},o.lookAt=function(e,t,n,o){o=void 0===o||o,t=r.isArray(t)?t:[t],n=n||{x:0,y:0};for(var l={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},i=0;i<t.length;i+=1){var object=t[i],c=object.bounds?object.bounds.min:object.min||object.position||object,d=object.bounds?object.bounds.max:object.max||object.position||object;c&&d&&(c.x<l.min.x&&(l.min.x=c.x),d.x>l.max.x&&(l.max.x=d.x),c.y<l.min.y&&(l.min.y=c.y),d.y>l.max.y&&(l.max.y=d.y))}var f=l.max.x-l.min.x+2*n.x,h=l.max.y-l.min.y+2*n.y,m=e.canvas.height,y=e.canvas.width/m,x=f/h,w=1,S=1;x>y?S=x/y:w=y/x,e.options.hasBounds=!0,e.bounds.min.x=l.min.x,e.bounds.max.x=l.min.x+f*w,e.bounds.min.y=l.min.y,e.bounds.max.y=l.min.y+h*S,o&&(e.bounds.min.x+=.5*f-f*w*.5,e.bounds.max.x+=.5*f-f*w*.5,e.bounds.min.y+=.5*h-h*S*.5,e.bounds.max.y+=.5*h-h*S*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(v.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),v.setOffset(e.mouse,e.bounds.min))},o.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,o=t/e.options.width,r=n/e.options.height;e.context.setTransform(e.options.pixelRatio/o,0,0,e.options.pixelRatio/r,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},o.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},o.world=function(e){var i,t=e.engine,n=t.world,canvas=e.canvas,r=e.context,m=e.options,y=l.allBodies(n),w=l.allConstraints(n),S=m.wireframes?m.wireframeBackground:m.background,P=[],M=[],A={timestamp:t.timing.timestamp};if(d.trigger(e,"beforeRender",A),e.currentBackground!==S&&x(e,S),r.globalCompositeOperation="source-in",r.fillStyle="transparent",r.fillRect(0,0,canvas.width,canvas.height),r.globalCompositeOperation="source-over",m.hasBounds){for(i=0;i<y.length;i++){var body=y[i];c.overlaps(body.bounds,e.bounds)&&P.push(body)}for(i=0;i<w.length;i++){var I=w[i],C=I.bodyA,k=I.bodyB,T=I.pointA,B=I.pointB;C&&(T=h.add(C.position,I.pointA)),k&&(B=h.add(k.position,I.pointB)),T&&B&&(c.contains(e.bounds,T)||c.contains(e.bounds,B))&&M.push(I)}o.startViewTransform(e),e.mouse&&(v.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.options.width,y:(e.bounds.max.y-e.bounds.min.y)/e.options.height}),v.setOffset(e.mouse,e.bounds.min))}else M=w,P=y,1!==e.options.pixelRatio&&e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0);!m.wireframes||t.enableSleeping&&m.showSleeping?o.bodies(e,P,r):(m.showConvexHulls&&o.bodyConvexHulls(e,P,r),o.bodyWireframes(e,P,r)),m.showBounds&&o.bodyBounds(e,P,r),(m.showAxes||m.showAngleIndicator)&&o.bodyAxes(e,P,r),m.showPositions&&o.bodyPositions(e,P,r),m.showVelocity&&o.bodyVelocity(e,P,r),m.showIds&&o.bodyIds(e,P,r),m.showSeparations&&o.separations(e,t.pairs.list,r),m.showCollisions&&o.collisions(e,t.pairs.list,r),m.showVertexNumbers&&o.vertexNumbers(e,P,r),m.showMousePosition&&o.mousePosition(e,e.mouse,r),o.constraints(M,r),m.showBroadphase&&t.broadphase.controller===f&&o.grid(e,t.broadphase,r),m.showDebug&&o.debug(e,r),m.hasBounds&&o.endViewTransform(e),d.trigger(e,"afterRender",A)},o.debug=function(e,t){var n=t,o=e.engine,r=o.world,c=o.metrics,d=e.options,h=l.allBodies(r),v="    ";if(o.timing.timestamp-(e.debugTimestamp||0)>=500){var text="";c.timing&&(text+="fps: "+Math.round(c.timing.fps)+v),c.extended&&(c.timing&&(text+="delta: "+c.timing.delta.toFixed(3)+v,text+="correction: "+c.timing.correction.toFixed(3)+v),text+="bodies: "+h.length+v,o.broadphase.controller===f&&(text+="buckets: "+c.buckets+v),text+="\n",text+="collisions: "+c.collisions+v,text+="pairs: "+o.pairs.list.length+v,text+="broad: "+c.broadEff+v,text+="mid: "+c.midEff+v,text+="narrow: "+c.narrowEff+v),e.debugString=text,e.debugTimestamp=o.timing.timestamp}if(e.debugString){n.font="12px Arial",d.wireframes?n.fillStyle="rgba(255,255,255,0.5)":n.fillStyle="rgba(0,0,0,0.5)";for(var m=e.debugString.split("\n"),i=0;i<m.length;i++)n.fillText(m[i],50,50+18*i)}},o.constraints=function(e,t){for(var n=t,i=0;i<e.length;i++){var o=e[i];if(o.render.visible&&o.pointA&&o.pointB){var l,c,d=o.bodyA,f=o.bodyB;if(l=d?h.add(d.position,o.pointA):o.pointA,"pin"===o.render.type)n.beginPath(),n.arc(l.x,l.y,3,0,2*Math.PI),n.closePath();else{if(c=f?h.add(f.position,o.pointB):o.pointB,n.beginPath(),n.moveTo(l.x,l.y),"spring"===o.render.type)for(var v,m=h.sub(c,l),y=h.perp(h.normalise(m)),x=Math.ceil(r.clamp(o.length/5,12,20)),w=1;w<x;w+=1)v=w%2==0?1:-1,n.lineTo(l.x+m.x*(w/x)+y.x*v*4,l.y+m.y*(w/x)+y.y*v*4);n.lineTo(c.x,c.y)}o.render.lineWidth&&(n.lineWidth=o.render.lineWidth,n.strokeStyle=o.render.strokeStyle,n.stroke()),o.render.anchors&&(n.fillStyle=o.render.strokeStyle,n.beginPath(),n.arc(l.x,l.y,3,0,2*Math.PI),n.arc(c.x,c.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},o.bodyShadows=function(e,t,n){for(var o=n,i=(e.engine,0);i<t.length;i++){var body=t[i];if(body.render.visible){if(body.circleRadius)o.beginPath(),o.arc(body.position.x,body.position.y,body.circleRadius,0,2*Math.PI),o.closePath();else{o.beginPath(),o.moveTo(body.vertices[0].x,body.vertices[0].y);for(var r=1;r<body.vertices.length;r++)o.lineTo(body.vertices[r].x,body.vertices[r].y);o.closePath()}var l=body.position.x-.5*e.options.width,c=body.position.y-.2*e.options.height,d=Math.abs(l)+Math.abs(c);o.shadowColor="rgba(0,0,0,0.15)",o.shadowOffsetX=.05*l,o.shadowOffsetY=.05*c,o.shadowBlur=1+12*Math.min(1,d/1e3),o.fill(),o.shadowColor=null,o.shadowOffsetX=null,o.shadowOffsetY=null,o.shadowBlur=null}}},o.bodies=function(e,t,n){var body,o,i,r,l=n,c=(e.engine,e.options),d=c.showInternalEdges||!c.wireframes;for(i=0;i<t.length;i++)if((body=t[i]).render.visible)for(r=body.parts.length>1?1:0;r<body.parts.length;r++)if((o=body.parts[r]).render.visible){if(c.showSleeping&&body.isSleeping?l.globalAlpha=.5*o.render.opacity:1!==o.render.opacity&&(l.globalAlpha=o.render.opacity),o.render.sprite&&o.render.sprite.texture&&!c.wireframes){var f=o.render.sprite,h=y(e,f.texture);l.translate(o.position.x,o.position.y),l.rotate(o.angle),l.drawImage(h,h.width*-f.xOffset*f.xScale,h.height*-f.yOffset*f.yScale,h.width*f.xScale,h.height*f.yScale),l.rotate(-o.angle),l.translate(-o.position.x,-o.position.y)}else{if(o.circleRadius)l.beginPath(),l.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);else{l.beginPath(),l.moveTo(o.vertices[0].x,o.vertices[0].y);for(var v=1;v<o.vertices.length;v++)!o.vertices[v-1].isInternal||d?l.lineTo(o.vertices[v].x,o.vertices[v].y):l.moveTo(o.vertices[v].x,o.vertices[v].y),o.vertices[v].isInternal&&!d&&l.moveTo(o.vertices[(v+1)%o.vertices.length].x,o.vertices[(v+1)%o.vertices.length].y);l.lineTo(o.vertices[0].x,o.vertices[0].y),l.closePath()}c.wireframes?(l.lineWidth=1,l.strokeStyle="#bbb",l.stroke()):(l.fillStyle=o.render.fillStyle,o.render.lineWidth&&(l.lineWidth=o.render.lineWidth,l.strokeStyle=o.render.strokeStyle,l.stroke()),l.fill())}l.globalAlpha=1}},o.bodyWireframes=function(e,t,n){var body,o,i,r,l,c=n,d=e.options.showInternalEdges;for(c.beginPath(),i=0;i<t.length;i++)if((body=t[i]).render.visible)for(l=body.parts.length>1?1:0;l<body.parts.length;l++){for(o=body.parts[l],c.moveTo(o.vertices[0].x,o.vertices[0].y),r=1;r<o.vertices.length;r++)!o.vertices[r-1].isInternal||d?c.lineTo(o.vertices[r].x,o.vertices[r].y):c.moveTo(o.vertices[r].x,o.vertices[r].y),o.vertices[r].isInternal&&!d&&c.moveTo(o.vertices[(r+1)%o.vertices.length].x,o.vertices[(r+1)%o.vertices.length].y);c.lineTo(o.vertices[0].x,o.vertices[0].y)}c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()},o.bodyConvexHulls=function(e,t,n){var body,i,o,r=n;for(r.beginPath(),i=0;i<t.length;i++)if((body=t[i]).render.visible&&1!==body.parts.length){for(r.moveTo(body.vertices[0].x,body.vertices[0].y),o=1;o<body.vertices.length;o++)r.lineTo(body.vertices[o].x,body.vertices[o].y);r.lineTo(body.vertices[0].x,body.vertices[0].y)}r.lineWidth=1,r.strokeStyle="rgba(255,255,255,0.2)",r.stroke()},o.vertexNumbers=function(e,t,n){var i,o,r,l=n;for(i=0;i<t.length;i++){var c=t[i].parts;for(r=c.length>1?1:0;r<c.length;r++){var d=c[r];for(o=0;o<d.vertices.length;o++)l.fillStyle="rgba(255,255,255,0.2)",l.fillText(i+"_"+o,d.position.x+.8*(d.vertices[o].x-d.position.x),d.position.y+.8*(d.vertices[o].y-d.position.y))}}},o.mousePosition=function(e,t,n){var o=n;o.fillStyle="rgba(255,255,255,0.8)",o.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},o.bodyBounds=function(e,t,n){var o=n,r=(e.engine,e.options);o.beginPath();for(var i=0;i<t.length;i++)if(t[i].render.visible)for(var l=t[i].parts,c=l.length>1?1:0;c<l.length;c++){var d=l[c];o.rect(d.bounds.min.x,d.bounds.min.y,d.bounds.max.x-d.bounds.min.x,d.bounds.max.y-d.bounds.min.y)}r.wireframes?o.strokeStyle="rgba(255,255,255,0.08)":o.strokeStyle="rgba(0,0,0,0.1)",o.lineWidth=1,o.stroke()},o.bodyAxes=function(e,t,n){var o,i,r,l,c=n,d=(e.engine,e.options);for(c.beginPath(),i=0;i<t.length;i++){var body=t[i],f=body.parts;if(body.render.visible)if(d.showAxes)for(r=f.length>1?1:0;r<f.length;r++)for(o=f[r],l=0;l<o.axes.length;l++){var h=o.axes[l];c.moveTo(o.position.x,o.position.y),c.lineTo(o.position.x+20*h.x,o.position.y+20*h.y)}else for(r=f.length>1?1:0;r<f.length;r++)for(o=f[r],l=0;l<o.axes.length;l++)c.moveTo(o.position.x,o.position.y),c.lineTo((o.vertices[0].x+o.vertices[o.vertices.length-1].x)/2,(o.vertices[0].y+o.vertices[o.vertices.length-1].y)/2)}d.wireframes?(c.strokeStyle="indianred",c.lineWidth=1):(c.strokeStyle="rgba(255, 255, 255, 0.4)",c.globalCompositeOperation="overlay",c.lineWidth=2),c.stroke(),c.globalCompositeOperation="source-over"},o.bodyPositions=function(e,t,n){var body,o,i,r,l=n,c=(e.engine,e.options);for(l.beginPath(),i=0;i<t.length;i++)if((body=t[i]).render.visible)for(r=0;r<body.parts.length;r++)o=body.parts[r],l.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),l.closePath();for(c.wireframes?l.fillStyle="indianred":l.fillStyle="rgba(0,0,0,0.5)",l.fill(),l.beginPath(),i=0;i<t.length;i++)(body=t[i]).render.visible&&(l.arc(body.positionPrev.x,body.positionPrev.y,2,0,2*Math.PI,!1),l.closePath());l.fillStyle="rgba(255,165,0,0.8)",l.fill()},o.bodyVelocity=function(e,t,n){var o=n;o.beginPath();for(var i=0;i<t.length;i++){var body=t[i];body.render.visible&&(o.moveTo(body.position.x,body.position.y),o.lineTo(body.position.x+2*(body.position.x-body.positionPrev.x),body.position.y+2*(body.position.y-body.positionPrev.y)))}o.lineWidth=3,o.strokeStyle="cornflowerblue",o.stroke()},o.bodyIds=function(e,t,n){var i,o,r=n;for(i=0;i<t.length;i++)if(t[i].render.visible){var l=t[i].parts;for(o=l.length>1?1:0;o<l.length;o++){var c=l[o];r.font="12px Arial",r.fillStyle="rgba(255,255,255,0.5)",r.fillText(c.id,c.position.x+10,c.position.y-10)}}},o.collisions=function(e,t,n){var o,r,i,l,c=n,d=e.options;for(c.beginPath(),i=0;i<t.length;i++)if((o=t[i]).isActive)for(r=o.collision,l=0;l<o.activeContacts.length;l++){var f=o.activeContacts[l].vertex;c.rect(f.x-1.5,f.y-1.5,3.5,3.5)}for(d.wireframes?c.fillStyle="rgba(255,255,255,0.7)":c.fillStyle="orange",c.fill(),c.beginPath(),i=0;i<t.length;i++)if((o=t[i]).isActive&&(r=o.collision,o.activeContacts.length>0)){var h=o.activeContacts[0].vertex.x,v=o.activeContacts[0].vertex.y;2===o.activeContacts.length&&(h=(o.activeContacts[0].vertex.x+o.activeContacts[1].vertex.x)/2,v=(o.activeContacts[0].vertex.y+o.activeContacts[1].vertex.y)/2),r.bodyB===r.supports[0].body||!0===r.bodyA.isStatic?c.moveTo(h-8*r.normal.x,v-8*r.normal.y):c.moveTo(h+8*r.normal.x,v+8*r.normal.y),c.lineTo(h,v)}d.wireframes?c.strokeStyle="rgba(255,165,0,0.7)":c.strokeStyle="orange",c.lineWidth=1,c.stroke()},o.separations=function(e,t,n){var o,r,l,c,i,d=n,f=e.options;for(d.beginPath(),i=0;i<t.length;i++)if((o=t[i]).isActive){l=(r=o.collision).bodyA;var h=1;(c=r.bodyB).isStatic||l.isStatic||(h=.5),c.isStatic&&(h=0),d.moveTo(c.position.x,c.position.y),d.lineTo(c.position.x-r.penetration.x*h,c.position.y-r.penetration.y*h),h=1,c.isStatic||l.isStatic||(h=.5),l.isStatic&&(h=0),d.moveTo(l.position.x,l.position.y),d.lineTo(l.position.x+r.penetration.x*h,l.position.y+r.penetration.y*h)}f.wireframes?d.strokeStyle="rgba(255,165,0,0.5)":d.strokeStyle="orange",d.stroke()},o.grid=function(e,t,n){var o=n;e.options.wireframes?o.strokeStyle="rgba(255,180,0,0.1)":o.strokeStyle="rgba(255,180,0,0.5)",o.beginPath();for(var l=r.keys(t.buckets),i=0;i<l.length;i++){var c=l[i];if(!(t.buckets[c].length<2)){var d=c.split(/C|R/);o.rect(.5+parseInt(d[1],10)*t.bucketWidth,.5+parseInt(d[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}o.lineWidth=1,o.stroke()},o.inspector=function(e,t){e.engine;var n,o=e.selected,r=e.render,l=r.options;if(l.hasBounds){var c=r.bounds.max.x-r.bounds.min.x,d=r.bounds.max.y-r.bounds.min.y,f=c/r.options.width,h=d/r.options.height;t.scale(1/f,1/h),t.translate(-r.bounds.min.x,-r.bounds.min.y)}for(var i=0;i<o.length;i++){var v=o[i].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),v.type){case"body":n=v.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var m=v.pointA;v.bodyA&&(m=v.pointB),t.beginPath(),t.arc(m.x,m.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),l.hasBounds&&t.setTransform(1,0,0,1,0,0)};var n=function(e,t){var canvas=document.createElement("canvas");return canvas.width=e,canvas.height=t,canvas.oncontextmenu=function(){return!1},canvas.onselectstart=function(){return!1},canvas},m=function(canvas){var e=canvas.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},y=function(e,t){var image=e.textures[t];return image||((image=e.textures[t]=new Image).src=t,image)},x=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},function(e,t,n){var o={};e.exports=o;var r=n(9),l=n(12),c=n(0);o.create=function(e){var t={controller:o,detector:l.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return c.extend(t,e)},o.update=function(e,t,n,r){var i,col,l,c,d,f=n.world,h=e.buckets,v=!1,m=n.metrics;for(m.broadphaseTests=0,i=0;i<t.length;i++){var body=t[i];if((!body.isSleeping||r)&&!(body.bounds.max.x<f.bounds.min.x||body.bounds.min.x>f.bounds.max.x||body.bounds.max.y<f.bounds.min.y||body.bounds.min.y>f.bounds.max.y)){var y=o._getRegion(e,body);if(!body.region||y.id!==body.region.id||r){m.broadphaseTests+=1,body.region&&!r||(body.region=y);var x=o._regionUnion(y,body.region);for(col=x.startCol;col<=x.endCol;col++)for(l=x.startRow;l<=x.endRow;l++){c=h[d=o._getBucketId(col,l)];var w=col>=y.startCol&&col<=y.endCol&&l>=y.startRow&&l<=y.endRow,S=col>=body.region.startCol&&col<=body.region.endCol&&l>=body.region.startRow&&l<=body.region.endRow;!w&&S&&S&&c&&o._bucketRemoveBody(e,c,body),(body.region===y||w&&!S||r)&&(c||(c=o._createBucket(h,d)),o._bucketAddBody(e,c,body))}body.region=y,v=!0}}}v&&(e.pairsList=o._createActivePairsList(e))},o.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},o._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),r=Math.max(e.endCol,t.endCol),l=Math.min(e.startRow,t.startRow),c=Math.max(e.endRow,t.endRow);return o._createRegion(n,r,l,c)},o._getRegion=function(e,body){var t=body.bounds,n=Math.floor(t.min.x/e.bucketWidth),r=Math.floor(t.max.x/e.bucketWidth),l=Math.floor(t.min.y/e.bucketHeight),c=Math.floor(t.max.y/e.bucketHeight);return o._createRegion(n,r,l,c)},o._createRegion=function(e,t,n,o){return{id:e+","+t+","+n+","+o,startCol:e,endCol:t,startRow:n,endRow:o}},o._getBucketId=function(e,t){return"C"+e+"R"+t},o._createBucket=function(e,t){return e[t]=[]},o._bucketAddBody=function(e,t,body){for(var i=0;i<t.length;i++){var n=t[i];if(!(body.id===n.id||body.isStatic&&n.isStatic)){var o=r.id(body,n),l=e.pairs[o];l?l[2]+=1:e.pairs[o]=[body,n,1]}}t.push(body)},o._bucketRemoveBody=function(e,t,body){t.splice(c.indexOf(t,body),1);for(var i=0;i<t.length;i++){var n=t[i],o=r.id(body,n),l=e.pairs[o];l&&(l[2]-=1)}},o._createActivePairsList=function(e){var t,n,o=[];t=c.keys(e.pairs);for(var r=0;r<t.length;r++)(n=e.pairs[t[r]])[2]>0?o.push(n):delete e.pairs[t[r]];return o}},function(e,t,n){var o={};e.exports=o;var r=n(13),l=n(9),c=n(1);o.collisions=function(e,t){for(var n=[],d=t.pairs.table,f=t.metrics,i=0;i<e.length;i++){var h=e[i][0],v=e[i][1];if((!h.isStatic&&!h.isSleeping||!v.isStatic&&!v.isSleeping)&&o.canCollide(h.collisionFilter,v.collisionFilter)&&(f.midphaseTests+=1,c.overlaps(h.bounds,v.bounds)))for(var m=h.parts.length>1?1:0;m<h.parts.length;m++)for(var y=h.parts[m],x=v.parts.length>1?1:0;x<v.parts.length;x++){var w=v.parts[x];if(y===h&&w===v||c.overlaps(y.bounds,w.bounds)){var S,P=d[l.id(y,w)];S=P&&P.isActive?P.collision:null;var M=r.collides(y,w,S);f.narrowphaseTests+=1,M.reused&&(f.narrowReuseCount+=1),M.collided&&(n.push(M),f.narrowDetections+=1)}}}return n},o.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},function(e,t,n){var o={};e.exports=o;var r=n(3),l=n(2);o.collides=function(e,t,n){var c,d,f,h,v=!1;if(n){var m=e.parent,y=t.parent,x=m.speed*m.speed+m.angularSpeed*m.angularSpeed+y.speed*y.speed+y.angularSpeed*y.angularSpeed;v=n&&n.collided&&x<.2,h=n}else h={collided:!1,bodyA:e,bodyB:t};if(n&&v){var w=h.axisBody,S=w===e?t:e,P=[w.axes[n.axisNumber]];if(f=o._overlapAxes(w.vertices,S.vertices,P),h.reused=!0,f.overlap<=0)return h.collided=!1,h}else{if((c=o._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return h.collided=!1,h;if((d=o._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return h.collided=!1,h;c.overlap<d.overlap?(f=c,h.axisBody=e):(f=d,h.axisBody=t),h.axisNumber=f.axisNumber}h.bodyA=e.id<t.id?e:t,h.bodyB=e.id<t.id?t:e,h.collided=!0,h.depth=f.overlap,h.parentA=h.bodyA.parent,h.parentB=h.bodyB.parent,e=h.bodyA,t=h.bodyB,l.dot(f.axis,l.sub(t.position,e.position))<0?h.normal={x:f.axis.x,y:f.axis.y}:h.normal={x:-f.axis.x,y:-f.axis.y},h.tangent=l.perp(h.normal),h.penetration=h.penetration||{},h.penetration.x=h.normal.x*h.depth,h.penetration.y=h.normal.y*h.depth;var M=o._findSupports(e,t,h.normal),A=[];if(r.contains(e.vertices,M[0])&&A.push(M[0]),r.contains(e.vertices,M[1])&&A.push(M[1]),A.length<2){var I=o._findSupports(t,e,l.neg(h.normal));r.contains(t.vertices,I[0])&&A.push(I[0]),A.length<2&&r.contains(t.vertices,I[1])&&A.push(I[1])}return A.length<1&&(A=[M[0]]),h.supports=A,h},o._overlapAxes=function(e,t,n){for(var r,c,d=l._temp[0],f=l._temp[1],h={overlap:Number.MAX_VALUE},i=0;i<n.length;i++){if(c=n[i],o._projectToAxis(d,e,c),o._projectToAxis(f,t,c),(r=Math.min(d.max-f.min,f.max-d.min))<=0)return h.overlap=r,h;r<h.overlap&&(h.overlap=r,h.axis=c,h.axisNumber=i)}return h},o._projectToAxis=function(e,t,n){for(var o=l.dot(t[0],n),r=o,i=1;i<t.length;i+=1){var c=l.dot(t[i],n);c>r?r=c:c<o&&(o=c)}e.min=o,e.max=r},o._findSupports=function(e,t,n){for(var o,r,c,d,f=Number.MAX_VALUE,h=l._temp[0],v=t.vertices,m=e.position,i=0;i<v.length;i++)r=v[i],h.x=r.x-m.x,h.y=r.y-m.y,(o=-l.dot(n,h))<f&&(f=o,c=r);return r=v[c.index-1>=0?c.index-1:v.length-1],h.x=r.x-m.x,h.y=r.y-m.y,f=-l.dot(n,h),d=r,r=v[(c.index+1)%v.length],h.x=r.x-m.x,h.y=r.y-m.y,(o=-l.dot(n,h))<f&&(d=r),[c,d]}},function(e,t,n){var o={};e.exports=o;var r=n(0);o.create=function(element){var e={};return element||r.log("Mouse.create: element was undefined, defaulting to document.body","warn"),e.element=element||document.body,e.absolute={x:0,y:0},e.position={x:0,y:0},e.mousedownPosition={x:0,y:0},e.mouseupPosition={x:0,y:0},e.offset={x:0,y:0},e.scale={x:1,y:1},e.wheelDelta=0,e.button=-1,e.pixelRatio=parseInt(e.element.getAttribute("data-pixel-ratio"),10)||1,e.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},e.mousemove=function(t){var n=o._getRelativeMousePosition(t,e.element,e.pixelRatio);t.changedTouches&&(e.button=0,t.preventDefault()),e.absolute.x=n.x,e.absolute.y=n.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y,e.sourceEvents.mousemove=t},e.mousedown=function(t){var n=o._getRelativeMousePosition(t,e.element,e.pixelRatio);t.changedTouches?(e.button=0,t.preventDefault()):e.button=t.button,e.absolute.x=n.x,e.absolute.y=n.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y,e.mousedownPosition.x=e.position.x,e.mousedownPosition.y=e.position.y,e.sourceEvents.mousedown=t},e.mouseup=function(t){var n=o._getRelativeMousePosition(t,e.element,e.pixelRatio);t.changedTouches&&t.preventDefault(),e.button=-1,e.absolute.x=n.x,e.absolute.y=n.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y,e.mouseupPosition.x=e.position.x,e.mouseupPosition.y=e.position.y,e.sourceEvents.mouseup=t},e.mousewheel=function(t){e.wheelDelta=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),t.preventDefault()},o.setElement(e,e.element),e},o.setElement=function(e,element){e.element=element,element.addEventListener("mousemove",e.mousemove),element.addEventListener("mousedown",e.mousedown),element.addEventListener("mouseup",e.mouseup),element.addEventListener("mousewheel",e.mousewheel),element.addEventListener("DOMMouseScroll",e.mousewheel),element.addEventListener("touchmove",e.mousemove),element.addEventListener("touchstart",e.mousedown),element.addEventListener("touchend",e.mouseup)},o.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},o.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},o.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},o._getRelativeMousePosition=function(e,element,t){var n,o,r=element.getBoundingClientRect(),l=document.documentElement||document.body.parentNode||document.body,c=void 0!==window.pageXOffset?window.pageXOffset:l.scrollLeft,d=void 0!==window.pageYOffset?window.pageYOffset:l.scrollTop,f=e.changedTouches;return f?(n=f[0].pageX-r.left-c,o=f[0].pageY-r.top-d):(n=e.pageX-r.left-c,o=e.pageY-r.top-d),{x:n/(element.clientWidth/(element.width||element.clientWidth)*t),y:o/(element.clientHeight/(element.height||element.clientHeight)*t)}}},function(e,t,n){var o={};e.exports=o;var r=n(2),l=n(0);o.fromVertices=function(e){for(var t={},i=0;i<e.length;i++){var n=(i+1)%e.length,o=r.normalise({x:e[n].y-e[i].y,y:e[i].x-e[n].x}),c=0===o.y?1/0:o.x/o.y;t[c=c.toFixed(3).toString()]=o}return l.values(t)},o.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),o=Math.sin(t),i=0;i<e.length;i++){var r,l=e[i];r=l.x*n-l.y*o,l.y=l.x*o+l.y*n,l.x=r}}},function(e,t,n){var o={};e.exports=o;var r=n(3),l=n(0),c=n(6),d=n(1),f=n(2);o._decompWarned=!1,o.rectangle=function(e,t,n,o,d){d=d||{};var f={label:"Rectangle Body",position:{x:e,y:t},vertices:r.fromPath("L 0 0 L "+n+" 0 L "+n+" "+o+" L 0 "+o)};if(d.chamfer){var h=d.chamfer;f.vertices=r.chamfer(f.vertices,h.radius,h.quality,h.qualityMin,h.qualityMax),delete d.chamfer}return c.create(l.extend({},f,d))},o.trapezoid=function(e,t,n,o,d,f){f=f||{};var h,v=n*(d*=.5),m=v+(1-2*d)*n,y=m+v;h=d<.5?"L 0 0 L "+v+" "+-o+" L "+m+" "+-o+" L "+y+" 0":"L 0 0 L "+m+" "+-o+" L "+y+" 0";var x={label:"Trapezoid Body",position:{x:e,y:t},vertices:r.fromPath(h)};if(f.chamfer){var w=f.chamfer;x.vertices=r.chamfer(x.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete f.chamfer}return c.create(l.extend({},x,f))},o.circle=function(e,t,n,r,c){r=r||{};var circle={label:"Circle Body",circleRadius:n};c=c||25;var d=Math.ceil(Math.max(10,Math.min(c,n)));return d%2==1&&(d+=1),o.polygon(e,t,d,n,l.extend({},circle,r))},o.polygon=function(e,t,n,d,f){if(f=f||{},n<3)return o.circle(e,t,d,f);for(var h=2*Math.PI/n,path="",v=.5*h,i=0;i<n;i+=1){var m=v+i*h,y=Math.cos(m)*d,x=Math.sin(m)*d;path+="L "+y.toFixed(3)+" "+x.toFixed(3)+" "}var polygon={label:"Polygon Body",position:{x:e,y:t},vertices:r.fromPath(path)};if(f.chamfer){var w=f.chamfer;polygon.vertices=r.chamfer(polygon.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete f.chamfer}return c.create(l.extend({},polygon,f))},o.fromVertices=function(e,t,h,v,m,y,x,w){var S,P,body,M,A,I,i,C,k,T,B;try{S=n(27)}catch(e){S=null}for(P=Boolean(S&&S.quickDecomp),v=v||{},M=[],m=void 0!==m&&m,y=void 0!==y?y:.01,x=void 0!==x?x:10,w=void 0!==w?w:.01,l.isArray(h[0])||(h=[h]),T=0;T<h.length;T+=1)if(I=h[T],!!(A=r.isConvex(I))||P||o._decompWarned||(l.warn("Could not resolve the expected 'poly-decomp' package for concave vertices in 'Bodies.fromVertices'"),l.warn("Try 'npm install poly-decomp --save' or as a global e.g. 'window.decomp'"),o._decompWarned=!0),A||!P)I=A?r.clockwiseSort(I):r.hull(I),M.push({position:{x:e,y:t},vertices:I});else{var _=I.map((function(e){return[e.x,e.y]}));S.makeCCW(_),!1!==y&&S.removeCollinearPoints(_,y),!1!==w&&S.removeDuplicatePoints&&S.removeDuplicatePoints(_,w);var E=S.quickDecomp(_);for(i=0;i<E.length;i++){var R=E[i].map((function(e){return{x:e[0],y:e[1]}}));x>0&&r.area(R)<x||M.push({position:r.centre(R),vertices:R})}}for(i=0;i<M.length;i++)M[i]=c.create(l.extend(M[i],v));if(m)for(i=0;i<M.length;i++){var W=M[i];for(C=i+1;C<M.length;C++){var O=M[C];if(d.overlaps(W.bounds,O.bounds)){var Z=W.vertices,j=O.vertices;for(k=0;k<W.vertices.length;k++)for(B=0;B<O.vertices.length;B++){var F=f.magnitudeSquared(f.sub(Z[(k+1)%Z.length],j[B])),X=f.magnitudeSquared(f.sub(Z[k],j[(B+1)%j.length]));F<5&&X<5&&(Z[k].isInternal=!0,j[B].isInternal=!0)}}}}return M.length>1?(body=c.create(l.extend({parts:M.slice(0)},v)),c.setPosition(body,{x:e,y:t}),body):M[0]}},function(e,t,n){var o={};e.exports=o;var r=n(0);o._registry={},o.register=function(e){if(o.isPlugin(e)||r.warn("Plugin.register:",o.toString(e),"does not implement all required fields."),e.name in o._registry){var t=o._registry[e.name],n=o.versionParse(e.version).number,l=o.versionParse(t.version).number;n>l?(r.warn("Plugin.register:",o.toString(t),"was upgraded to",o.toString(e)),o._registry[e.name]=e):n<l?r.warn("Plugin.register:",o.toString(t),"can not be downgraded to",o.toString(e)):e!==t&&r.warn("Plugin.register:",o.toString(e),"is already registered to different plugin object")}else o._registry[e.name]=e;return e},o.resolve=function(e){return o._registry[o.dependencyParse(e).name]},o.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},o.isPlugin=function(e){return e&&e.name&&e.version&&e.install},o.isUsed=function(e,t){return e.used.indexOf(t)>-1},o.isFor=function(e,t){var n=e.for&&o.dependencyParse(e.for);return!e.for||t.name===n.name&&o.versionSatisfies(t.version,n.range)},o.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var n=o.dependencies(e),l=r.topologicalSort(n),c=[],i=0;i<l.length;i+=1)if(l[i]!==e.name){var d=o.resolve(l[i]);d?o.isUsed(e,d.name)||(o.isFor(d,e)||(r.warn("Plugin.use:",o.toString(d),"is for",d.for,"but installed on",o.toString(e)+"."),d._warned=!0),d.install?d.install(e):(r.warn("Plugin.use:",o.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(c.push("🔶 "+o.toString(d)),delete d._warned):c.push("✅ "+o.toString(d)),e.used.push(d.name)):c.push("❌ "+l[i])}c.length>0&&r.info(c.join("  "))}else r.warn("Plugin.use:",o.toString(e),"does not specify any dependencies to install.")},o.dependencies=function(e,t){var n=o.dependencyParse(e),l=n.name;if(!(l in(t=t||{}))){e=o.resolve(e)||e,t[l]=r.map(e.uses||[],(function(t){o.isPlugin(t)&&o.register(t);var l=o.dependencyParse(t),c=o.resolve(t);return c&&!o.versionSatisfies(c.version,l.range)?(r.warn("Plugin.dependencies:",o.toString(c),"does not satisfy",o.toString(l),"used by",o.toString(n)+"."),c._warned=!0,e._warned=!0):c||(r.warn("Plugin.dependencies:",o.toString(t),"used by",o.toString(n),"could not be resolved."),e._warned=!0),l.name}));for(var i=0;i<t[l].length;i+=1)o.dependencies(t[l][i],t);return t}},o.dependencyParse=function(e){return r.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||r.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},o.versionParse=function(e){var pattern=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-]+)?$/;pattern.test(e)||r.warn("Plugin.versionParse:",e,"is not a valid version or range.");var t=pattern.exec(e),n=Number(t[4]),o=Number(t[5]),l=Number(t[6]);return{isRange:Boolean(t[1]||t[2]),version:t[3],range:e,operator:t[1]||t[2]||"",major:n,minor:o,patch:l,parts:[n,o,l],prerelease:t[7],number:1e8*n+1e4*o+l}},o.versionSatisfies=function(e,t){t=t||"*";var n=o.versionParse(t),r=o.versionParse(e);if(n.isRange){if("*"===n.operator||"*"===e)return!0;if(">"===n.operator)return r.number>n.number;if(">="===n.operator)return r.number>=n.number;if("~"===n.operator)return r.major===n.major&&r.minor===n.minor&&r.patch>=n.patch;if("^"===n.operator)return n.major>0?r.major===n.major&&r.number>=n.number:n.minor>0?r.minor===n.minor&&r.patch>=n.patch:r.patch===n.patch}return e===t||"*"===e}},function(e,t){var n={};e.exports=n,n.create=function(e){return{id:n.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},n.id=function(e){return e.body.id+"_"+e.index}},function(e,t,n){var o={};e.exports=o;var r=n(5),l=(n(8),n(0));o.create=function(e){var t=r.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return l.extend(t,n,e)}},function(e,t,n){var o={};e.exports=o;var r=n(9),l=n(0);o._pairMaxIdleLife=1e3,o.create=function(e){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},o.update=function(e,t,n){var o,l,c,i,d=e.list,f=e.table,h=e.collisionStart,v=e.collisionEnd,m=e.collisionActive;for(h.length=0,v.length=0,m.length=0,i=0;i<d.length;i++)d[i].confirmedActive=!1;for(i=0;i<t.length;i++)(o=t[i]).collided&&((c=f[l=r.id(o.bodyA,o.bodyB)])?(c.isActive?m.push(c):h.push(c),r.update(c,o,n),c.confirmedActive=!0):(c=r.create(o,n),f[l]=c,h.push(c),d.push(c)));for(i=0;i<d.length;i++)(c=d[i]).isActive&&!c.confirmedActive&&(r.setActive(c,!1,n),v.push(c))},o.removeOld=function(e,t){var n,r,l,i,c=e.list,d=e.table,f=[];for(i=0;i<c.length;i++)(r=(n=c[i]).collision).bodyA.isSleeping||r.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>o._pairMaxIdleLife&&f.push(i);for(i=0;i<f.length;i++)delete d[(n=c[l=f[i]-i]).id],c.splice(l,1)},o.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},function(e,t,n){var o={};e.exports=o;var r=n(3),l=n(2),c=n(0),d=n(1);o._restingThresh=4,o._restingThreshTangent=6,o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o.preSolvePosition=function(e){var i,t,n;for(i=0;i<e.length;i++)(t=e[i]).isActive&&(n=t.activeContacts.length,t.collision.parentA.totalContacts+=n,t.collision.parentB.totalContacts+=n)},o.solvePosition=function(e,t){var i,n,r,c,d,f,h,v,m,y=l._temp[0],x=l._temp[1],w=l._temp[2],S=l._temp[3];for(i=0;i<e.length;i++)(n=e[i]).isActive&&!n.isSensor&&(c=(r=n.collision).parentA,d=r.parentB,f=r.normal,h=l.sub(l.add(d.positionImpulse,d.position,y),l.add(c.positionImpulse,l.sub(d.position,r.penetration,x),w),S),n.separation=l.dot(f,h));for(i=0;i<e.length;i++)(n=e[i]).isActive&&!n.isSensor&&(c=(r=n.collision).parentA,d=r.parentB,f=r.normal,m=(n.separation-n.slop)*t,(c.isStatic||d.isStatic)&&(m*=2),c.isStatic||c.isSleeping||(v=o._positionDampen/c.totalContacts,c.positionImpulse.x+=f.x*m*v,c.positionImpulse.y+=f.y*m*v),d.isStatic||d.isSleeping||(v=o._positionDampen/d.totalContacts,d.positionImpulse.x-=f.x*m*v,d.positionImpulse.y-=f.y*m*v))},o.postSolvePosition=function(e){for(var i=0;i<e.length;i++){var body=e[i];if(body.totalContacts=0,0!==body.positionImpulse.x||0!==body.positionImpulse.y){for(var t=0;t<body.parts.length;t++){var n=body.parts[t];r.translate(n.vertices,body.positionImpulse),d.update(n.bounds,n.vertices,body.velocity),n.position.x+=body.positionImpulse.x,n.position.y+=body.positionImpulse.y}body.positionPrev.x+=body.positionImpulse.x,body.positionPrev.y+=body.positionImpulse.y,l.dot(body.positionImpulse,body.velocity)<0?(body.positionImpulse.x=0,body.positionImpulse.y=0):(body.positionImpulse.x*=o._positionWarming,body.positionImpulse.y*=o._positionWarming)}}},o.preSolveVelocity=function(e){var i,t,n,o,r,c,d,f,h,v,m,y,x,w,S=l._temp[0],P=l._temp[1];for(i=0;i<e.length;i++)if((n=e[i]).isActive&&!n.isSensor)for(o=n.activeContacts,c=(r=n.collision).parentA,d=r.parentB,f=r.normal,h=r.tangent,t=0;t<o.length;t++)m=(v=o[t]).vertex,y=v.normalImpulse,x=v.tangentImpulse,0===y&&0===x||(S.x=f.x*y+h.x*x,S.y=f.y*y+h.y*x,c.isStatic||c.isSleeping||(w=l.sub(m,c.position,P),c.positionPrev.x+=S.x*c.inverseMass,c.positionPrev.y+=S.y*c.inverseMass,c.anglePrev+=l.cross(w,S)*c.inverseInertia),d.isStatic||d.isSleeping||(w=l.sub(m,d.position,P),d.positionPrev.x-=S.x*d.inverseMass,d.positionPrev.y-=S.y*d.inverseMass,d.anglePrev-=l.cross(w,S)*d.inverseInertia))},o.solveVelocity=function(e,t){for(var n=t*t,r=l._temp[0],d=l._temp[1],f=l._temp[2],h=l._temp[3],v=l._temp[4],m=l._temp[5],i=0;i<e.length;i++){var y=e[i];if(y.isActive&&!y.isSensor){var x=y.collision,w=x.parentA,S=x.parentB,P=x.normal,M=x.tangent,A=y.activeContacts,I=1/A.length;w.velocity.x=w.position.x-w.positionPrev.x,w.velocity.y=w.position.y-w.positionPrev.y,S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,w.angularVelocity=w.angle-w.anglePrev,S.angularVelocity=S.angle-S.anglePrev;for(var C=0;C<A.length;C++){var k=A[C],T=k.vertex,B=l.sub(T,w.position,d),_=l.sub(T,S.position,f),E=l.add(w.velocity,l.mult(l.perp(B),w.angularVelocity),h),R=l.add(S.velocity,l.mult(l.perp(_),S.angularVelocity),v),W=l.sub(E,R,m),O=l.dot(P,W),Z=l.dot(M,W),j=Math.abs(Z),F=c.sign(Z),X=(1+y.restitution)*O,L=c.clamp(y.separation+O,0,1)*o._frictionNormalMultiplier,Y=Z,z=1/0;j>y.friction*y.frictionStatic*L*n&&(z=j,Y=c.clamp(y.friction*F*n,-z,z));var D=l.cross(B,P),V=l.cross(_,P),G=I/(w.inverseMass+S.inverseMass+w.inverseInertia*D*D+S.inverseInertia*V*V);if(X*=G,Y*=G,O<0&&O*O>o._restingThresh*n)k.normalImpulse=0;else{var N=k.normalImpulse;k.normalImpulse=Math.min(k.normalImpulse+X,0),X=k.normalImpulse-N}if(Z*Z>o._restingThreshTangent*n)k.tangentImpulse=0;else{var Q=k.tangentImpulse;k.tangentImpulse=c.clamp(k.tangentImpulse+Y,-z,z),Y=k.tangentImpulse-Q}r.x=P.x*X+M.x*Y,r.y=P.y*X+M.y*Y,w.isStatic||w.isSleeping||(w.positionPrev.x+=r.x*w.inverseMass,w.positionPrev.y+=r.y*w.inverseMass,w.anglePrev+=l.cross(B,r)*w.inverseInertia),S.isStatic||S.isSleeping||(S.positionPrev.x-=r.x*S.inverseMass,S.positionPrev.y-=r.y*S.inverseMass,S.anglePrev-=l.cross(_,r)*S.inverseInertia)}}}}},function(e,t,n){var o={};e.exports=o;var r=n(19),l=n(7),c=n(21),d=n(10),f=n(20),h=n(23),v=n(11),m=n(4),y=n(5),x=n(8),w=n(0),S=n(6);o.create=function(element,e){e=(e=w.isElement(element)?e:element)||{},((element=w.isElement(element)?element:null)||e.render)&&w.warn("Engine.create: engine.render is deprecated (see docs)");var t={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:v}},n=w.extend(t,e);if(element||n.render){var o={element:element,controller:d};n.render=w.extend(o,n.render)}return n.render&&n.render.controller&&(n.render=n.render.controller.create(n.render)),n.render&&(n.render.engine=n),n.world=e.world||r.create(n.world),n.pairs=f.create(),n.broadphase=n.broadphase.controller.create(n.broadphase),n.metrics=n.metrics||{extended:!1},n.metrics=h.create(n.metrics),n},o.update=function(e,t,n){t=t||1e3/60,n=n||1;var i,r=e.world,d=e.timing,v=e.broadphase,w=[];d.timestamp+=t*d.timeScale;var S={timestamp:d.timestamp};m.trigger(e,"beforeUpdate",S);var P=y.allBodies(r),M=y.allConstraints(r);for(h.reset(e.metrics),e.enableSleeping&&l.update(P,d.timeScale),o._bodiesApplyGravity(P,r.gravity),o._bodiesUpdate(P,t,d.timeScale,n,r.bounds),x.preSolveAll(P),i=0;i<e.constraintIterations;i++)x.solveAll(M,d.timeScale);x.postSolveAll(P),v.controller?(r.isModified&&v.controller.clear(v),v.controller.update(v,P,e,r.isModified),w=v.pairsList):w=P,r.isModified&&y.setModified(r,!1,!1,!0);var A=v.detector(w,e),I=e.pairs,C=d.timestamp;for(f.update(I,A,C),f.removeOld(I,C),e.enableSleeping&&l.afterCollisions(I.list,d.timeScale),I.collisionStart.length>0&&m.trigger(e,"collisionStart",{pairs:I.collisionStart}),c.preSolvePosition(I.list),i=0;i<e.positionIterations;i++)c.solvePosition(I.list,d.timeScale);for(c.postSolvePosition(P),x.preSolveAll(P),i=0;i<e.constraintIterations;i++)x.solveAll(M,d.timeScale);for(x.postSolveAll(P),c.preSolveVelocity(I.list),i=0;i<e.velocityIterations;i++)c.solveVelocity(I.list,d.timeScale);return I.collisionActive.length>0&&m.trigger(e,"collisionActive",{pairs:I.collisionActive}),I.collisionEnd.length>0&&m.trigger(e,"collisionEnd",{pairs:I.collisionEnd}),h.update(e.metrics,e),o._bodiesClearForces(P),m.trigger(e,"afterUpdate",S),e},o.merge=function(e,t){if(w.extend(e,t),t.world){e.world=t.world,o.clear(e);for(var n=y.allBodies(e.world),i=0;i<n.length;i++){var body=n[i];l.set(body,!1),body.id=w.nextId()}}},o.clear=function(e){var t=e.world;f.clear(e.pairs);var n=e.broadphase;if(n.controller){var o=y.allBodies(t);n.controller.clear(n),n.controller.update(n,o,e,!0)}},o._bodiesClearForces=function(e){for(var i=0;i<e.length;i++){var body=e[i];body.force.x=0,body.force.y=0,body.torque=0}},o._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var i=0;i<e.length;i++){var body=e[i];body.isStatic||body.isSleeping||(body.force.y+=body.mass*t.y*n,body.force.x+=body.mass*t.x*n)}},o._bodiesUpdate=function(e,t,n,o,r){for(var i=0;i<e.length;i++){var body=e[i];body.isStatic||body.isSleeping||S.update(body,t,n,o)}}},function(e,t,n){var o={};e.exports=o;var r=n(5),l=n(0);o.create=function(e){return l.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,e)},o.reset=function(e){e.extended&&(e.narrowDetections=0,e.narrowphaseTests=0,e.narrowReuse=0,e.narrowReuseCount=0,e.midphaseTests=0,e.broadphaseTests=0,e.narrowEff=0,e.midEff=0,e.broadEff=0,e.collisions=0,e.buckets=0,e.pairs=0,e.bodies=0)},o.update=function(e,t){if(e.extended){var n=t.world,o=r.allBodies(n);e.collisions=e.narrowDetections,e.pairs=t.pairs.list.length,e.bodies=o.length,e.midEff=(e.narrowDetections/(e.midphaseTests||1)).toFixed(2),e.narrowEff=(e.narrowDetections/(e.narrowphaseTests||1)).toFixed(2),e.broadEff=(1-e.broadphaseTests/(o.length||1)).toFixed(2),e.narrowReuse=(e.narrowReuseCount/(e.narrowphaseTests||1)).toFixed(2)}}},function(e,t,n){var o=e.exports=n(25);o.Body=n(6),o.Composite=n(5),o.World=n(19),o.Contact=n(18),o.Detector=n(12),o.Grid=n(11),o.Pairs=n(20),o.Pair=n(9),o.Query=n(26),o.Resolver=n(21),o.SAT=n(13),o.Constraint=n(8),o.MouseConstraint=n(28),o.Common=n(0),o.Engine=n(22),o.Events=n(4),o.Mouse=n(14),o.Runner=n(29),o.Sleeping=n(7),o.Plugin=n(17),o.Metrics=n(23),o.Bodies=n(16),o.Composites=n(30),o.Axes=n(15),o.Bounds=n(1),o.Svg=n(31),o.Vector=n(2),o.Vertices=n(3),o.Render=n(10),o.RenderPixi=n(32),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,o.Engine.run=o.Runner.run},function(e,t,n){var o={};e.exports=o;var r=n(17),l=n(0);o.name="matter-js",o.version="0.16.1",o.uses=[],o.used=[],o.use=function(){r.use(o,Array.prototype.slice.call(arguments))},o.before=function(path,e){return path=path.replace(/^Matter./,""),l.chainPathBefore(o,path,e)},o.after=function(path,e){return path=path.replace(/^Matter./,""),l.chainPathAfter(o,path,e)}},function(e,t,n){var o={};e.exports=o;var r=n(2),l=n(13),c=n(1),d=n(16),f=n(3);o.collides=function(body,e){for(var t=[],i=0;i<e.length;i++){var n=e[i];if(c.overlaps(n.bounds,body.bounds))for(var o=1===n.parts.length?0:1;o<n.parts.length;o++){var r=n.parts[o];if(c.overlaps(r.bounds,body.bounds)){var d=l.collides(r,body);if(d.collided){t.push(d);break}}}}return t},o.ray=function(e,t,n,l){l=l||1e-100;for(var c=r.angle(t,n),f=r.magnitude(r.sub(t,n)),h=.5*(n.x+t.x),v=.5*(n.y+t.y),m=d.rectangle(h,v,f,l,{angle:c}),y=o.collides(m,e),i=0;i<y.length;i+=1){var x=y[i];x.body=x.bodyB=x.bodyA}return y},o.region=function(e,t,n){for(var o=[],i=0;i<e.length;i++){var body=e[i],r=c.overlaps(body.bounds,t);(r&&!n||!r&&n)&&o.push(body)}return o},o.point=function(e,t){for(var n=[],i=0;i<e.length;i++){var body=e[i];if(c.contains(body.bounds,t))for(var o=1===body.parts.length?0:1;o<body.parts.length;o++){var r=body.parts[o];if(c.contains(r.bounds,t)&&f.contains(r.vertices,t)){n.push(body);break}}}return n}},function(t,n){if(void 0===e){var o=new Error("Cannot find module 'undefined'");throw o.code="MODULE_NOT_FOUND",o}t.exports=e},function(e,t,n){var o={};e.exports=o;var r=n(3),l=n(7),c=n(14),d=n(4),f=n(12),h=n(8),v=n(5),m=n(0),y=n(1);o.create=function(e,t){var n=(e?e.mouse:null)||(t?t.mouse:null);n||(e&&e.render&&e.render.canvas?n=c.create(e.render.canvas):t&&t.element?n=c.create(t.element):(n=c.create(),m.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var r={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:h.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},l=m.extend(r,t);return d.on(e,"beforeUpdate",(function(){var t=v.allBodies(e.world);o.update(l,t),o._triggerEvents(l)})),l},o.update=function(e,t){var n=e.mouse,o=e.constraint,body=e.body;if(0===n.button){if(o.bodyB)l.set(o.bodyB,!1),o.pointA=n.position;else for(var i=0;i<t.length;i++)if(body=t[i],y.contains(body.bounds,n.position)&&f.canCollide(body.collisionFilter,e.collisionFilter))for(var c=body.parts.length>1?1:0;c<body.parts.length;c++){var h=body.parts[c];if(r.contains(h.vertices,n.position)){o.pointA=n.position,o.bodyB=e.body=body,o.pointB={x:n.position.x-body.position.x,y:n.position.y-body.position.y},o.angleB=body.angle,l.set(body,!1),d.trigger(e,"startdrag",{mouse:n,body:body});break}}}else o.bodyB=e.body=null,o.pointB=null,body&&d.trigger(e,"enddrag",{mouse:n,body:body})},o._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&d.trigger(e,"mousemove",{mouse:t}),n.mousedown&&d.trigger(e,"mousedown",{mouse:t}),n.mouseup&&d.trigger(e,"mouseup",{mouse:t}),c.clearSourceEvents(t)}},function(e,t,n){var o={};e.exports=o;var r,l,c,d=n(4),f=n(22),h=n(0);"undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r||(r=function(e){c=setTimeout((function(){e(h.now())}),1e3/60)},l=function(){clearTimeout(c)}),o.create=function(e){var t=h.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},o.run=function(e,t){return void 0!==e.positionIterations&&(t=e,e=o.create()),function n(time){e.frameRequestId=r(n),time&&e.enabled&&o.tick(e,t,time)}(),e},o.tick=function(e,t,time){var n,o=t.timing,r=1,l={timestamp:o.timestamp};d.trigger(e,"beforeTick",l),d.trigger(t,"beforeTick",l),e.isFixed?n=e.delta:(n=time-e.timePrev||e.delta,e.timePrev=time,e.deltaHistory.push(n),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),r=(n=(n=(n=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:n)>e.deltaMax?e.deltaMax:n)/e.delta,e.delta=n),0!==e.timeScalePrev&&(r*=o.timeScale/e.timeScalePrev),0===o.timeScale&&(r=0),e.timeScalePrev=o.timeScale,e.correction=r,e.frameCounter+=1,time-e.counterTimestamp>=1e3&&(e.fps=e.frameCounter*((time-e.counterTimestamp)/1e3),e.counterTimestamp=time,e.frameCounter=0),d.trigger(e,"tick",l),d.trigger(t,"tick",l),t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render),d.trigger(e,"beforeUpdate",l),f.update(t,n,r),d.trigger(e,"afterUpdate",l),t.render&&t.render.controller&&(d.trigger(e,"beforeRender",l),d.trigger(t,"beforeRender",l),t.render.controller.world(t.render),d.trigger(e,"afterRender",l),d.trigger(t,"afterRender",l)),d.trigger(e,"afterTick",l),d.trigger(t,"afterTick",l)},o.stop=function(e){l(e.frameRequestId)},o.start=function(e,t){o.run(e,t)}},function(e,t,n){var o={};e.exports=o;var r=n(5),l=n(8),c=n(0),d=n(6),f=n(16);o.stack=function(e,t,n,o,l,c,f){for(var h,v=r.create({label:"Stack"}),m=e,y=t,i=0,x=0;x<o;x++){for(var w=0,S=0;S<n;S++){var body=f(m,y,S,x,h,i);if(body){var P=body.bounds.max.y-body.bounds.min.y,M=body.bounds.max.x-body.bounds.min.x;P>w&&(w=P),d.translate(body,{x:.5*M,y:.5*P}),m=body.bounds.max.x+l,r.addBody(v,body),h=body,i+=1}else m+=l}y+=w+c,m=e}return v},o.chain=function(e,t,n,o,d,f){for(var h=e.bodies,i=1;i<h.length;i++){var v=h[i-1],m=h[i],y=v.bounds.max.y-v.bounds.min.y,x=v.bounds.max.x-v.bounds.min.x,w=m.bounds.max.y-m.bounds.min.y,S={bodyA:v,pointA:{x:x*t,y:y*n},bodyB:m,pointB:{x:(m.bounds.max.x-m.bounds.min.x)*o,y:w*d}},P=c.extend(S,f);r.addConstraint(e,l.create(P))}return e.label+=" Chain",e},o.mesh=function(e,t,n,o,d){var f,col,h,v,m,y=e.bodies;for(f=0;f<n;f++){for(col=1;col<t;col++)h=y[col-1+f*t],v=y[col+f*t],r.addConstraint(e,l.create(c.extend({bodyA:h,bodyB:v},d)));if(f>0)for(col=0;col<t;col++)h=y[col+(f-1)*t],v=y[col+f*t],r.addConstraint(e,l.create(c.extend({bodyA:h,bodyB:v},d))),o&&col>0&&(m=y[col-1+(f-1)*t],r.addConstraint(e,l.create(c.extend({bodyA:m,bodyB:v},d)))),o&&col<t-1&&(m=y[col+1+(f-1)*t],r.addConstraint(e,l.create(c.extend({bodyA:m,bodyB:v},d))))}return e.label+=" Mesh",e},o.pyramid=function(e,t,n,r,l,c,f){return o.stack(e,t,n,r,l,c,(function(t,o,c,h,v,i){var m=Math.min(r,Math.ceil(n/2)),y=v?v.bounds.max.x-v.bounds.min.x:0;if(!(h>m||c<(h=m-h)||c>n-1-h))return 1===i&&d.translate(v,{x:(c+(n%2==1?1:-1))*y,y:0}),f(e+(v?c*y:0)+c*l,o,c,h,v,i)}))},o.newtonsCradle=function(e,t,n,o,c){for(var d=r.create({label:"Newtons Cradle"}),i=0;i<n;i++){var circle=f.circle(e+i*(1.9*o),t+c,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),h=l.create({pointA:{x:e+i*(1.9*o),y:t},bodyB:circle});r.addBody(d,circle),r.addConstraint(d,h)}return d},o.car=function(e,t,n,o,c){var h=d.nextGroup(!0),v=.5*-n+20,m=.5*n-20,y=r.create({label:"Car"}),body=f.rectangle(e,t,n,o,{collisionFilter:{group:h},chamfer:{radius:.5*o},density:2e-4}),x=f.circle(e+v,t+0,c,{collisionFilter:{group:h},friction:.8}),w=f.circle(e+m,t+0,c,{collisionFilter:{group:h},friction:.8}),S=l.create({bodyB:body,pointB:{x:v,y:0},bodyA:x,stiffness:1,length:0}),P=l.create({bodyB:body,pointB:{x:m,y:0},bodyA:w,stiffness:1,length:0});return r.addBody(y,body),r.addBody(y,x),r.addBody(y,w),r.addConstraint(y,S),r.addConstraint(y,P),y},o.softBody=function(e,t,n,r,l,d,h,v,m,y){m=c.extend({inertia:1/0},m),y=c.extend({stiffness:.2,render:{type:"line",anchors:!1}},y);var x=o.stack(e,t,n,r,l,d,(function(e,t){return f.circle(e,t,v,m)}));return o.mesh(x,n,r,h,y),x.label="Soft Body",x}},function(e,t,n){var o={};e.exports=o,n(1);var r=n(0);o.pathToVertices=function(path,e){"undefined"==typeof window||"SVGPathSeg"in window||r.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,t,n,l,c,d,f,h,v,m,y,x=[],w=0,S=0,P=0;e=e||15;var M=function(e,t,n){var o=n%2==1&&n>1;if(!v||e!=v.x||t!=v.y){v&&o?(m=v.x,y=v.y):(m=0,y=0);var r={x:m+e,y:y+t};!o&&v||(v=r),x.push(r),S=m+e,P=y+t}},A=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":S=e.x,P=e.y;break;case"H":S=e.x;break;case"V":P=e.y}M(S,P,e.pathSegType)}};for(o._svgPathToAbsolute(path),n=path.getTotalLength(),d=[],i=0;i<path.pathSegList.numberOfItems;i+=1)d.push(path.pathSegList.getItem(i));for(f=d.concat();w<n;){if((c=d[path.getPathSegAtLength(w)])!=h){for(;f.length&&f[0]!=c;)A(f.shift());h=c}switch(c.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":l=path.getPointAtLength(w),M(l.x,l.y,0)}w+=e}for(i=0,t=f.length;i<t;++i)A(f[i]);return x},o._svgPathToAbsolute=function(path){for(var e,t,n,o,r,l,c=path.pathSegList,d=0,f=0,h=c.numberOfItems,i=0;i<h;++i){var v=c.getItem(i),m=v.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(m))"x"in v&&(d=v.x),"y"in v&&(f=v.y);else switch("x1"in v&&(n=d+v.x1),"x2"in v&&(r=d+v.x2),"y1"in v&&(o=f+v.y1),"y2"in v&&(l=f+v.y2),"x"in v&&(d+=v.x),"y"in v&&(f+=v.y),m){case"m":c.replaceItem(path.createSVGPathSegMovetoAbs(d,f),i);break;case"l":c.replaceItem(path.createSVGPathSegLinetoAbs(d,f),i);break;case"h":c.replaceItem(path.createSVGPathSegLinetoHorizontalAbs(d),i);break;case"v":c.replaceItem(path.createSVGPathSegLinetoVerticalAbs(f),i);break;case"c":c.replaceItem(path.createSVGPathSegCurvetoCubicAbs(d,f,n,o,r,l),i);break;case"s":c.replaceItem(path.createSVGPathSegCurvetoCubicSmoothAbs(d,f,r,l),i);break;case"q":c.replaceItem(path.createSVGPathSegCurvetoQuadraticAbs(d,f,n,o),i);break;case"t":c.replaceItem(path.createSVGPathSegCurvetoQuadraticSmoothAbs(d,f),i);break;case"a":c.replaceItem(path.createSVGPathSegArcAbs(d,f,v.r1,v.r2,v.angle,v.largeArcFlag,v.sweepFlag),i);break;case"z":case"Z":d=e,f=t}"M"!=m&&"m"!=m||(e=d,t=f)}}},function(e,t,n){var o={};e.exports=o;var r=n(1),l=n(5),c=n(0),d=n(4),f=n(2);!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout((function(){e(c.now())}),1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o.create=function(e){c.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var t={controller:o,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},n=c.extend(t,e),r=!n.options.wireframes&&"transparent"===n.options.background;return n.pixiOptions=n.pixiOptions||{view:n.canvas,transparent:r,antialias:!0,backgroundColor:e.background},n.mouse=e.mouse,n.engine=e.engine,n.renderer=n.renderer||new PIXI.WebGLRenderer(n.options.width,n.options.height,n.pixiOptions),n.container=n.container||new PIXI.Container,n.spriteContainer=n.spriteContainer||new PIXI.Container,n.canvas=n.canvas||n.renderer.view,n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.options.width,y:n.options.height}},d.on(n.engine,"beforeUpdate",(function(){o.clear(n)})),n.textures={},n.sprites={},n.primitives={},n.container.addChild(n.spriteContainer),c.isElement(n.element)?n.element.appendChild(n.canvas):c.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),n.canvas.oncontextmenu=function(){return!1},n.canvas.onselectstart=function(){return!1},n},o.run=function(t){!function n(time){t.frameRequestId=e(n),o.world(t)}()},o.stop=function(e){t(e.frameRequestId)},o.clear=function(e){for(var t=e.container,n=e.spriteContainer;t.children[0];)t.removeChild(t.children[0]);for(;n.children[0];)n.removeChild(n.children[0]);var o=e.sprites["bg-0"];e.textures={},e.sprites={},e.primitives={},e.sprites["bg-0"]=o,o&&t.addChildAt(o,0),e.container.addChild(e.spriteContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},o.setBackground=function(e,t){if(e.currentBackground!==t){var n=t.indexOf&&-1!==t.indexOf("#"),o=e.sprites["bg-0"];if(n){var r=c.colorToNumber(t);e.renderer.backgroundColor=r,o&&e.container.removeChild(o)}else if(!o){var l=v(e,t);(o=e.sprites["bg-0"]=new PIXI.Sprite(l)).position.x=0,o.position.y=0,e.container.addChildAt(o,0)}e.currentBackground=t}},o.world=function(e){var i,t=e.engine.world,n=e.renderer,c=e.container,d=e.options,h=l.allBodies(t),v=l.allConstraints(t),m=[];d.wireframes?o.setBackground(e,d.wireframeBackground):o.setBackground(e,d.background);var y=e.bounds.max.x-e.bounds.min.x,x=e.bounds.max.y-e.bounds.min.y,w=y/e.options.width,S=x/e.options.height;if(d.hasBounds){for(i=0;i<h.length;i++){var body=h[i];body.render.sprite.visible=r.overlaps(body.bounds,e.bounds)}for(i=0;i<v.length;i++){var P=v[i],M=P.bodyA,A=P.bodyB,I=P.pointA,C=P.pointB;M&&(I=f.add(M.position,P.pointA)),A&&(C=f.add(A.position,P.pointB)),I&&C&&(r.contains(e.bounds,I)||r.contains(e.bounds,C))&&m.push(P)}c.scale.set(1/w,1/S),c.position.set(-e.bounds.min.x*(1/w),-e.bounds.min.y*(1/S))}else m=v;for(i=0;i<h.length;i++)o.body(e,h[i]);for(i=0;i<m.length;i++)o.constraint(e,m[i]);n.render(c)},o.constraint=function(e,t){e.engine;var n=t.bodyA,o=t.bodyB,r=t.pointA,l=t.pointB,d=e.container,f=t.render,h="c-"+t.id,v=e.primitives[h];v||(v=e.primitives[h]=new PIXI.Graphics),f.visible&&t.pointA&&t.pointB?(-1===c.indexOf(d.children,v)&&d.addChild(v),v.clear(),v.beginFill(0,0),v.lineStyle(f.lineWidth,c.colorToNumber(f.strokeStyle),1),n?v.moveTo(n.position.x+r.x,n.position.y+r.y):v.moveTo(r.x,r.y),o?v.lineTo(o.position.x+l.x,o.position.y+l.y):v.lineTo(l.x,l.y),v.endFill()):v.clear()},o.body=function(e,body){e.engine;var t=body.render;if(t.visible)if(t.sprite&&t.sprite.texture){var o="b-"+body.id,r=e.sprites[o],l=e.spriteContainer;r||(r=e.sprites[o]=n(e,body)),-1===c.indexOf(l.children,r)&&l.addChild(r),r.position.x=body.position.x,r.position.y=body.position.y,r.rotation=body.angle,r.scale.x=t.sprite.xScale||1,r.scale.y=t.sprite.yScale||1}else{var d="b-"+body.id,f=e.primitives[d],v=e.container;f||((f=e.primitives[d]=h(e,body)).initialAngle=body.angle),-1===c.indexOf(v.children,f)&&v.addChild(f),f.position.x=body.position.x,f.position.y=body.position.y,f.rotation=body.angle-f.initialAngle}};var n=function(e,body){var t=body.render.sprite.texture,n=v(e,t),o=new PIXI.Sprite(n);return o.anchor.x=body.render.sprite.xOffset,o.anchor.y=body.render.sprite.yOffset,o},h=function(e,body){var t,n=body.render,o=e.options,r=new PIXI.Graphics,l=c.colorToNumber(n.fillStyle),d=c.colorToNumber(n.strokeStyle),f=c.colorToNumber(n.strokeStyle),h=c.colorToNumber("#bbb"),v=c.colorToNumber("#CD5C5C");r.clear();for(var m=body.parts.length>1?1:0;m<body.parts.length;m++){t=body.parts[m],o.wireframes?(r.beginFill(0,0),r.lineStyle(1,h,1)):(r.beginFill(l,1),r.lineStyle(n.lineWidth,d,1)),r.moveTo(t.vertices[0].x-body.position.x,t.vertices[0].y-body.position.y);for(var y=1;y<t.vertices.length;y++)r.lineTo(t.vertices[y].x-body.position.x,t.vertices[y].y-body.position.y);r.lineTo(t.vertices[0].x-body.position.x,t.vertices[0].y-body.position.y),r.endFill(),(o.showAngleIndicator||o.showAxes)&&(r.beginFill(0,0),o.wireframes?r.lineStyle(1,v,1):r.lineStyle(1,f),r.moveTo(t.position.x-body.position.x,t.position.y-body.position.y),r.lineTo((t.vertices[0].x+t.vertices[t.vertices.length-1].x)/2-body.position.x,(t.vertices[0].y+t.vertices[t.vertices.length-1].y)/2-body.position.y),r.endFill())}return r},v=function(e,t){var n=e.textures[t];return n||(n=e.textures[t]=PIXI.Texture.fromImage(t)),n}}()}])},e.exports=o(function(){try{return n(!function(){var e=new Error("Cannot find module 'poly-decomp'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}}())}}]);