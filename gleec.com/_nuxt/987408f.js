(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{705:function(e,t,n){var content=n(753);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(92).default)("cabd893a",content,!0,{sourceMap:!1})},752:function(e,t,n){"use strict";n(705)},753:function(e,t,n){var r=n(91)(!1);r.push([e.i,'[data-v-e5c981ac]:export{base-width--small:375px;base-width--medium:768px;base-width--large:1920px;base-font-size--small:1vw;base-font-size--medium:.55vw;base-font-size--large:1vw;max-width--small:none;max-width--medium:none;max-width--large:none}@media(min-width:0){html[data-v-e5c981ac]:before{display:none;content:"small"}}@media(min-width:500px){html[data-v-e5c981ac]:before{display:none;content:"medium"}}@media(min-width:850px){html[data-v-e5c981ac]:before{display:none;content:"large"}}.background[data-v-e5c981ac]{position:fixed;top:0;left:0}',""]),e.exports=r},766:function(e,t,n){"use strict";n.r(t);n(31),n(25),n(30),n(8),n(40),n(26),n(41);var r=n(15),o=n(38),l=n(1),c=n(2),h=(n(46),n(47),n(155),n(28),n(195),n(93),n(22),n(102),n(104),n(51),n(6)),d=n(9),m=n(0),f=n(756),v=n(751),_=n.n(v),y=n(140),w=n(232),x=(new(function(){function e(){Object(l.a)(this,e),this._viewportWidth=y.a.innerWidth,this._viewportHeight=y.a.innerHeight,this._mousePosition=new m.Vector2,this._normalizedMousePosition=new m.Vector2,this._centeredMousePosition=new m.Vector2,this._dragManager=this._createDragManager(),this._bindAll(),this._setupEventListeners()}return Object(c.a)(e,[{key:"_createDragManager",value:function(){return new w.a({el:window})}},{key:"_bindAll",value:function(){this._mousemoveHandler=this._mousemoveHandler.bind(this),this._resizeHandler=this._resizeHandler.bind(this),this._dragendHandler=this._dragendHandler.bind(this)}},{key:"_setupEventListeners",value:function(){window.addEventListener("mousemove",this._mousemoveHandler),y.a.addEventListener("resize",this._resizeHandler),this._dragManager.addEventListener("drag:end",this._dragendHandler)}},{key:"_mousemoveHandler",value:function(e){this._mousePosition.x=e.clientX,this._mousePosition.y=e.clientY,this._normalizedMousePosition.x=this._mousePosition.x/this._viewportWidth,this._normalizedMousePosition.y=1-this._mousePosition.y/this._viewportHeight,this._centeredMousePosition.x=this._mousePosition.x/this._viewportWidth*2-1,this._centeredMousePosition.y=-this._mousePosition.y/this._viewportHeight*2+1,d.b.trigger({name:"mousemove",fireAtStart:!1},{mousePosition:this._mousePosition,normalizedMousePosition:this._normalizedMousePosition,centeredMousePosition:this._centeredMousePosition})}},{key:"_dragendHandler",value:function(e){e.distance>5||window.nativeButtonClicked||(this._mousePosition.x=e.endPosition.x,this._mousePosition.y=e.endPosition.y,this._normalizedMousePosition.x=this._mousePosition.x/this._viewportWidth,this._normalizedMousePosition.y=1-this._mousePosition.y/this._viewportHeight,this._centeredMousePosition.x=this._mousePosition.x/this._viewportWidth*2-1,this._centeredMousePosition.y=-this._mousePosition.y/this._viewportHeight*2+1,d.b.trigger({name:"click",fireAtStart:!1},{mousePosition:this._mousePosition,normalizedMousePosition:this._normalizedMousePosition,centeredMousePosition:this._centeredMousePosition}))}},{key:"_resizeHandler",value:function(e){var t=e.innerWidth,n=e.innerHeight;this._viewportWidth=t,this._viewportHeight=n}}]),e}()),n(10)),S=(n(13),n(48),n(94),n(95),n(96),n(5)),M=n(4),k=n(7),C=n(3),P=n(707);function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var I=function(e){Object(M.a)(n,e);var t=T(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){this._active=null,this._isMenuOpen=!1,this._viewsData=this._mapViewsData(P.a),this._views=this._createViews(),this._bindHandlers(),this._setupEventListeners()}},{key:"destroy",value:function(){Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),this._destroyScenes(),this._removeEventListeners(),this._removeDebugLayers()}},{key:"scenes",get:function(){return this._views}},{key:"active",get:function(){var e;return null===(e=this._active)||void 0===e?void 0:e.instance}},{key:"isMenuOpen",get:function(){return this._isMenuOpen},set:function(e){this._isMenuOpen=e;for(var i=0;i<this._views.length;i++)this._views[i].instance.isMenuOpen=e}},{key:"views",get:function(){return this._views}},{key:"viewsData",get:function(){return this._viewsData}},{key:"get",value:function(e){return this._getViewByName(e)}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],view=this._getViewByName(e);view&&(this._active=view,this.$composer.loadSettings(e),this._loadRenderSettings(view.data.renderer),view.instance.show(t))}},{key:"hide",value:function(e,t,n){var view=this._getViewByName(e);view&&view.instance.hide(t,n)}},{key:"_bindHandlers",value:function(){this._layerChangeHandler=this._layerChangeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){null===x.a||void 0===x.a||x.a.addEventListener("layer:change",this._layerChangeHandler)}},{key:"_removeEventListeners",value:function(){null===x.a||void 0===x.a||x.a.removeEventListener("layer:change",this._layerChangeHandler)}},{key:"_mapViewsData",value:function(e){for(var t=[],i=0;i<e.length;i++){var data=e[i],n=this.$store.state.data.pages[data.slug];data.entry=n,t.push(data)}return t}},{key:"_createViews",value:function(){var e,t,n=[],r=O(this._viewsData);try{for(r.s();!(t=r.n()).done;){var view=t.value;null===x.a||void 0===x.a||x.a.addLayer(view.name,"Views"),this.$composer.addSettings(view.name,view.postProcessing),(e=new view.class({config:view})).name=view.name,n.push({name:view.name,instance:e,data:view})}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"_getViewByName",value:function(e){var t,n=O(this._views);try{for(n.s();!(t=n.n()).done;){var view=t.value;if(view.name.toLowerCase()===e.toLowerCase())return view}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"_destroyScenes",value:function(){var e,t=O(this._views);try{for(t.s();!(e=t.n()).done;){var view=e.value;"function"==typeof view.instance.destroy&&view.instance.destroy()}}catch(e){t.e(e)}finally{t.f()}}},{key:"_loadRenderSettings",value:function(e){this.$renderer.setClearColor(e.clearColor)}},{key:"_removeDebugLayers",value:function(){for(var i=0,e=this._views.length;i<e;i++)null===x.a||void 0===x.a||x.a.removeLayer(this._views[i].name)}},{key:"onUpdate",value:function(e){var time=e.time,t=e.delta;this._active&&"function"==typeof this._active.instance.update&&this._active.instance.update({time:time,delta:t})}},{key:"_layerChangeHandler",value:function(e){}}]),n}(Object(d.a)()),L=n(688),D=n(757),R=n(684),j=n(708),z=n(665),B=n(668);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var V=function(e){Object(M.a)(n,e);var t=U(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this)).strength=void 0!==e.strength?e.strength:1,r.radius=e.radius,r.resolution=void 0!==e.resolution?new m.Vector2(e.resolution.x,e.resolution.y):new m.Vector2(256,256),r.bloomMapScene=e.bloomMapScene||new m.Texture,r.bloomMapMenu=e.bloomMapMenu||new m.Texture,r.clearColor=new m.Color(0,0,0);var o={minFilter:m.LinearFilter,magFilter:m.LinearFilter,format:m.RGBAFormat};r.renderTargetsHorizontal=[],r.renderTargetsVertical=[],r.nMips=5;var c=Math.round(r.resolution.x/2),h=Math.round(r.resolution.y/2);r.bloomUIRenderTarget=new m.WebGLRenderTarget(0,0,o),r.bloomUIMaterial=new m.ShaderMaterial({vertexShader:"#define GLSLIFY 1\n// Varyings\nvarying vec2 vUv;\n\nvoid main() {\n    // Output\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    // Varyings\n    vUv = uv;\n}\n",fragmentShader:"#define GLSLIFY 1\n// Varyings\nvarying vec2 vUv;\n\n// Unifroms\nuniform sampler2D uBloomMapScene;\nuniform sampler2D uBloomMapMenu;\nuniform float uMenuProgress;\n\nvoid main() {\n    vec4 colorScene = texture2D(uBloomMapScene, vUv);\n    vec4 colorMenu = texture2D(uBloomMapMenu, vUv);\n    vec4 color = mix(colorScene, colorMenu, step(1.0 - vUv.x, uMenuProgress));\n    gl_FragColor = color;\n}\n",uniforms:{uBloomMapScene:{value:null},uBloomMapMenu:{value:null},uMenuProgress:{value:0}},type:"BloomUI",transparent:!0});for(var i=0;i<r.nMips;i++){var d=new m.WebGLRenderTarget(c,h,o);d.texture.name="CustomSelectiveUnrealBloomPass.h"+i,d.texture.generateMipmaps=!1,r.renderTargetsHorizontal.push(d);var f=new m.WebGLRenderTarget(c,h,o);f.texture.name="CustomSelectiveUnrealBloomPass.v"+i,f.texture.generateMipmaps=!1,r.renderTargetsVertical.push(f),c=Math.round(c/2),h=Math.round(h/2)}r.separableBlurMaterials=[];var v=[3,5,7,9,11];c=Math.round(r.resolution.x/2),h=Math.round(r.resolution.y/2);for(var _=0;_<r.nMips;_++)r.separableBlurMaterials.push(r.getSeperableBlurMaterial(v[_])),r.separableBlurMaterials[_].uniforms.texSize.value=new m.Vector2(c,h),c=Math.round(c/2),h=Math.round(h/2);r.compositeMaterial=r.getCompositeMaterial(r.nMips),r.compositeMaterial.uniforms.blurTexture1.value=r.renderTargetsVertical[0].texture,r.compositeMaterial.uniforms.blurTexture2.value=r.renderTargetsVertical[1].texture,r.compositeMaterial.uniforms.blurTexture3.value=r.renderTargetsVertical[2].texture,r.compositeMaterial.uniforms.blurTexture4.value=r.renderTargetsVertical[3].texture,r.compositeMaterial.uniforms.blurTexture5.value=r.renderTargetsVertical[4].texture,r.compositeMaterial.uniforms.bloomStrength.value=r.strength,r.compositeMaterial.uniforms.bloomRadius.value=.1,r.compositeMaterial.needsUpdate=!0;r.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],r.bloomTintColors=[new m.Vector3(1,1,1),new m.Vector3(1,1,1),new m.Vector3(1,1,1),new m.Vector3(1,1,1),new m.Vector3(1,1,1)],r.compositeMaterial.uniforms.bloomTintColors.value=r.bloomTintColors,void 0===B.a&&console.error("THREE.CustomSelectiveUnrealBloomPass relies on CopyShader");var y=B.a;return r.copyUniforms=m.UniformsUtils.clone(y.uniforms),r.copyUniforms.opacity.value=1,r.materialCopy=new m.ShaderMaterial({uniforms:r.copyUniforms,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,blending:m.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),r.enabled=!0,r.needsSwap=!1,r._oldClearColor=new m.Color,r.oldClearAlpha=1,r.basic=new m.MeshBasicMaterial,r.fsQuad=new z.a(null),r}return Object(c.a)(n,[{key:"dispose",value:function(){for(var i=0;i<this.renderTargetsHorizontal.length;i++)this.renderTargetsHorizontal[i].dispose();for(var e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose()}},{key:"setSize",value:function(e,t){e*=.75,t*=.75;var n=Math.round(e/2),r=Math.round(t/2);this.bloomUIRenderTarget.setSize(e,t);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new m.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)}},{key:"render",value:function(e,t,r,o,l){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var c=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),l&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=r.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.bloomUIMaterial.uniforms.uBloomMapScene.value=this.bloomMapScene,this.bloomUIMaterial.uniforms.uBloomMapMenu.value=this.bloomMapMenu,this.fsQuad.material=this.bloomUIMaterial,e.setRenderTarget(this.bloomUIRenderTarget),e.clear(),this.fsQuad.render(e);for(var i=0;i<this.nMips;i++)this.fsQuad.material=this.separableBlurMaterials[i],this.separableBlurMaterials[i].uniforms.colorTexture.value=this.bloomUIRenderTarget.texture,this.separableBlurMaterials[i].uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[i]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[i].uniforms.colorTexture.value=this.renderTargetsHorizontal[i].texture,this.separableBlurMaterials[i].uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[i]),e.clear(),this.fsQuad.render(e),this.renderTargetsVertical[i];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,l&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=c}},{key:"getSeperableBlurMaterial",value:function(e){return new m.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new m.Vector2(.5,.5)},direction:{value:new m.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }",fragmentShader:"#include <common>\n                varying vec2 vUv;\n                uniform sampler2D colorTexture;\n                uniform vec2 texSize;\n                uniform vec2 direction;\n\n                float gaussianPdf(in float x, in float sigma) {\n                    return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n                }\n                void main() {\n                    vec2 invSize = 1.0 / texSize;\n                    float fSigma = float(SIGMA);\n                    float weightSum = gaussianPdf(0.0, fSigma);\n                    vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n                    float alphaSum = 0.0;\n                    for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n                        float x = float(i);\n                        float w = gaussianPdf(x, fSigma);\n                        vec2 uvOffset = direction * invSize * x;\n                        vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n                        vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n                        diffuseSum += (sample1.rgb + sample2.rgb) * w;\n                        alphaSum += (sample1.a + sample2.a) * w;\n                        weightSum += 2.0 * w;\n                    }\n\n                    float alpha = (alphaSum / weightSum);\n\n                    gl_FragColor = vec4(diffuseSum / weightSum, alpha);\n                }"})}},{key:"getCompositeMaterial",value:function(e){return new m.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }",fragmentShader:"varying vec2 vUv;\n                uniform sampler2D blurTexture1;\n                uniform sampler2D blurTexture2;\n                uniform sampler2D blurTexture3;\n                uniform sampler2D blurTexture4;\n                uniform sampler2D blurTexture5;\n                uniform sampler2D dirtTexture;\n                uniform float bloomStrength;\n                uniform float bloomRadius;\n                uniform float bloomFactors[NUM_MIPS];\n                uniform vec3 bloomTintColors[NUM_MIPS];\n\n                float lerpBloomFactor(const in float factor) {\n                    float mirrorFactor = 1.2 - factor;\n                    return mix(factor, mirrorFactor, bloomRadius);\n                }\n\n                void main() {\n                    gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n                        lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n                        lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n                        lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n                        lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n                }"})}}]),n}(z.b);V.BlurDirectionX=new m.Vector2(1,0),V.BlurDirectionY=new m.Vector2(0,1);var G=n(667);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var W=function(e){Object(M.a)(n,e);var t=A(n);function n(e){var r,o=e.vignette;return Object(l.a)(this,n),(r=t.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    vUv = uv;\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D tDiffuse;\n\n#if defined(ENABLE_VIGNETTE)\n    uniform float uVignetteOffset;\n    uniform float uVignetteDarkness;\n#endif\n\n// Partials\nvec4 vignette(vec4 color, vec2 uv, float offset, float darkness) {\n    const vec2 center = vec2(0.5);\n    float dist = distance(uv, center);\n    color.rgb *= smoothstep(0.8, offset * 0.799, dist * (darkness + offset));\n    return color;\n}\n\nvoid main() {\n    gl_FragColor = texture2D(tDiffuse, vUv);\n\n    // Vignette\n    #if defined(ENABLE_VIGNETTE)\n        gl_FragColor = vignette(gl_FragColor, vUv, uVignetteOffset, uVignetteDarkness);\n    #endif\n}\n",uniforms:{tDiffuse:{value:null},uVignetteOffset:{value:o.offset},uVignetteDarkness:{value:o.darkness}}})).material.defines.ENABLE_VIGNETTE=o.enabled,r}return Object(c.a)(n,[{key:"vignetteEnabled",get:function(){return this.material.defines.ENABLE_VIGNETTE},set:function(e){this.material.defines.ENABLE_VIGNETTE=e,this.material.needsUpdate=!0}},{key:"vignetteOffset",get:function(){return this.uniforms.uVignetteOffset.value},set:function(e){this.uniforms.uVignetteOffset.value=e}},{key:"vignetteDarkness",get:function(){return this.uniforms.uVignetteDarkness.value},set:function(e){this.uniforms.uVignetteDarkness.value=e}},{key:"render",value:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,e.setRenderTarget(null),this.fsQuad.render(e)}}]),n}(Object(d.a)(G.a));function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var E=function(e){Object(M.a)(n,e);var t=F(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,{vertexShader:"#define GLSLIFY 1\n// Varying\nvarying vec2 vUv;\n\nvoid main() {\n    // Output\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    // Varying\n    vUv = uv;\n}\n",fragmentShader:"#define GLSLIFY 1\n// Varying\nvarying vec2 vUv;\n\n// Uniforms\nuniform sampler2D uTextureScene;\nuniform sampler2D uTextureMenu;\nuniform vec2 uResolution;\nuniform float uMenuProgress;\n\n// Requires\nfloat mapRange(float value, float inMin, float inMax, float outMin, float outMax) {\n    return outMin + (value - inMin) * (outMax - outMin) / (inMax - inMin);\n}\n\n// https://www.iquilezles.org/www/articles/functions/functions.htm\nfloat cubicPulse(float c, float w, float x) {\n    x = abs(x - c);\n    if(x > w) return 0.0;\n    x /= w;\n    return 1.0 - x * x * (3.0 - 2.0 * x);\n}\n\nvoid main() {\n    float lineWidth = (150.0 / uResolution.x) * cubicPulse(0.5, 0.7, uMenuProgress);\n    float progress = uMenuProgress;\n    progress = mapRange(progress, 0.0, 1.0, -lineWidth * 0.5, 1.0 + lineWidth * 0.5);\n\n    vec4 colorScene = texture2D(uTextureScene, vUv);\n    vec4 colorMenu = texture2D(uTextureMenu, vUv);\n    vec4 color = mix(colorScene, colorMenu, step(1.0 - vUv.x, progress + (lineWidth * 0.5)));\n    gl_FragColor = color;\n}\n",uniforms:{uTextureScene:{value:null},uTextureMenu:{value:null},uMenuProgress:{value:0},uResolution:{value:new m.Vector2}}})).needsSwap=!1,e.type="UIPass",e}return Object(c.a)(n,[{key:"progress",get:function(){return this.material.uniforms.uMenuProgress.value},set:function(e){this.material.uniforms.uMenuProgress.value=e}},{key:"render",value:function(e,t,n){var r=e.autoClear;e.autoClear=!1,this.fsQuad.material=this.material,e.setRenderTarget(n),e.clear(),this.fsQuad.render(e),e.autoClear=r}},{key:"onWindowResize",value:function(e){var t=e.renderWidth,n=e.renderHeight;this.material.uniforms.uResolution.value.set(t,n)}}]),n}(Object(d.a)(G.a));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var $=function(e){Object(M.a)(n,e);var t=N(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    vUv = uv;\n}\n",fragmentShader:"#define GLSLIFY 1\n// Varyings\nvarying vec2 vUv;\n\n// Uniforms\nuniform sampler2D uTexture;\nuniform vec2 uResolution;\nuniform float uProgress;\nuniform vec3 uColor1;\nuniform vec3 uColor2;\n\n// Requires\nfloat mapRange(float value, float inMin, float inMax, float outMin, float outMax) {\n    return outMin + (value - inMin) * (outMax - outMin) / (inMax - inMin);\n}\n\n// https://www.iquilezles.org/www/articles/functions/functions.htm\nfloat cubicPulse(float c, float w, float x) {\n    x = abs(x - c);\n    if(x > w) return 0.0;\n    x /= w;\n    return 1.0 - x * x * (3.0 - 2.0 * x);\n}\n\nvoid main() {\n    float lineWidth = (150.0 / uResolution.x) * cubicPulse(0.5, 0.7, uProgress);\n\n    float progress = 1.0 - uProgress;\n    progress = mapRange(progress, 0.0, 1.0, -lineWidth * 0.5, 1.0 + lineWidth * 0.5);\n\n    vec3 color = vec3(uColor1);\n    if (vUv.x < progress) {\n        color = vec3(uColor2);\n    }\n\n    if (progress > vUv.x + lineWidth * 0.5) {\n        discard;\n    }\n\n    if (vUv.x > progress + lineWidth * 0.5) {\n        color = texture2D(uTexture, vUv).rgb;\n    }\n\n    gl_FragColor = vec4(color, 1.0);\n}\n",uniforms:{uTexture:{value:null},uProgress:{value:0},uResolution:{value:new m.Vector2},uColor1:{value:new m.Color("#ffffff")},uColor2:{value:new m.Color("#ff3ddb")}}})).needsSwap=!1,e}return Object(c.a)(n,[{key:"init",value:function(){this.material.type="MenuPass"}},{key:"texture",get:function(){return this.material.uniforms.uTexture.value},set:function(e){this.material.uniforms.uTexture.value=e}},{key:"progress",get:function(){return this.material.uniforms.uProgress.value},set:function(e){this.material.uniforms.uProgress.value=e}},{key:"color1",get:function(){return this.material.uniforms.uColor1.value},set:function(e){this.material.uniforms.uColor1.value=new m.Color(e)}},{key:"color2",get:function(){return this.material.uniforms.uColor2.value},set:function(e){this.material.uniforms.uColor2.value=new m.Color(e)}},{key:"render",value:function(e){var t=e.autoClear;e.autoClear=!1,e.setRenderTarget(null),this.fsQuad.material=this.material,this.fsQuad.render(e),e.autoClear=t}},{key:"onWindowResize",value:function(e){var t=e.renderWidth,n=e.renderHeight;this.material.uniforms.uResolution.value.set(t,n)}}]),n}(Object(d.a)(G.a));function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var Y=function(e){Object(M.a)(n,e);var t=Q(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){this._scenes={},this._debug=this._createDebug(),this._renderTargetUI=this._createRenderTarget(),this._renderTarget3D=this._createRenderTarget(),this._composerUI=this._createComposer(this._renderTargetUI,!1),this._composer3D=this._createComposer(this._renderTarget3D,!0),this._passes=this._createPasses()}},{key:"destroy",value:function(){Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),this._removeDebug()}},{key:"passes",get:function(){return this._passes}},{key:"renderTarget",get:function(){return this._renderTarget}},{key:"menuProgress",get:function(){return this._passes.ui.scene.progress},set:function(e){this._passes.ui.scene.progress=e,this._passes.threeD.menu.progress=e}},{key:"render",value:function(){this._composerUI.render(),this._passes.threeD.ui.map=this._composerUI.readBuffer.texture,this._composer3D.render()}},{key:"addSettings",value:function(e,t){this._scenes[e]=t}},{key:"loadSettings",value:function(e){var t=this._scenes[e];this._activeScene=t}},{key:"enableUI",value:function(e){var map=e.map;e.bloomMap;this._passes.ui.scene.enabled=!0,this._passes.threeD.ui.enabled=!0,this._passes.ui.scene.material.uniforms.uTextureScene.value=map}},{key:"disableUI",value:function(){this._passes.ui.scene.enabled=!1,this._passes.threeD.ui.enabled=!1}},{key:"enableMenu",value:function(e){this._passes.threeD.menu.enabled=!0,this._passes.ui.scene.material.uniforms.uTextureMenu.value=e.layerUI.map,this._passes.threeD.menu.texture=e.layer3D.map}},{key:"disableMenu",value:function(){this._passes.threeD.menu.enabled=!1}},{key:"_createRenderTarget",value:function(){var e=new m.WebGLRenderTarget(0,0);return e.texture.format=m.RGBAFormat,e.texture.minFilter=m.LinearFilter,e.texture.magFilter=m.LinearFilter,e.texture.generateMipmaps=!1,e.texture.depthBuffer=!1,e}},{key:"_createComposer",value:function(e,t){var n=new L.a(this.$renderer,e);return n.renderToScreen=t,n}},{key:"_createPasses",value:function(){var e={ui:{}};return e.ui.scene=this._createUIPass(),e.threeD={},e.threeD.menu=this._create3DMenuPass(),e.threeD.ui=this._create3DUIPass(),e}},{key:"_createUIPass",value:function(){var e=new E;return e.enabled=!1,this._composerUI.addPass(e),e}},{key:"_createUIBloomPass",value:function(){var e=new V({resolution:new m.Vector2,strength:1.5,radius:.29,threshold:.06,smoothWidth:.01,bloomMapScene:null,bloomMapMenu:null});if(e.enabled=!0,this._composerUI.addPass(e),this._debug){var t=this._debug.addGroup("Bloom UI");t.add(e,"enabled",{listen:!0,persistent:!0}),t.add(e,"strength",{min:0,max:3,step:.01,listen:!0}),t.add(e,"radius",{min:0,max:1,step:.01,listen:!0})}return e}},{key:"_createViewPass",value:function(){var e=new R.a;return e.enabled=!0,e.material.type="ViewPass",this._composer3D.addPass(e),e}},{key:"_createDOFPass",value:function(){var e=new D.a(null,{near:0,far:0},{focus:1,aperture:.025,maxblur:.01,aspect:0,width:0,height:0});if(this._debug){var t=this._debug.addGroup("Bloom");t.add(e,"enabled",{listen:!0}),t.add(e.uniforms.focus,"value",{label:"focus"}),t.add(e.uniforms.aperture,"value",{label:"aperture"}),t.add(e.uniforms.maxblur,"value",{label:"maxblur"})}return e}},{key:"_create3DBloomPass",value:function(){var e=new j.a({resolution:new m.Vector2,strength:3.31,radius:.29,threshold:.06,smoothWidth:.01,isBloomUI:!1});if(e.enabled=!1,this._composer3D.addPass(e),this._debug){var t=this._debug.addGroup("Bloom");t.add(e,"enabled",{listen:!0}),t.add(e,"strength",{min:0,max:3,step:.01,listen:!0}),t.add(e,"radius",{min:0,max:1,step:.01,listen:!0}),t.add(e,"threshold",{min:0,max:1,step:.01,listen:!0}),t.add(e,"smoothWidth",{min:0,max:1,step:.01,listen:!0})}return e}},{key:"_create3DUIPass",value:function(){var e=new R.a;return e.clear=!1,e.enabled=!1,e.needsSwap=!1,e.material.blending=m.AdditiveBlending,this._composer3D.addPass(e),e}},{key:"_create3DMenuPass",value:function(){var e=new $;return e.enabled=!1,this._composer3D.addPass(e),e}},{key:"_createFinalPass",value:function(){var e=new W({vignette:{enabled:!0,offset:.47,darkness:.24}});if(e.material.type="FinalPass",this._composer3D.addPass(e),this._debug){var t=this._debug.addGroup("Final");t.add(e,"enabled");var n=t.addGroup("Vignette");n.add(e,"vignetteEnabled",{label:"enable"}),n.add(e,"vignetteOffset",{label:"offset",min:0,max:1}),n.add(e,"vignetteDarkness",{label:"darkness",min:0,max:1})}return e}},{key:"onWindowResize",value:function(e){this._resizeComposers(e)}},{key:"_resizeComposers",value:function(e){var t=e.renderWidth,n=e.renderHeight,r=e.dpr;this._composer3D.setSize(t*r,n*r),this._composerUI.setSize(t*r,n*r)}},{key:"_createDebug",value:function(){if(x.a)return x.a.addGroup("Global composer",{container:"Global"})}},{key:"_removeDebug",value:function(){this._debug&&this._debug.remove()}}]),n}(Object(d.a)()),X=n(16),Z=n.n(X),J=n(90);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var ee=function(e){Object(M.a)(n,e);var t=K(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._useDpr=e.useDpr,this._renderTarget=this._createRenderTarget(),this._mesh=this._createMesh()}},{key:"texture",get:function(){return this._renderTarget.texture}},{key:"render",value:function(e,t){return this.$renderer.setRenderTarget(this._renderTarget),this.$renderer.setClearAlpha(0),this.$renderer.clear(),this.$renderer.render(e,t),{map:this._renderTarget.texture}}},{key:"_createRenderTarget",value:function(){var e=this.$root.isWebGL2()&&J.a.isDesktop()?m.WebGLMultisampleRenderTarget:m.WebGLRenderTarget;J.a.isSafari()&&"15.4"===J.a.version&&(e=m.WebGLRenderTarget);var t=new e(0,0);return t.texture.format=m.RGBAFormat,t.texture.minFilter=m.LinearFilter,t.texture.magFilter=m.LinearFilter,t.texture.generateMipmaps=!1,t}},{key:"_createMesh",value:function(){var e=new m.BufferGeometry;e.setAttribute("position",new m.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),e.setAttribute("uv",new m.Float32BufferAttribute([0,2,0,0,2,0],2));var t=new m.MeshBasicMaterial({color:16711935}),n=new m.Mesh(e,t);return this.add(n),n}},{key:"onWindowResize",value:function(e){this._resizeRenderTarget(e)}},{key:"_resizeRenderTarget",value:function(e){var t=e.renderWidth,n=e.renderHeight,r=e.dpr,o=this._useDpr?t*r:t,l=this._useDpr?n*r:n;this._renderTarget.setSize(o,l)}}]),n}(Object(d.a)(m.Object3D)),te=n(79),ie=n(81),ne=(n(132),n(233));function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var se=function(e){Object(M.a)(n,e);var t=re(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){this._colors={directionalLight1:0,directionalLight2:0},this._activeColors={directionalLight1:0,directionalLight2:0},this._debug=this._createDebug(),this._lights=this._createLights(),this._bindHandlers(),this._setupEventListeners()}},{key:"destroy",value:function(){var e;Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),this._removeEventListeners(),null===(e=this._timelineTransitionIn)||void 0===e||e.kill()}},{key:"setColors",value:function(e){this._colors.directionalLight1=e.directionalLight1,this._activeColors.directionalLight1=this._colors.directionalLight1,this._lights.directionalLight1.color.set(this._colors.directionalLight1),this._colors.directionalLight2=e.directionalLight2,this._activeColors.directionalLight2=this._colors.directionalLight2,this._lights.directionalLight2.color.set(this._colors.directionalLight2)}},{key:"_bindHandlers",value:function(){this._menuHoverHandler=this._menuHoverHandler.bind(this)}},{key:"_setupEventListeners",value:function(){ne.a.addEventListener("hover",this._menuHoverHandler)}},{key:"_removeEventListeners",value:function(){ne.a.removeEventListener("hover",this._menuHoverHandler)}},{key:"_createLights",value:function(){var e={};return e.directionalLight1=this._createDirectionalLight1(),e.directionalLight2=this._createDirectionalLight2(),e}},{key:"_createDirectionalLight1",value:function(){var e=new m.Object3D;this.add(e);var t=new m.DirectionalLight(6696906,1.34);if(t.target=e,t.castShadow=!1,t.position.set(289,-844,-11),this.add(t),this._debug){var n=this._debug.addGroup("Directional light #1");n.add(t,"visible"),n.add(t,"color"),n.add(t,"intensity"),n.add(t,"castShadow");var r=n.addGroup("Position");r.add(t.position,"x",{stepSize:1,onChange:function(){return helper.update()}}),r.add(t.position,"y",{stepSize:1,onChange:function(){return helper.update()}}),r.add(t.position,"z",{stepSize:1,onChange:function(){return helper.update()}});var o=n.addGroup("Target");o.add(e.position,"x",{stepSize:1,onChange:function(){return helper.update()}}),o.add(e.position,"y",{stepSize:1,onChange:function(){return helper.update()}}),o.add(e.position,"z",{stepSize:1,onChange:function(){return helper.update()}})}return t}},{key:"_createDirectionalLight2",value:function(){var e=new m.Object3D;e.position.set(0,-436,-3),this.add(e);var t=new m.DirectionalLight(5439616,.38);if(t.target=e,t.castShadow=!1,t.position.set(-1264,0,41),this.add(t),this._debug){var n=this._debug.addGroup("Directional light #2");n.add(t,"visible"),n.add(t,"color"),n.add(t,"intensity"),n.add(t,"castShadow");var r=n.addGroup("Position");r.add(t.position,"x",{stepSize:1,onChange:function(){return helper.update()}}),r.add(t.position,"y",{stepSize:1,onChange:function(){return helper.update()}}),r.add(t.position,"z",{stepSize:1,onChange:function(){return helper.update()}});var o=n.addGroup("Target");o.add(e.position,"x",{stepSize:1,onChange:function(){return helper.update()}}),o.add(e.position,"y",{stepSize:1,onChange:function(){return helper.update()}}),o.add(e.position,"z",{stepSize:1,onChange:function(){return helper.update()}})}return t}},{key:"_createPointLight1",value:function(){var e=new m.PointLight(1704064,1.68,493.34);e.position.set(-331,188),e.visible=!1,this.add(e);var t=new m.PointLightHelper(e);if(this.add(t),this._debug){var n=this._debug.addGroup("Point light");n.add(e,"visible"),n.add(e,"color"),n.add(e,"intensity"),n.add(e,"distance"),n.add(e,"position",{stepSize:1}),n.add(e,"castShadow")}return e}},{key:"_menuHoverHandler",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};clearTimeout(this._menuHoverTimeout),t||((t={}).directionalLight1=this._activeColors.directionalLight1,t.directionalLight2=this._activeColors.directionalLight2),this._menuHoverTimeout=setTimeout((function(){t.directionalLight1&&h.a.to(e._colors,.7,{directionalLight1:t.directionalLight1,ease:"sine.inOut",onUpdate:function(){var t=h.a.utils.splitColor(e._colors.directionalLight1);e._lights.directionalLight1.color.setRGB(t[0]/255,t[1]/255,t[2]/255)}}),t.directionalLight2&&h.a.to(e._colors,.7,{directionalLight2:t.directionalLight2,ease:"sine.inOut",onUpdate:function(){var t=h.a.utils.splitColor(e._colors.directionalLight2);e._lights.directionalLight2.color.setRGB(t[0]/255,t[1]/255,t[2]/255)}})}),100)}},{key:"_createDebug",value:function(){if(x.a)return x.a.addGroup("Lights",{container:"Menu"})}}]),n}(Object(d.a)(m.Object3D)),ae=(n(52),n(83),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(80),n(32)),oe=n(89),le=n.n(oe),ue=n(122),ce=n(17);function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}ae.a.use(le()("bla"));var de=function(e){Object(M.a)(n,e);var t=he(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._debugContainer=e.debugContainer,this._cameraManager=e.cameraManager,this._camera=e.camera,this._speed=.01,this._speedZ=.733,this._maxScaleX=0,this._maxScaleY=0,this._noiseScale=1.06,this._noiseSpeed=.03,this._blockScale=1,this._progress=0,this._depthOffset=.2,this._position={current:0,target:0},this._dummy=new m.Object3D,this._debug=this._createDebug(),this._blocks=this._createBlocks(),this._mesh=this._createMesh(),this._simplex=new ue.a,this._bindHandlers(),this._setupEventListeners(),this._updateTree(0),this._updateMesh(0),this.position.x=90,this.rotation.y=.02*Math.PI,this.rotation.x=.02*Math.PI}},{key:"destroy",value:function(){var e,t;Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),this._removeEventListeners(),null===(e=this._timelineShow)||void 0===e||e.kill(),null===(t=this._timelineHide)||void 0===t||t.kill()}},{key:"updateProgress",value:function(progress){this._globalTime=progress}},{key:"show",value:function(){return this._timelineShow=new h.a.timeline,this._timelineShow.to(this,2,{_progress:1,ease:"power2.out"},0),this._timelineShow}},{key:"hide",value:function(){return this._timelineHide=new h.a.timeline,this._timelineHide.to(this,2,{_progress:0,ease:"power1.in"},0),this._timelineHide}},{key:"_bindHandlers",value:function(){this._menuScrollUpdateHandler=this._menuScrollUpdateHandler.bind(this)}},{key:"_setupEventListeners",value:function(){ne.a.addEventListener("scroll",this._menuScrollUpdateHandler)}},{key:"_removeEventListeners",value:function(){ne.a.removeEventListener("scroll",this._menuScrollUpdateHandler)}},{key:"_createBlocks",value:function(){var e=[];var t={x:0,y:0,z:0,scaleX:1,scaleDirection:ae.a.float()>.5?1:-1,width:1,height:1,divide:!0,isVertical:!0,children:[]};return function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r.divide)if(r.isVertical){var l=ae.a.float(.2,.5),c=l*r.width,h={x:r.x,y:r.y,z:0,scaleX:0,scaleDirection:ae.a.float()>.5?1:-1,width:c,height:r.height,divide:o<5,isVertical:!1,parent:r,timeOffset:1e4*ae.a.float(),children:[],type:ae.a.float()>.9};r.children.push(h),t(2,h,o+1),h={x:r.x+c,y:r.y,z:0,scaleX:0,scaleDirection:ae.a.float()>.5?1:-1,width:r.width-c,height:r.height,divide:o<5,isVertical:!1,parent:r,timeOffset:1e4*ae.a.float(),children:[],type:ae.a.float()>.9},r.children.push(h),t(2,h,o+1)}else{var d=.2+ae.a.float(),m=d*r.height,f={x:0,y:0,z:0,scaleX:0,scaleDirection:ae.a.float()>.5?1:-1,width:1,height:m,divide:o<5,isVertical:!0,parent:r,timeOffset:ae.a.float(0,1e4),children:[],type:ae.a.float()>.9};r.children.push(f),t(2,f,o+1),f={x:0,y:m,z:0,scaleX:0,scaleDirection:ae.a.float()>.5?1:-1,width:1,height:1-m,divide:o<5,isVertical:!0,parent:r,timeOffset:ae.a.float(0,1e4),children:[],type:ae.a.float()>.9},r.children.push(f),t(2,f,o+1)}else e.push(r)}(2,t),this._tree=t,e}},{key:"_createMesh",value:function(){for(var e=X.ResourceLoader.get("section/menu/cube").scene.getObjectByName("Cube").geometry,t=new Float32Array(3*this._blocks.length),i=0,n=3*this._blocks.length;i<n;i+=3)t[i+0]=ce.a.randomArbitrary(-.2,.2),t[i+1]=ce.a.randomArbitrary(1,2),t[i+2]=ce.a.randomArbitrary(0,2*Math.PI);e.setAttribute("settings",new m.InstancedBufferAttribute(t,3));var r,o=new m.MeshStandardMaterial({roughness:.8,metalness:1});this._debug&&(r=this._debug.addGroup("Mesh")),o.onBeforeCompile=function(e){var t=e.uniforms;t.uDepthOffset={value:1.336},t.uProgress={value:0},o.userData.uniforms=t,r&&(r.add(t.uProgress,"value",{label:"progress"}),r.add(t.uDepthOffset,"value",{label:"depth offset",stepSize:.01})),e.vertexShader=e.vertexShader.replace("#include <clipping_planes_pars_vertex>","\n                    #if NUM_CLIPPING_PLANES > 0\n\n                        varying vec3 vClipPosition;\n\n                    #endif\n\n                    attribute vec3 settings;\n                    varying vec3 vSettings;\n                    varying vec2 vUv;\n                    varying vec3 vPosition;\n                    varying vec3 vNormalLocal;\n\n                    uniform float uProgress;\n                "),e.vertexShader=e.vertexShader.replace("#include <defaultnormal_vertex>","\n                    vSettings = settings;\n                    vUv = uv;\n\n                    vec3 transformedNormal = objectNormal;\n\n                    // if (transformedNormal.z > 0.99) {\n                    //     transformedNormal = normalize(vec3(-10., 10.0, 1.0));\n                    // }\n\n                    #ifdef USE_INSTANCING\n\n                        // this is in lieu of a per-instance normal-matrix\n                        // shear transforms in the instance matrix are not supported\n\n                        mat3 m = mat3( instanceMatrix );\n\n                        transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n                        transformedNormal = m * transformedNormal;\n\n                    #endif\n\n                    transformedNormal = normalMatrix * transformedNormal;\n\n                    #ifdef FLIP_SIDED\n\n                        transformedNormal = - transformedNormal;\n\n                    #endif\n\n                    #ifdef USE_TANGENT\n\n                        vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n                        #ifdef FLIP_SIDED\n\n                            transformedTangent = - transformedTangent;\n\n                        #endif\n\n                    #endif\n                "),e.vertexShader=e.vertexShader.replace("#include <project_vertex>","\n                    vec4 mvPosition = vec4(transformed, 1.0);\n\n                    #ifdef USE_INSTANCING\n                        mvPosition = instanceMatrix * mvPosition;\n                    #endif\n\n                    mvPosition.z += (1.0 - uProgress) * -350.0;\n\n                    vPosition = transformed.xyz;\n\n                    mvPosition = modelViewMatrix * mvPosition;\n\n                    gl_Position = projectionMatrix * mvPosition;\n\n                    vNormalLocal = normal;\n                "),e.fragmentShader=e.fragmentShader.replace("#include <clipping_planes_pars_fragment>","\n                    #if NUM_CLIPPING_PLANES > 0\n                        varying vec3 vClipPosition;\n                        uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];\n                    #endif\n\n                    // https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786\n                    vec3 hueShift(vec3 color, float hueAdjust){\n                        const vec3 kRGBToYPrime = vec3(0.299, 0.587, 0.114);\n                        const vec3 kRGBToI = vec3(0.596, -0.275, -0.321);\n                        const vec3 kRGBToQ = vec3(0.212, -0.523, 0.311);\n\n                        const vec3 kYIQToR = vec3(1.0, 0.956, 0.621);\n                        const vec3 kYIQToG = vec3(1.0, -0.272, -0.647);\n                        const vec3 kYIQToB = vec3(1.0, -1.107, 1.704);\n\n                        float YPrime = dot(color, kRGBToYPrime);\n                        float I = dot(color, kRGBToI);\n                        float Q = dot(color, kRGBToQ);\n                        float hue = atan(Q, I);\n                        float chroma = sqrt(I * I + Q * Q);\n\n                        hue += hueAdjust;\n\n                        Q = chroma * sin(hue);\n                        I = chroma * cos(hue);\n\n                        vec3 yIQ = vec3(YPrime, I, Q);\n\n                        return vec3(dot(yIQ, kYIQToR), dot(yIQ, kYIQToG), dot(yIQ, kYIQToB));\n                    }\n\n                    varying vec3 vSettings;\n                    varying vec2 vUv;\n                    varying vec3 vPosition;\n                    varying vec3 vNormalLocal;\n\n                    uniform float uDepthOffset;\n                "),e.fragmentShader=e.fragmentShader.replace("#include <output_fragment>","\n                    #ifdef OPAQUE\n                        diffuseColor.a = 1.0;\n                    #endif\n\n                    // https://github.com/mrdoob/three.js/pull/22425\n                    #ifdef USE_TRANSMISSION\n                        diffuseColor.a *= transmissionAlpha + 0.1;\n                    #endif\n\n                    outgoingLight = hueShift(outgoingLight, vSettings.r);\n                    outgoingLight *= vSettings.g;\n\n                    gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n                    if (vNormalLocal.z > 0.9 || abs(vNormalLocal.x) > 0.9) {\n                        vec2 uv = vUv;\n                        gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.0), uv.y);\n                    }\n\n                    vec3 shadow = vec3(0.0);\n                    float offset = clamp(vPosition.z * uDepthOffset, 0.0, 1.0);\n                    gl_FragColor.rgb = mix(shadow, gl_FragColor.rgb, vPosition.z * uDepthOffset);\n                ")};var l=new m.InstancedMesh(e,o,this._blocks.length);return l.instanceMatrix.setUsage(m.StreamDrawUsage),l.castShadow=!0,l.receiveShadow=!0,l.userData.renderBloom=!0,l.scale.set(1100,1100,1),l.position.x=-.5*l.scale.x,l.position.y=-.5*l.scale.y,l.position.z=-300,this.add(l),r&&(r.add(o,"color"),r.add(o,"roughness"),r.add(o,"metalness"),r.add(l,"scale",{stepSize:1})),l}},{key:"update",value:function(e){var time=e.time;this._mesh.material.userData.uniforms&&(this._mesh.material.userData.uniforms.uProgress.value=this._progress),this._updateTree(time*this._speed),this._updateMesh(time*this._speedZ)}},{key:"_updateTree",value:function(time){Math.sin(time);var e=this;!function t(n,r,o,l,c){for(var h,d,m,f,v,_=n[0].timeOffset,y=.5-.5*e._maxScaleX+.5*(Math.sin(time+_)+1)*e._maxScaleX,w=.5-.5*e._maxScaleY+.5*(Math.sin(time+_)+1)*e._maxScaleY,i=0,x=n.length;i<x;i++){(h=n[i]).isVertical?(d=0===i?y:1-y,m=1,f=0===i?0:y,v=0):(d=1,m=0===i?w:1-w,f=0,v=0===i?0:w);var S=r*d,M=o*m,k=l+f*r,C=c+v*o;h.width=S,h.height=M,h.x=k,h.y=C,h.children.length>0&&t(h.children,S,M,k,C)}}(this._tree.children,1,1,0,0)}},{key:"_updateMesh",value:function(time){if(this._mesh){for(var i=0,e=this._blocks.length;i<e;i++){var t=this._blocks[i],n=t.x,r=t.y,o=t.width,l=t.height,c=1+.5*(Math.sin(time+t.timeOffset)+1)*60;n-=-.5*o,r-=-.5*l;var h=.5*c+t.z;this._dummy.position.set(n,r,h);this._dummy.scale.set(o*this._blockScale,l*this._blockScale,c),this._dummy.updateMatrix(),this._mesh.setMatrixAt(i,this._dummy.matrix)}this._mesh.instanceMatrix.needsUpdate=!0}}},{key:"_menuScrollUpdateHandler",value:function(data){this._position.target=-.1*data.position,this._position.current=ce.a.lerp(this._position.current,this._position.target,.5),this.position.y=this._position.current}},{key:"_createDebug",value:function(){if(x.a){var e=x.a.addGroup("Background blocks",{container:this._debugContainer}),t=e.addGroup("Position");t.add(this.position,"x"),t.add(this.position,"y"),t.add(this.position,"z");var n=e.addGroup("Rotation");n.add(this.rotation,"x"),n.add(this.rotation,"y"),n.add(this.rotation,"z");var r=e.addGroup("Blocks");return r.add(this,"_speed",{stepSize:.001}),r.add(this,"_speedZ",{stepSize:.001}),r.add(this,"_maxScaleX",{stepSize:.01}),r.add(this,"_maxScaleY",{stepSize:.01}),r.add(this,"_noiseScale",{stepSize:.01}),r.add(this,"_noiseSpeed",{stepSize:.01}),r.add(this,"_blockScale",{stepSize:.01}),e}}}]),n}(Object(d.a)(m.Object3D));function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var fe=function(e){Object(M.a)(n,e);var t=me(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._isVisible=e.isVisible,this._layer=this._createLayer(),this._scene=this._createScene(),this._cameraManager=this._createCameraManager(),this._components=this._createComponents()}},{key:"destroy",value:function(){Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),this._destroyComponents()}},{key:"isVisible",get:function(){return this._isVisible},set:function(e){this._isVisible=e}},{key:"prepare",value:function(){this.$renderer.compile(this._scene,this._cameraManager.camera)}},{key:"show",value:function(e){var t=this,n=e.lightColors;return this._components.lights.setColors(n),this._timelineShow=new h.a.timeline,this._timelineShow.call((function(){return t._components.backgroundBlocks.show()}),null,0),this._timelineShow}},{key:"hide",value:function(){var e=this;return this._timelineHide=new h.a.timeline,this._timelineHide.call((function(){return e._components.backgroundBlocks.hide()}),null,0),this._timelineHide}},{key:"_createLayer",value:function(){return new ee}},{key:"_createScene",value:function(){return new m.Scene}},{key:"_createCameraManager",value:function(){return new te.a({debugContainer:"Menu",type:"section",scene:this._scene,position:new m.Vector3(0,0,300),orbit:!1})}},{key:"_createComponents",value:function(){var e={};return e.lights=this._createLightsComponent(),e.backgroundBlocks=this._createBackgroundBlocksComponent(),e}},{key:"_createLightsComponent",value:function(){var component=new se;return this._scene.add(component),component}},{key:"_createBackgroundBlocksComponent",value:function(){var component=new de({debugContainer:"Menu",camera:this._cameraManager.camera});return this._scene.add(component),component}},{key:"_destroyComponents",value:function(){if(this._components)for(var e in this._components)"function"==typeof this._components[e].destroy&&this._components[e].destroy()}},{key:"update",value:function(e){var time=e.time,t=e.delta;this._updateComponents({time:time,delta:t})}},{key:"_updateComponents",value:function(e){var time=e.time,t=e.delta;if(this._components)for(var n in this._components)"function"==typeof this._components[n].update&&this._components[n].update({time:time,delta:t})}},{key:"render",value:function(){return this._layer.render(this._scene,this._cameraManager.camera)}},{key:"onWindowResize",value:function(){this._scaleComponents()}},{key:"_scaleComponents",value:function(){var e=ie.a.active("small")?.5:1;this._components.backgroundBlocks.scale.set(e,e,e)}}]),n}(Object(d.a)()),ve=n(300),ge=n(666),_e=n(198),pe=n(87),ye=(n(78),n(154)),be=n.n(ye);function we(e){var t=e.geometry,n=e.material;for(var r in n)n[r]&&"function"==typeof n[r].dispose&&n[r].dispose();if(n&&n.uniforms)for(var o in n.uniforms)n.uniforms[o]&&"function"==typeof n.uniforms[o].value.dispose&&n.uniforms[o].value.dispose();n&&n.dispose(),t&&t.dispose()}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var Se=function(e){Object(M.a)(n,e);var t=xe(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._style=e.style,this._label=e.label,this._font=e.font,this._material=e.material.clone(),this._material.uniforms.map.value=e.material.uniforms.map.value,this._material.uniforms.patternTexture.value=e.material.uniforms.patternTexture.value,this._geometry=e.geometry,this._itemsAverageWidth=e.itemsAverageWidth,this._direction=e.direction,this._isEnabled=!1,this._mesh=this._createMesh(),this._setupInitialProperties(),this._material.uniforms.outlineOutsetWidth.value+=.1,this._material.uniforms.outlineInsetWidth.value+=.1}},{key:"destroy",value:function(){Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),this.remove(this._mesh),this._mesh.geometry.dispose(),we(this._mesh)}},{key:"material",get:function(){return this._material}},{key:"mesh",get:function(){return this._mesh}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction=e,this._material.uniforms.direction.value=e}},{key:"itemsAverageWidth",get:function(){return this._itemsAverageWidth},set:function(e){this._itemsAverageWidth=e}},{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"reset",value:function(){var e,t;null===(e=this._timelineHide)||void 0===e||e.kill(),null===(t=this._timelineShow)||void 0===t||t.kill(),this._setupInitialProperties(),this._resizeMesh()}},{key:"show",value:function(){return this._timelineShow=new h.b.timeline,this._timelineShow.to(this._material.uniforms.progress2,{duration:1.5,value:1,ease:"power2.out"},0),this._timelineShow.to(this._material.uniforms.progress3,{duration:1.5,value:1,ease:"power2.out"},.15),this._timelineShow.to(this._material.uniforms.progress4,{duration:1.5,value:1,ease:"power2.out"},.23),this._timelineShow}},{key:"hide",value:function(){return this._timelineHide=new h.b.timeline,this._timelineHide.to(this._material.uniforms.colorsIntensity,{duration:.5,value:0,ease:"power2.out"},0),this._timelineHide.to(this._material.uniforms.progressOut0,{duration:1.5,value:1,ease:"power2.out"},0),this._timelineHide}},{key:"_createMesh",value:function(){var e=new m.Mesh(this._geometry,this._material);return e.rotation.x=Math.PI,this.add(e),e}},{key:"_setupInitialProperties",value:function(){this._material.uniforms.colorsIntensity.value=1,this._material.uniforms.progress0.value=0,this._material.uniforms.progress1.value=0,this._material.uniforms.progress2.value=0,this._material.uniforms.progress3.value=0,this._material.uniforms.progress4.value=0,this._material.uniforms.progressOut0.value=0}},{key:"_resizeMesh",value:function(){var e=ie.a.rem(this._style[ie.a.current].fontSize)/this._font.info.size;this._mesh.scale.set(e,e,1),this._width=this._geometry.layout.width*e,this._height=this._geometry.layout.height*e,"top"===this._style[ie.a.current].verticalAlign&&(this._mesh.position.y=-this._height),"center"===this._style[ie.a.current].verticalAlign&&(this._mesh.position.y=-this._height/2),this._material.uniforms.linesTotal.value=this._geometry.layout.linesTotal,this._material.uniforms.lettersTotal.value=this._geometry.layout.lettersTotal,this._material.uniforms.screenResolution.value.set(y.a.innerWidth,y.a.innerHeight),this._material.uniforms.resolution.value.set(this._width,this._height)}},{key:"onWindowResize",value:function(){this._resizeMesh()}},{key:"onUpdate",value:function(e){var time=e.time;this._isEnabled&&(this._material.uniforms.time.value=time)}}]),n}(Object(d.a)(m.Object3D)),Me=function(){function e(t,n){Object(l.a)(this,e),this._limit=t,this._constructor=n,this._arrayObjects=new Array(this._limit),this._size=0}return Object(c.a)(e,[{key:"size",get:function(){return this._size}},{key:"obtain",value:function(e){var t;return this._size>0?(this._size--,t=this._arrayObjects[this._size],this._arrayObjects[this._size]=null,t):new this._constructor(e)}},{key:"recycle",value:function(e){if(!(e instanceof this._constructor))throw new TypeError("Trying to recycle the wrong object for pool.");this._size<this._limit&&("function"==typeof e.recycle&&e.recycle(),this._arrayObjects[this._size]=e,this._size++)}}]),e}();function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var Ce=function(e){Object(M.a)(n,e);var t=ke(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._buttonManager=e.buttonManager,this._viewportInnerWidth=e.viewportWidth,this._viewportInnerHeight=e.viewportHeight,this._mouseInteractionFbo=e.mouseInteractionFbo,this._label=e.label,this._route=e.route,this._index=e.index,this._direction=e.direction||1,this._config=e.config,this._settings=e.settings,this._isHitBoxVisible=e.isHitBoxVisible,this._animationDirection=e.animationDirection,this._isActive=e.isActive,this._debugFolder=e.debugFolder,this._colors=this._settings.colors,this._gradient=this._settings.gradient,this._pattern=this._settings.pattern,this._animations=this._settings.animations,this._border=this._settings.border,this._poolObjects=[],this._scrollDelta=0,this._isTransitioning=!1,this._isHovering=!1,this._debugBloom=this._settings.debugBloom,this._style={large:{width:1070,fontSize:200,lineHeight:169,verticalAlign:"top",hitbox:{paddingX:20,paddingY:0}},medium:{width:1070,fontSize:200,lineHeight:169,verticalAlign:"top",hitbox:{paddingX:20,paddingY:0}},small:{width:1070,fontSize:55,lineHeight:55,verticalAlign:"top",hitbox:{paddingX:20,paddingY:0}}},this._width=null,this._height=null,this._itemsAverageWidth=null,this._geometry=this._createGeometry(),this._material=this._createMaterial(),this._bloomMaterial=this._createBloomMaterial(),this._mesh=this._createMesh(),this._hitbox=this._createHitBox(),this._objectPool=this._createObjectPool(),this._activeItem=this._obtainMenuItemText(),this._button=this._buttonManager.add(this),this._setupDebug()}},{key:"destroy",value:function(){Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),this.remove(this._mesh),this.remove(this._hitbox);for(var i=0;i<this._poolObjects.length;i++){this._poolObjects[i].destroy()}we(this._mesh),we(this._hitbox)}},{key:"material",get:function(){return this._material}},{key:"route",get:function(){return this._route}},{key:"isActive",get:function(){return this._isActive},set:function(e){this._isActive=e}},{key:"isTransitioning",get:function(){return this._isTransitioning},set:function(e){this._isTransitioning=e}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"itemsAverageWidth",get:function(){return this._itemsAverageWidth},set:function(e){this._itemsAverageWidth=e,this._activeItem.itemsAverageWidth=e}},{key:"style",get:function(){return this._style}},{key:"hitbox",get:function(){return this._hitbox}},{key:"mesh",get:function(){return this._mesh}},{key:"settings",get:function(){return this._settings},set:function(e){this._settings=e}},{key:"colors",get:function(){return this._colors},set:function(e){this._colors=e,this._material&&(this._material.uniforms.color.value.set(this._colors.main.color),this._material.uniforms.borderColor.value.set(this._colors.main.borderColor))}},{key:"pattern",get:function(){return this._pattern},set:function(pattern){if(this._pattern=pattern,this._material){this._material.uniforms.patternScale.value=this._pattern.patternScale,this._material.uniforms.texturePatternScale.value=this._pattern.texturePatternScale,this._material.uniforms.patternTexture.value=this._pattern.texture;var e=this._material.defines.USE_TEXTURE!==this._pattern.useTexture;this._material.defines.USE_TEXTURE=this._pattern.useTexture,this._material.needsUpdate=e}}},{key:"gradient",get:function(){return this._gradient},set:function(e){this._gradient=e,this._material&&(this._material.uniforms.gradientScale.value=this._gradient.gradientScale,this._material.uniforms.gradientSpeed.value=this._gradient.gradientSpeed)}},{key:"animations",get:function(){return this._animations},set:function(e){this._animations=e,this._material&&(this._material.uniforms.maskWidth.value=this._animations.maskWidth,this._material.uniforms.progress0.value=this._animations.progress0,this._material.uniforms.progress1.value=this._animations.progress1,this._material.uniforms.progress2.value=this._animations.progress2,this._material.uniforms.progress3.value=this._animations.progress3,this._material.uniforms.progress4.value=this._animations.progress4,this._material.uniforms.progressOut0.value=this._animations.progressOut0,this._material.uniforms.stepSizeProgress0.value=this._animations.stepSizeProgress0,this._material.uniforms.stepSizeProgress1.value=this._animations.stepSizeProgress1,this._material.uniforms.stepSizeProgress2.value=this._animations.stepSizeProgress2,this._material.uniforms.stepSizeProgress3.value=this._animations.stepSizeProgress3,this._material.uniforms.stepSizeProgress4.value=this._animations.stepSizeProgress4,this._material.uniforms.stepSizeProgressOut0.value=this._animations.stepSizeProgressOut0)}},{key:"border",get:function(){return this._border},set:function(e){this._border=e,this._material&&(this._material.uniforms.outlineOutsetWidth.value=this._border.outsetWidth,this._material.uniforms.outlineInsetWidth.value=this._border.insetWidth)}},{key:"scrollDelta",get:function(){return this._scrollDelta},set:function(e){this._scrollDelta=e,this._material&&(this._material.uniforms.scrollDelta.value=e)}},{key:"debugBloom",get:function(){return this._debugBloom},set:function(e){this._debugBloom=e,this._material.defines.DEBUG_BLOOM=e,this._material.needsUpdate=!0}},{key:"update",value:function(e){e.time;if(this._mesh.bloomMaterial)for(var t in this._mesh.material.uniforms)this._mesh.bloomMaterial.uniforms[t].value=this._mesh.material.uniforms[t].value}},{key:"show",value:function(){var e,t,n=this;this._isActive=this.$root.getActiveSectionIndex()===this._index,null===(e=this._timelineShow)||void 0===e||e.kill(),null===(t=this._timelineHide)||void 0===t||t.kill();return this._timelineShow=new h.b.timeline,this._timelineShow.fromTo(this._material.uniforms.progress0,{value:0},{duration:1.25,value:1,ease:"power3.out"},0),this._timelineShow.fromTo(this._material.uniforms.progress1,{value:0},{duration:1.5,value:1,ease:"power3.out"},.2),this._timelineShow.fromTo(this.position,{x:70,z:-150},{duration:1.5,x:0,z:0,ease:"power3.out"},.2),this._timelineShow.call((function(){n._button.isMouseover&&n.mouseenter()}),null,2),this._isActive&&this._timelineShow.add(this._activeItem.show(),.8),this._timelineShow}},{key:"hide",value:function(){var e,t,n=this;null===(e=this._timelineHide)||void 0===e||e.kill(),null===(t=this._timelineShow)||void 0===t||t.kill();return this._timelineHide=new h.b.timeline,this._timelineHide.call((function(){n._activeItem.direction=-1}),null,0),this._timelineHide.add(this._activeItem.hide(),0),this._timelineHide.call((function(){n._activeItem.reset(),n._activeItem.direction=n._direction}),null),this._hoveredItem&&(this._timelineHide.call((function(){n._hoveredItem.direction=-1}),null,0),this._timelineHide.add(this._hoveredItem.hide(),0),this._timelineHide.call((function(){n._hoveredItem.reset(),n._hoveredItem.direction=n._direction}),null)),this._timelineHide.to(this.position,{duration:1,x:70,z:-150,ease:"power1.in"},0),this._timelineHide.fromTo(this._material.uniforms.progress1,{value:1},{duration:2,value:0,ease:"power3.out"},0),this._timelineHide.fromTo(this._material.uniforms.progress0,{value:1},{duration:3,value:0,ease:"power3.out"},.1),this._timelineHide}},{key:"mouseenter",value:function(){this._isHovering||(this._isTransitioning||this._isActive||(this._isHovering=!0,this._hoveredItem=this._obtainMenuItemText(),this._config?ne.a.setHover(this._config.menu.lightColors):ne.a.setHover({directionalLight1:"#000000",directionalLight2:"#000000"}),(new h.b.timeline).add(this._hoveredItem.show(),0)))}},{key:"mouseleave",value:function(){var e=this;if(!this._isTransitioning&&!this._isActive){this._isHovering=!1;var t=this._hoveredItem;ne.a.setHover(null);var n=new h.b.timeline;t&&(n.add(t.hide(),0),n.call((function(){t.disable(),e._objectPool.recycle(t)}),null))}}},{key:"click",value:function(){if(!this._isTransitioning){var e=this._config?this._config.slug:null,t=this._route.externalPath,n=this.$nuxt.getRouteBaseName(this.$nuxt.$route).includes("index");if(e)if(n){var r=this.$root.getActiveSection();r&&r.config.slug===e?this.$store.dispatch("menu/setClosed"):(this.$nuxt.$router.push(this.$nuxt.localePath("index-".concat(e))),this.$root.goToSection(e))}else this.$nuxt.$router.push(this.$nuxt.localePath("index-".concat(e)));else window.open(t,"_blank")}}},{key:"_createGeometry",value:function(){var e=X.ResourceLoader.get("roobert-regular-fnt");return be()({text:this._label.toLocaleUpperCase(),font:e,align:"left"})}},{key:"_createMaterial",value:function(){var e=X.ResourceLoader.get("roobert-regular-atlas");return e.needsUpdate=!0,new m.RawShaderMaterial({fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\n// GLSL1 to GLSL3\n#ifdef WEBGL2\n    #define varying in\n    #define texture2D texture\n#endif\n\n// Outputs\n#ifdef WEBGL2\n    layout(location = 0) out vec4 gColor0;\n    layout(location = 1) out vec4 gColor1;\n#else\n    vec4 gColor0 = vec4(0.0);\n    vec4 gColor1 = vec4(0.0);\n#endif\n\n#define PI 3.14159265358979323846\n\n// Varyings\nvarying vec2 vUv;\nvarying vec2 vLayoutUv;\nvarying vec2 screenPosition;\nvarying vec2 centerScreenPosition;\nvarying float lineIndex;\nvarying float letterIndex;\nvarying float lineLetterIndex;\nvarying float vLineLettersTotal;\n\n// Uniforms\nuniform float opacity;\nuniform vec3 color;\nuniform vec3 borderColor;\nuniform sampler2D map;\nuniform float alphaTest;\nuniform float time;\nuniform vec2 screenResolution;\nuniform vec2 resolution;\nuniform float mainColorGradientScale;\nuniform float offsetLeft;\n\n// Colors\nuniform float colorsIntensity;\nuniform vec3 color1;\nuniform vec3 color2;\n\n// Gradient\nuniform float gradientScale;\nuniform float gradientSpeed;\n\n// Layout\nuniform float linesTotal;\nuniform float lettersTotal;\n\n// Outline\nuniform float outlineOutsetWidth;\nuniform float outlineInsetWidth;\n\n// Pattern\nuniform float patternScale;\nuniform float texturePatternScale;\n\n#ifdef USE_TEXTURE\n    uniform sampler2D patternTexture;\n#endif\n\n// Animations\nuniform float direction;\nuniform float maskWidth;\n// Progresses In\nuniform float progress0;\nuniform float progress1;\nuniform float progress2;\nuniform float progress3;\nuniform float progress4;\n// Progresses Out\nuniform float progressOut0;\n\n// Steps progresses In\nuniform float stepSizeProgress0;\nuniform float stepSizeProgress1;\nuniform float stepSizeProgress2;\nuniform float stepSizeProgress3;\nuniform float stepSizeProgress4;\n// Steps progresses Out\nuniform float stepSizeProgressOut0;\n\n// Scroll\nuniform float scrollDelta;\n\n// Utils\nfloat mapRange(float value, float inMin, float inMax, float outMin, float outMax) {\n    return outMin + (value - inMin) * (outMax - outMin) / (inMax - inMin);\n}\n\n// Created by inigo quilez - iq/2014\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\nvec2 hash( vec2 p ) {\n    p = vec2( dot(p,vec2(2127.1,81.17)), dot(p,vec2(1269.5,283.37)) );\n    return fract(sin(p)*43758.5453);\n}\n\nfloat _median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n}\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise( in vec2 p ) {\n    vec2 i = floor( p );\n    vec2 f = fract( p );\n\n    vec2 u = f*f*(3.0-2.0*f);\n\n    float n = mix( mix( dot( -1.0+2.0*hash( i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ),\n                        dot( -1.0+2.0*hash( i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\n                mix( dot( -1.0+2.0*hash( i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ),\n                        dot( -1.0+2.0*hash( i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\n    return 0.5 + 0.5*n;\n}\n\nvoid main() {\n    // Sample\n    vec3 textureSample = texture2D(map, vUv).rgb;\n\n    // Median\n    float median = _median(textureSample.r, textureSample.g, textureSample.b) - 0.5;\n\n    // Outset\n    float sigDistOutset = median + outlineOutsetWidth * 0.5;\n    float outset = clamp(sigDistOutset / fwidth(sigDistOutset) + 0.5, 0.0, 1.0);\n\n    float sigDistOutset2 = median + (0.5) * 0.5;\n    float outset2 = clamp(sigDistOutset2 / fwidth(sigDistOutset2) + 0.5, 0.0, 1.0);\n\n    // Inset\n    float sigDistInset = median - outlineInsetWidth * 0.5;\n    float inset = 1.0 - clamp(sigDistInset / fwidth(sigDistInset) + 0.5, 0.0, 1.0);\n\n    // Original alpha\n    float alpha = clamp(sigDistOutset / fwidth(sigDistOutset) + 0.5, 0.0, 1.0);\n\n    // Border\n    float border = outset * inset;\n\n    // Outputs\n    vec3 mixedColor1 = mix(vec3(1.0), color1, colorsIntensity);\n    vec3 mixedColor2 = mix(vec3(1.0), color2, colorsIntensity);\n\n    // Gradient\n    float colorNoise = noise(vLayoutUv * gradientScale + time * gradientSpeed);\n    vec3 colorGradient1 = mix(color1, color2, colorNoise * 1.4);\n    vec3 colorGradient2 = mix(color2, color1, colorNoise * 1.4);\n\n    vec4 strokedFragColor = vec4(borderColor, border * opacity);\n\n    float blockOffsetLeft = offsetLeft / screenResolution.x;\n    float strokeGradientPositionX = mapRange(screenPosition.x * mainColorGradientScale, blockOffsetLeft, 1.0, 0.0, 1.0);\n    strokedFragColor.rgb *= 1.0 - strokeGradientPositionX;\n\n    vec4 strokedFragColor1 = vec4(mixedColor1, border * opacity);\n    vec4 strokedFragColor2 = vec4(mixedColor2, border * opacity);\n    vec4 strokedFragGradientColor = vec4(colorGradient2, border * opacity);\n\n    vec4 filledFragColor = vec4(color, opacity * (1.0 - inset) + border);\n\n    vec4 filledFragColor1 = vec4(mixedColor1, opacity * (1.0 - inset) + border);\n    vec4 filledFragColor2 = vec4(mixedColor2, opacity * (1.0 - inset) + border);\n    vec4 filledFragGradientColor = vec4(colorGradient1, opacity * (1.0 - inset) + border);\n\n    gColor0 = filledFragGradientColor;\n\n    // Animations\n    float letterProgress = letterIndex / (lettersTotal - 1.0);\n    float lineProgress = lineIndex / (linesTotal - 1.0);\n    float letterProgressPerLine = lineLetterIndex / (vLineLettersTotal - 1.0);\n\n    float layoutAspectRatio = resolution.x / resolution.y;\n    float screenAspectRatio = screenResolution.x / screenResolution.y;\n\n    // White Noise\n    float xs = floor(vLayoutUv.x * patternScale * layoutAspectRatio);\n    float ys = floor(vLayoutUv.y * patternScale);\n    float whiteNoise = rand(vec2(xs + time * 0.000001, ys));\n    // float whiteNoise = rand(vec2(xs, ys));\n\n    /**\n     * Reveal\n     */\n    float pattern = whiteNoise;\n\n    #ifdef USE_TEXTURE\n        vec4 texture = texture2D(patternTexture, fract(vLayoutUv * texturePatternScale * vec2(layoutAspectRatio, 1.0)));\n        float textureAvg = (texture.r + texture.g + texture.b) / 3.0;\n        pattern = textureAvg;\n    #endif\n\n    vec2 st = vLayoutUv;\n    // if (direction == -1.0) st.x = 1.0 - st.x;\n\n    // Progresses\n    float p0 = progress0;\n    float stx0 = st.x;\n    p0 = mapRange(p0, 0.0, 1.0, 0.0 - maskWidth, 1.0);\n    p0 = smoothstep(p0, p0 + maskWidth, stx0);\n\n    float p1 = progress1;\n    float stx1 = st.x;\n    p1 = mapRange(p1, 0.0, 1.0, 0.0 - maskWidth, 1.0);\n    p1 = smoothstep(p1, p1 + maskWidth, stx1);\n\n    float p2 = progress2;\n    float stx2 = direction == -1.0 ? 1.0 - st.x : st.x;\n    p2 = mapRange(p2, 0.0, 1.0, 0.0 - maskWidth, 1.0);\n    p2 = smoothstep(p2, p2 + maskWidth, stx2);\n\n    float p3 = progress3;\n    float stx3 = direction == -1.0 ? 1.0 - st.x : st.x;\n    p3 = mapRange(p3, 0.0, 1.0, 0.0 - maskWidth, 1.0);\n    p3 = smoothstep(p3, p3 + maskWidth, stx3);\n\n    float p4 = progress4;\n    float stx4 = direction == -1.0 ? 1.0 - st.x : st.x;\n    p4 = mapRange(p4, 0.0, 1.0, 0.0 - maskWidth, 1.0);\n    p4 = smoothstep(p4, p4 + maskWidth, stx4);\n\n    // Progresses Out\n    float po0 = progressOut0;\n    float stxo0 = direction == -1.0 ? 1.0 - st.x : st.x;\n    po0 = mapRange(po0, 0.0, 1.0, 0.0 - maskWidth, 1.0);\n    po0 = smoothstep(po0, po0 + maskWidth, stxo0);\n\n    // Mix factors In\n    float mixFactor0 = -pattern + p0 * 2.0;\n    float mixFactor1 = -pattern + p1 * 2.0;\n    float mixFactor2 = -pattern + p2 * 2.0;\n    float mixFactor3 = -pattern + p3 * 2.0;\n    float mixFactor4 = -pattern + p4 * 2.0;\n    // Mix factors Out\n    float mixFactorOutO = -pattern + po0 * 2.0;\n\n    // Remove smoothness In\n    mixFactor0 = smoothstep(0.0, stepSizeProgress0, mixFactor0);\n    mixFactor1 = smoothstep(0.0, stepSizeProgress1, mixFactor1);\n    mixFactor2 = smoothstep(0.0, stepSizeProgress2, mixFactor2);\n    mixFactor3 = smoothstep(0.0, stepSizeProgress3, mixFactor3);\n    mixFactor4 = smoothstep(0.0, stepSizeProgress4, mixFactor4);\n    // Remove smoothness Out\n    mixFactorOutO = smoothstep(0.0, stepSizeProgressOut0, mixFactorOutO);\n\n    // Mix layers\n    vec4 layer0 = mix(vec4(0.0), strokedFragColor * 0.4, 1.0 - mixFactor0);\n    vec4 layer1 = mix(layer0, strokedFragColor, 1.0 - mixFactor1);\n    vec4 layer2 = mix(layer1, strokedFragColor2, 1.0 - mixFactor2);\n    vec4 layer3 = mix(layer2, filledFragColor1, 1.0 - mixFactor3);\n    // vec4 layer3 = mix(layer2, filledFragGradientColor, 1.0 - mixFactor3);\n    vec4 layer4 = mix(layer3, filledFragColor, 1.0 - mixFactor4);\n    // Mix layers out\n    vec4 layerOut0 = mix(layer4, vec4(0.0), 1.0 - mixFactorOutO);\n\n    // Main output\n    gColor0 = layerOut0;\n\n    // Bloom output\n    gColor1 = layer3 * (1.0 - mixFactor3) * mixFactorOutO * mixFactor4;\n\n    #ifdef DEBUG_BLOOM\n        gColor0 = gColor1;\n    #endif\n\n    // If is bloom map material output bloom map\n    #ifdef BLOOM_MAP\n        gColor0 = gColor1;\n    #endif\n\n    // Output gColor0 if WebGL2 is not supported\n    #ifndef WEBGL2\n        gl_FragColor = gColor0;\n    #endif\n}\n",vertexShader:"precision highp float;\n#define GLSLIFY 1\n\n// GLSL1 to GLSL3\n#ifdef WEBGL2\n    #define attribute in\n    #define varying out\n#endif\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nattribute vec4 center;\nattribute vec2 layoutUv;\nattribute float line;\nattribute float letter;\nattribute float lineLetters;\nattribute float lineLettersTotal;\n\n// Uniforms\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\n\n// Varyings\nvarying vec2 vUv;\nvarying vec2 vLayoutUv;\nvarying vec2 screenPosition;\nvarying vec4 centerPosition;\nvarying vec2 centerScreenPosition;\nvarying float lineIndex;\nvarying float letterIndex;\nvarying float lineLetterIndex;\nvarying float vLineLettersTotal;\n\nvoid main() {\n    // Output\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    // Varyings\n    vUv = uv;\n    vLayoutUv = layoutUv;\n\n    vec4 pos = gl_Position;\n    pos.xyz /= pos.w;\n    screenPosition = vec2((pos.x + 1.0) * 0.5, (pos.y + 1.0) * 0.5);\n\n    centerPosition = projectionMatrix * modelViewMatrix * center;\n    centerPosition.xyz /= centerPosition.w;\n    centerScreenPosition = vec2((centerPosition.x + 1.0) * 0.5, (centerPosition.y + 1.0) * 0.5);\n\n    lineIndex = line;\n    letterIndex = letter;\n    lineLetterIndex = lineLetters;\n    vLineLettersTotal = lineLettersTotal;\n}\n",side:m.FrontSide,transparent:!0,depthTest:!1,uniforms:{map:{value:e},color:{value:new m.Color(this._colors.main.color)},borderColor:{value:new m.Color(this._colors.main.borderColor)},opacity:{value:1},alphaTest:{value:1e-4},screenResolution:{value:new m.Vector2(this._viewportInnerWidth,this._viewportInnerHeight)},resolution:{value:new m.Vector2(0,0)},time:{value:0},mainColorGradientScale:{value:1.05},linesTotal:{value:this._geometry.layout.linesTotal},lettersTotal:{value:this._geometry.layout.lettersTotal},outlineOutsetWidth:{value:.25},outlineInsetWidth:{value:.25},colorsIntensity:{value:1},color1:{value:new m.Color(this._config?this._config.theme.color1:"#ffffff")},color2:{value:new m.Color(this._config?this._config.theme.color2:"#ffffff")},gradientScale:{value:this._gradient.gradientScale},gradientSpeed:{value:this._gradient.gradientSpeed},patternScale:{value:this._pattern.patternScale},texturePatternScale:{value:this._pattern.texturePatternScale},patternTexture:{value:this._pattern.texture},direction:{value:this._direction},maskWidth:{value:this._animations.maskWidth},progress0:{value:this._animations.progress0},progress1:{value:this._animations.progress1},progress2:{value:this._animations.progress2},progress3:{value:this._animations.progress3},progress4:{value:this._animations.progress4},progressOut0:{value:this._animations.progressOut0},stepSizeProgress0:{value:this._animations.stepSizeProgress0},stepSizeProgress1:{value:this._animations.stepSizeProgress1},stepSizeProgress2:{value:this._animations.stepSizeProgress2},stepSizeProgress3:{value:this._animations.stepSizeProgress3},stepSizeProgress4:{value:this._animations.stepSizeProgress4},stepSizeProgressOut0:{value:this._animations.stepSizeProgressOut0},scrollDelta:{value:this._scrollDelta},offsetLeft:{value:0}},extensions:{derivatives:!0},glslVersion:this.$root.isWebGL2()?m.GLSL3:m.GLSL1,defines:{WEBGL2:this.$root.isWebGL2(),USE_TEXTURE:this._pattern.useTexture,DEBUG_BLOOM:this._debugBloom}})}},{key:"_createBloomMaterial",value:function(){if(!this.$root.isWebGL2()){var e=this._material.clone();return e.defines.BLOOM_MAP=!0,e.uniforms.patternTexture.value=this._material.uniforms.patternTexture.value,e}}},{key:"_createMesh",value:function(){var e=new m.Mesh(this._geometry,this._material);return e.rotation.x=Math.PI,this._bloomMaterial&&(e.bloomMaterial=this._bloomMaterial),this.add(e),e}},{key:"_createHitBox",value:function(){var e=new m.PlaneGeometry(1,1,1),t=new m.MeshBasicMaterial({color:"red"}),n=new m.Mesh(e,t);return n.visible=this._isHitBoxVisible,this.add(n),n}},{key:"_createObjectPool",value:function(){return new Me(15,Se)}},{key:"onWindowResize",value:function(e){var t=e.innerWidth,n=e.innerHeight;this._viewportInnerWidth=t,this._viewportInnerHeight=n,this._resizeMesh({innerWidth:t,innerHeight:n})}},{key:"_resizeMesh",value:function(){var e=X.ResourceLoader.get("roobert-regular-fnt"),t=ie.a.rem(this._style[ie.a.current].fontSize)/e.info.size;this._mesh.scale.set(t,t,1),this._geometry.update({lineHeight:ie.a.rem(this._style[ie.a.current].lineHeight)}),this._width=this._geometry.layout.width*t,this._height=this._geometry.layout.height*t,"top"===this._style[ie.a.current].verticalAlign&&(this._mesh.position.y=-this._height),"center"===this._style[ie.a.current].verticalAlign&&(this._mesh.position.y=-this._height/2),this._mesh.material.uniforms.linesTotal.value=this._geometry.layout.linesTotal,this._mesh.material.uniforms.lettersTotal.value=this._geometry.layout.lettersTotal,this._mesh.material.uniforms.screenResolution.value.set(this._viewportInnerWidth,this._viewportInnerHeight),this._mesh.material.uniforms.resolution.value.set(this._width,this._height),this._hitbox.position.x=this._width/2,this._hitbox.position.y=-this._height/2-ie.a.rem(this._style[ie.a.current].fontSize-this._style[ie.a.current].lineHeight)/2,this._hitbox.scale.x=this._width+2*this._style[ie.a.current].hitbox.paddingX,this._hitbox.scale.y=this._height+2*this._style[ie.a.current].hitbox.paddingY}},{key:"_obtainMenuItemText",value:function(){var text=this._objectPool.obtain({style:this._style,label:this._label,font:X.ResourceLoader.get("roobert-regular-fnt"),geometry:this._geometry,material:this._material,direction:this._direction,itemsAverageWidth:this._itemsAverageWidth});return this._poolObjects.includes(text)||this._poolObjects.push(text),text.reset(),text.enable(),this.add(text),text}},{key:"_setupDebug",value:function(){if(this._debugFolder){var e=this._debugFolder.addGroup("#".concat(this._index," ").concat(this._label));e.add(this._material.uniforms.color1,"value",{label:"Color 1"}),e.add(this._material.uniforms.color2,"value",{label:"Color 2"})}}}]),n}(Object(d.a)(m.Object3D)),Pe=n(413);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var He=function(e){Object(M.a)(n,e);var t=Oe(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._camera=e.camera,this._debugger=e.debugger,this._buttonManager=e.buttonManager,this._mouseInteractionFbo=e.mouseInteractionFbo,this._viewportWidth=y.a.innerWidth,this._viewportHeight=y.a.innerHeight,this._routes=this.$nuxt.$t("data").routes.sections,this._settings={debugBloom:!1,border:{outsetWidth:.1,insetWidth:.1},pattern:{patternScale:4.5,texturePatternScale:1,useTexture:!1,texture:Z.a.get("triangle-pattern")},colors:{main:{color:"#ffffff",borderColor:"#8B8B8B"}},gradient:{gradientScale:3,gradientSpeed:.5},animations:{lineStagger:.13,maskWidth:1,progress0:0,progress1:0,progress2:0,progress3:0,progress4:0,progressOut0:0,stepSizeProgress0:.3,stepSizeProgress1:.3,stepSizeProgress2:.3,stepSizeProgress3:.3,stepSizeProgress4:.3,stepSizeProgressOut0:.3}},this._style={large:{position:{left:743,top:321},paddingBottom:217},medium:{position:{left:50,top:"23.07%"},paddingBottom:217},small:{position:{left:28,top:"28.07%"},paddingBottom:100}},this._isTransitioning=!1,this._isVisible=!1,this._isHitBoxVisible=!1,this._height=null,this._scrollPosition=0,this._scrollDelta=0,this._activeSectionIndex=null,this._bindAll(),this._debugFolder=this._createDebug(),this._menuItems=this._createMenuItems()}},{key:"destroy",value:function(){Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this);for(var i=0;i<this._menuItems.length;i++)this._menuItems[i].destroy()}},{key:"height",get:function(){return this._height}},{key:"isHitBoxVisible",get:function(){return this._isHitBoxVisible},set:function(e){this._isHitBoxVisible=e;for(var i=0;i<this._menuItems.length;i++){this._menuItems[i].isHitBoxVisible=e}}},{key:"scrollPosition",get:function(){return this._scrollPosition},set:function(e){this._scrollPosition=e}},{key:"scrollDelta",get:function(){return this._scrollDelta},set:function(e){this._scrollDelta=e;for(var i=0;i<this._menuItems.length;i++){this._menuItems[i].scrollDelta=e}}},{key:"isTransitioning",get:function(){return this._isTransitioning},set:function(e){this._isTransitioning=e}},{key:"isVisible",get:function(){return this._isVisible},set:function(e){this._isVisible=e}},{key:"show",value:function(){this._timelineShow=new h.b.timeline,this._timelineShow.set(this,{isTransitioning:!0},0),this._timelineShow.set(this._menuItems,{isTransitioning:!0},0);for(var i=0;i<this._menuItems.length;i++){var e=this._menuItems[i],t=this._settings.animations.lineStagger;this._timelineShow.add(e.show(),i*t+.5)}return this._timelineShow.set(this,{isVisible:!0},2.3),this._timelineShow.set(this,{isTransitioning:!1},2.3),this._timelineShow.set(this._menuItems,{isTransitioning:!1},2.3),this._timelineShow.set(this._buttonManager,{enabled:!0},2.3),this._timelineShow}},{key:"hide",value:function(e){this._timelineHide=new h.b.timeline({onComplete:e}),this._timelineHide.set(this._buttonManager,{enabled:!0},0),this._timelineHide.set(this._menuItems,{isTransitioning:!0},0),this._timelineHide.set(this,{isTransitioning:!0},0);for(var i=0;i<this._menuItems.length;i++){var t=this._menuItems[i],n=this._settings.animations.lineStagger;this._timelineHide.add(t.hide(),i*n)}return this._timelineHide.set(this,{isVisible:!1},1.8),this._timelineHide.set(this,{isTransitioning:!1},1.8),this._timelineHide.set(this._menuItems,{isTransitioning:!1},1.8),this._timelineHide.set(this._buttonManager,{enabled:!1},1.8),this._timelineHide}},{key:"_createMenuItems",value:function(){for(var e=[],t=0,i=0;i<this._routes.length;i++){var n=this._routes[i],r=new Ce({viewportWidth:this._viewportWidth,viewportHeight:this._viewportHeight,buttonManager:this._buttonManager,mouseInteractionFbo:this._mouseInteractionFbo,route:n,label:n.name,index:i,settings:this._settings,config:Pe.default[i],isHitBoxVisible:this._isHitBoxVisible,direction:i%2==0?-1:1,isActive:!1,debugFolder:this._debugFolder});t+=r.width,this.add(r),e.push(r)}t/=this._routes.length;for(var o=0;o<e.length;o++){e[o].itemsAverageWidth=t}return e}},{key:"_createHeightDebugPlane",value:function(){var e=new m.PlaneGeometry(1,1,1),t=new m.MeshBasicMaterial({color:"red"}),n=new m.Mesh(e,t);return this.add(n),n}},{key:"update",value:function(e){for(var time=e.time,i=0;i<this._menuItems.length;i++)this._menuItems[i].update({time:time})}},{key:"onWindowResize",value:function(e){var t=e.innerWidth,n=e.innerHeight;this._viewportWidth=t,this._viewportHeight=n;var r=this._style[ie.a.current].position.top,o="number"==typeof r?ie.a.rem(r):this._viewportHeight*(parseFloat(r)/100);this.position.x=ie.a.rem(this._style[ie.a.current].position.left),this.position.y=-o,this._resizeMenuItems()}},{key:"_resizeMenuItems",value:function(){for(var i=0;i<this._menuItems.length;i++){var e=this._menuItems[i];e.position.y=-ie.a.rem(e.style[ie.a.current].lineHeight)*i,e.material.uniforms.offsetLeft.value=this.position.x}var t=this._style[ie.a.current].position.top,n="number"==typeof t?ie.a.rem(t):this._viewportHeight*(parseFloat(t)/100);this._height=n+ie.a.rem(this._style[ie.a.current].paddingBottom+this._menuItems[0].style[ie.a.current].lineHeight*this._menuItems.length),this._heightDebugPlane&&(this._heightDebugPlane.position.y=n-this._height/2,this._heightDebugPlane.scale.set(100,this._height,1))}},{key:"_bindAll",value:function(){this._settingsChangeHandler=this._settingsChangeHandler.bind(this),this._colorsChangeHandler=this._colorsChangeHandler.bind(this),this._borderChangeHandler=this._borderChangeHandler.bind(this),this._animationsChangeHandler=this._animationsChangeHandler.bind(this),this._gradientChangeHandler=this._gradientChangeHandler.bind(this),this._patternChangeHandler=this._patternChangeHandler.bind(this),this._clickShowHandler=this._clickShowHandler.bind(this),this._clickHideHandler=this._clickHideHandler.bind(this)}},{key:"_settingsChangeHandler",value:function(){for(var i=0;i<this._menuItems.length;i++){this._menuItems[i].settings=this._settings}}},{key:"_gradientChangeHandler",value:function(){for(var i=0;i<this._menuItems.length;i++){this._menuItems[i].gradient=this._settings.gradient}}},{key:"_patternChangeHandler",value:function(){for(var i=0;i<this._menuItems.length;i++){this._menuItems[i].pattern=this._settings.pattern}}},{key:"_colorsChangeHandler",value:function(){for(var i=0;i<this._menuItems.length;i++){this._menuItems[i].colors=this._settings.colors}}},{key:"_animationsChangeHandler",value:function(){for(var i=0;i<this._menuItems.length;i++){this._menuItems[i].animations=this._settings.animations}}},{key:"_borderChangeHandler",value:function(){for(var i=0;i<this._menuItems.length;i++){this._menuItems[i].border=this._settings.border}}},{key:"_clickShowHandler",value:function(){this.show()}},{key:"_clickHideHandler",value:function(){this.hide()}},{key:"_createDebug",value:function(){var e=this;if(this._debugger){var t=this._debugger.addGroup("Menu Item Component");t.add(this,"isHitBoxVisible"),t.add(this._settings,"debugBloom",{onChange:function(){for(var i=0;i<e._menuItems.length;i++){e._menuItems[i].debugBloom=e._settings.debugBloom}}});var n=t.addGroup("Border");n.add(this._settings.border,"outsetWidth",{min:0,max:1,onChange:this._borderChangeHandler}),n.add(this._settings.border,"insetWidth",{min:0,max:1,onChange:this._borderChangeHandler});var r=t.addGroup("Color");r.add(this._settings.colors.main,"color",{onChange:this._colorsChangeHandler}),r.add(this._settings.colors.main,"borderColor",{onChange:this._colorsChangeHandler});var o=t.addGroup("Gradient");o.add(this._settings.gradient,"gradientScale",{label:"Scale",onChange:this._gradientChangeHandler}),o.add(this._settings.gradient,"gradientSpeed",{label:"Speed",onChange:this._gradientChangeHandler});var pattern=t.addGroup("Pattern");pattern.add(this._settings.pattern,"patternScale",{label:"scale",onChange:this._patternChangeHandler}),pattern.add(this._settings.pattern,"texturePatternScale",{label:"texture scale",onChange:this._patternChangeHandler}),pattern.add(this._settings.pattern,"texture",{label:"texture",onChange:this._patternChangeHandler}),pattern.add(this._settings.pattern,"useTexture",{onChange:this._patternChangeHandler});var l=t.addGroup("Animations");l.add(this._settings.animations,"lineStagger",{min:0,max:1}),l.add(this._settings.animations,"maskWidth",{min:0,max:1,onChange:this._animationsChangeHandler});var progress=l.addGroup("Progress In");progress.add(this._settings.animations,"progress0",{onChange:this._animationsChangeHandler}),progress.add(this._settings.animations,"progress1",{onChange:this._animationsChangeHandler}),progress.add(this._settings.animations,"progress2",{onChange:this._animationsChangeHandler}),progress.add(this._settings.animations,"progress3",{onChange:this._animationsChangeHandler}),progress.add(this._settings.animations,"progress4",{onChange:this._animationsChangeHandler}),l.addGroup("Progress Out").add(this._settings.animations,"progressOut0",{onChange:this._animationsChangeHandler});var c=l.addGroup("Steps progress In");return c.add(this._settings.animations,"stepSizeProgress0",{min:0,max:1,onChange:this._animationsChangeHandler}),c.add(this._settings.animations,"stepSizeProgress1",{min:0,max:1,onChange:this._animationsChangeHandler}),c.add(this._settings.animations,"stepSizeProgress2",{min:0,max:1,onChange:this._animationsChangeHandler}),c.add(this._settings.animations,"stepSizeProgress3",{min:0,max:1,onChange:this._animationsChangeHandler}),c.add(this._settings.animations,"stepSizeProgress4",{min:0,max:1,onChange:this._animationsChangeHandler}),l.addGroup("Steps progress In").add(this._settings.animations,"stepSizeProgressOut0",{min:0,max:1,onChange:this._animationsChangeHandler}),l.addButton("Show",{onClick:this._clickShowHandler}),l.addButton("Hide",{onClick:this._clickHideHandler}),t.addGroup("Items")}}}]),n}(Object(d.a)(m.Object3D)),Te=n(121),Ie=n(151);function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var De=function(e){Object(M.a)(n,e);var t=Le(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._isVisible=e.isVisible,this._isScrollAllowed=!1,this._isDragAllowed=!1,this._settings={damping:Ie.a.isTouch()?1:.1,scrollStrength:Ie.a.isTouch()?25:50,dragStrength:.8},this._bindAll(),this._layer=this._createLayer(),this._scene=this._createScene(),this._cameraManager=this._createCameraManager(),this._debugger=this._createDebugGui(),this._buttonManager=this._createButtonManager(),this._scrollContainer=this._createScrollContainer(),this._components=this._createComponents(),this._scrollManager=this._createScrollManager(),this._dragManager=this._createDragManager(),this._scrollPosition={current:0,target:0},this._viewportWidth=y.a.innerWidth,this._viewportHeight=y.a.innerHeight,this._scrollHeight=this._components.menu.height-this._viewportHeight,this._inertiaTracker=ve.a.track(this._scrollPosition,"target"),this._setupEventListeners()}},{key:"destroy",value:function(){Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),this._destroyComponents(),this._removeEventListeners(),this._buttonManager.destroy()}},{key:"scrollPosition",get:function(){return this._scrollPosition}},{key:"camera",get:function(){return this._cameraManager.camera}},{key:"isVisible",get:function(){return this._isVisible},set:function(e){this._isVisible=e,e&&this._resetScroll()}},{key:"prepare",value:function(){this.$renderer.compile(this._scene,this._cameraManager.camera)}},{key:"show",value:function(){var e=new h.b.timeline;return e.add(this._components.menu.show(),0),e.set(this,{_isScrollAllowed:!0},2),e.set(this,{_isDragAllowed:!0},2),e}},{key:"hide",value:function(){var e=new h.b.timeline;return e.add(this._components.menu.hide(),0),e.set(this,{_isScrollAllowed:!1},0),e.set(this,{_isDragAllowed:!1},0),e}},{key:"_createLayer",value:function(){return new ge.a({useDpr:!0,useBloomMapRenderer:!1})}},{key:"_createScene",value:function(){return new m.Scene}},{key:"_createCameraManager",value:function(){return new te.a({debugContainer:"Menu",type:"uiPerspective"})}},{key:"_createScrollContainer",value:function(){var e=new m.Object3D;return this._scene.add(e),e}},{key:"_createDragManager",value:function(){return new w.a({el:document.body})}},{key:"_createScrollManager",value:function(){return new _e.a}},{key:"_createButtonManager",value:function(){return new Te.a({camera:this._cameraManager.camera})}},{key:"_createComponents",value:function(){var e={};return e.menu=this._createMenu(),e}},{key:"_destroyComponents",value:function(){if(this._components)for(var e in this._components)"function"==typeof this._components[e].destroy&&this._components[e].destroy()}},{key:"_createMenu",value:function(){var menu=new He({camera:this._cameraManager.camera,debugger:this._debugger,buttonManager:this._buttonManager,mouseInteractionFbo:this._mouseInteractionFbo});return this._scrollContainer.add(menu),menu}},{key:"_resetScroll",value:function(){this._scrollPosition.target=0,this._scrollPosition.current=0}},{key:"update",value:function(e){var time=e.time,t=e.delta;this._isVisible&&(this._updateComponents({time:time,delta:t}),this._updateScrollPosition())}},{key:"_updateComponents",value:function(e){var component,time=e.time,t=e.delta;for(var n in this._components)"function"==typeof(component=this._components[n]).update&&component.update({time:time,delta:t})}},{key:"_updateScrollPosition",value:function(){var e=this._scrollPosition.current;this._scrollPosition.current=ce.a.lerp(this._scrollPosition.current,this._scrollPosition.target,this._settings.damping),this._scrollContainer.position.y=-this._scrollPosition.current,ne.a.setScrollPosition({position:this._scrollPosition.current,delta:e-this._scrollPosition.current}),this._components.menu&&(this._components.menu.scrollPosition=this._scrollPosition.current,this._components.menu.scrollDelta=e-this._scrollPosition.current)}},{key:"render",value:function(){return this._layer.render(this._scene,this._cameraManager.camera)}},{key:"onWindowResize",value:function(e){var t=e.innerWidth,n=e.innerHeight;this._scene.position.x=-.5*t,this._scene.position.y=.5*n,this._resizeScrollHeight({innerWidth:t,innerHeight:n})}},{key:"_resizeScrollHeight",value:function(e){e.innerWidth;var t=e.innerHeight;this._scrollHeight=this._components.menu.height-t}},{key:"_bindAll",value:function(){this._dragstartHandler=this._dragstartHandler.bind(this),this._dragHandler=this._dragHandler.bind(this),this._dragendHandler=this._dragendHandler.bind(this),this._scrollHandler=this._scrollHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this._dragManager.addEventListener("drag:start",this._dragstartHandler),this._dragManager.addEventListener("drag:move",this._dragHandler),this._dragManager.addEventListener("drag:end",this._dragendHandler),this._scrollManager.addEventListener("scroll",this._scrollHandler)}},{key:"_removeEventListeners",value:function(){this._dragManager.destroy(),this._scrollManager.removeEventListener("scroll",this._scrollHandler)}},{key:"_dragstartHandler",value:function(){var e;this._isDragAllowed&&this._isScrollAllowed&&this._isVisible&&(null===(e=this._throwTween)||void 0===e||e.kill())}},{key:"_dragHandler",value:function(e){this._isDragAllowed&&this._isScrollAllowed&&this._isVisible&&(this._scrollPosition.target+=-e.delta.y*this._settings.dragStrength,this._scrollPosition.target=pe.a.clamp(this._scrollPosition.target,-this._scrollHeight,0))}},{key:"_dragendHandler",value:function(){this._isDragAllowed&&this._isScrollAllowed&&this._isVisible&&(this._throwTween=h.b.to(this._scrollPosition,{inertia:{duration:{max:2},resistance:0,target:{min:-this._scrollHeight>0?0:-this._scrollHeight,max:0}}}))}},{key:"_scrollHandler",value:function(e){var t;this._isScrollAllowed&&this._isVisible&&(null===(t=this._throwTween)||void 0===t||t.kill(),this._scrollPosition.target+=-e.spinY*this._settings.scrollStrength,this._scrollPosition.target=pe.a.clamp(this._scrollPosition.target,-this._scrollHeight,0))}},{key:"_createDebugGui",value:function(){if(x.a){var e=x.a.addGroup("UI",{container:"Menu"}),t=e.addGroup("Scroll & Drag");return t.add(this._settings,"damping",{min:0,max:.5}),t.add(this._settings,"scrollStrength",{min:0,max:50}),t.add(this._settings,"dragStrength",{min:0,max:10}),e}}}]),n}(Object(d.a)());function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(C.a)(e);if(t){var o=Object(C.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(k.a)(this,n)}}var je=function(e){Object(M.a)(n,e);var t=Re(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"init",value:function(){this._isVisible=!1,this._debug=this._createDebug(),this._resourceManager=this._createResourceManager(),this._scene=new m.Scene,this._3DScene=this._create3DScene(),this._UIScene=this._createUIScene()}},{key:"destroy",value:function(){var e,t;Object(S.a)(Object(C.a)(n.prototype),"destroy",this).call(this),null===(e=this._3DScene)||void 0===e||e.destroy(),null===(t=this._UIScene)||void 0===t||t.destroy(),this._removeDebug()}},{key:"isVisible",get:function(){return this._isVisible},set:function(e){this._isVisible=e,this._3DScene.isVisible=e,this._UIScene.isVisible=e}},{key:"prepare",value:function(){this._3DScene.prepare(),this._UIScene.prepare(),this.$composer.passes.threeD.menu.enabled=!0,this.$composer.render(),this.$composer.passes.threeD.menu.enabled=!1}},{key:"show",value:function(e){var t;switch(this.isVisible=!0,null===(t=this._timelineHide)||void 0===t||t.kill(),this._timelineShow=new h.b.timeline,this._timelineShow.set(this.$composer.passes.threeD.menu,{color1:e.lineColors.color1,color2:e.lineColors.color2},0),this._timelineShow.to(this.$composer,1.5,{menuProgress:1,ease:"power3.inOut"},0),this.$root.viewManager.active.name){case"Home":this._timelineShow.to(this.$root.viewManager.active.sectionManager._layers[0].postProcessing._passes.sceneTexture.material.uniforms.uOffset,1.75,{value:.9,ease:"power3.in"},0),this._timelineShow.to(this.$root.viewManager.active.sectionManager._layers[1].postProcessing._passes.sceneTexture.material.uniforms.uOffset,1.75,{value:.9,ease:"power3.in"},0),this._timelineShow.to(this.$root.viewManager.active.sectionManager.activeSection.instance.sceneUI._cameraManager.active.containers.menu.position,1.7,{x:400,ease:"power3.in"},0);break;case"About":this._timelineShow.to(this.$root.viewManager.active._UIScene._scrollContainer.position,1.7,{x:-400,ease:"power3.in"},0);break;case"Contact":this._timelineShow.to(this.$root.viewManager.active._UIScene._container.position,1.7,{x:-400,ease:"power3.in"},0)}return this._timelineShow.add(this._3DScene.show({lightColors:e.lightColors}),0),this._timelineShow.add(this._UIScene.show(),0),this._timelineShow.set(this.$root,{renderView:!1},1.5),this._timelineShow}},{key:"hide",value:function(e){var t;switch(null===(t=this._timelineShow)||void 0===t||t.kill(),this._timelineHide=new h.b.timeline,e&&this._timelineHide.set(this.$composer.passes.threeD.menu,{color1:e.lineColors.color1,color2:e.lineColors.color2},0),this._timelineHide.set(this.$root,{renderView:!0},0),this._timelineHide.add(this._3DScene.hide(),0),this._timelineHide.add(this._UIScene.hide(),0),this._timelineHide.to(this.$composer,1.5,{menuProgress:0,ease:"power3.inOut"},.2),this.$root.viewManager.active.name){case"Home":this._timelineHide.fromTo(this.$root.viewManager.active.sectionManager._layers[0].postProcessing._passes.sceneTexture.material.uniforms.uOffset,1.8,{value:.6},{value:0,ease:"power3.out"},0),this._timelineHide.fromTo(this.$root.viewManager.active.sectionManager._layers[1].postProcessing._passes.sceneTexture.material.uniforms.uOffset,1.8,{value:.6},{value:0,ease:"power3.out"},0),this._timelineHide.fromTo(this.$root.viewManager.active.sectionManager.activeSection.instance.sceneUI._cameraManager.active.containers.menu.position,1.8,{x:250},{x:0,ease:"power3.out"},0);break;case"About":this._timelineHide.fromTo(this.$root.viewManager.active._UIScene._scrollContainer.position,1.7,{x:-250},{x:0,ease:"power3.out"},0);break;case"Contact":this._timelineHide.fromTo(this.$root.viewManager.active._UIScene._container.position,1.7,{x:-250},{x:0,ease:"power3.out"},0)}return this._timelineHide.set(this,{isVisible:!1},2),this._timelineHide}},{key:"_createResourceManager",value:function(){return new X.ResourceManager({namespace:"Menu"})}},{key:"_create3DScene",value:function(){return new fe({isVisible:this._isVisible})}},{key:"_createUIScene",value:function(){return new De({isVisible:this._isVisible})}},{key:"onUpdate",value:function(e){var t,n,time=e.time,r=e.delta;null===(t=this._3DScene)||void 0===t||t.update({time:time,delta:r}),null===(n=this._UIScene)||void 0===n||n.update({time:time,delta:r})}},{key:"render",value:function(){var e,t;return{layer3D:null===(e=this._3DScene)||void 0===e?void 0:e.render(),layerUI:null===(t=this._UIScene)||void 0===t?void 0:t.render()}}},{key:"onWindowResize",value:function(e){var t=e.innerWidth,n=e.innerHeight;this._viewportInnerWidth=t,this._viewportInnerHeight=n}},{key:"_createDebug",value:function(){if(x.a)return null===x.a||void 0===x.a?void 0:x.a.addLayer("Menu")}},{key:"_removeDebug",value:function(){this._debug&&x.a.removeLayer("Menu")}}]),n}(Object(d.a)()),ze={init:function(){this._init()},start:function(){this._start()},isWebGL2:function(){return!this._renderer||this._renderer.capabilities.isWebGL2},playHomeTransitionIn:function(){},hideHomeIntro:function(){var section=this._viewManager.get("home").instance.sectionManager.activeSection.instance;return"function"==typeof section.hideIntro?section.hideIntro():null},showMenu:function(){var e;if(this._viewManager.isMenuOpen=!0,this.disableScroll(),"Home"===this._viewManager.active.name){var section=this._viewManager.get("home").instance.sectionManager.activeSection;section&&(e=section.config.menu)}return e||(e=this._viewManager.active._config.menu),this._menu.show(e)},hideMenu:function(){var e;this._viewManager.isMenuOpen=!1,this.enableScroll();var path=window.location.pathname.replace(/\//g,"")||"card";if("card"===path||"coin"===path||"pay"===path||"exchange"===path||"dex"===path){var section=this._viewManager.get("home").instance.sectionManager.getSectionBySlug(path);section&&(e=section.config.menu)}return e||(e=this._viewManager.get(path).instance._config.menu),this._menu.hide(e)},showView:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._viewManager.show(e,t)},hideView:function(e,t,n){this._viewManager.hide(e,t,n)},getView:function(e){return this._viewManager.get(e)},getMenu:function(){return this._menu},enableScroll:function(){this._viewManager.active&&this._viewManager.active.sectionManager&&(this._viewManager.active.sectionManager.isScrollAllowed=!0)},disableScroll:function(){this._viewManager.active&&this._viewManager.active.sectionManager&&(this._viewManager.active.sectionManager.isScrollAllowed=!1)},goToSection:function(e){this._viewManager.active&&this._viewManager.active.sectionManager&&this._viewManager.active.sectionManager.gotoSection(e)},getActiveSection:function(){var e=null;return this._viewManager.active&&this._viewManager.active.sectionManager&&(e=this._viewManager.active.sectionManager.activeSection),e},getActiveSectionIndex:function(){var e=null;return this._viewManager.active&&this._viewManager.active.sectionManager&&(e=this._viewManager.active.sectionManager.activeIndex),e},animateNextSection:function(){this._viewManager.active&&this._viewManager.active.sectionManager&&this._viewManager.active.sectionManager._animateNext()}};function Be(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var Ue,Ve;void 0!==document.hidden?(Ue="hidden",Ve="visibilitychange"):void 0!==document.msHidden?(Ue="msHidden",Ve="msvisibilitychange"):void 0!==document.webkitHidden&&(Ue="webkitHidden",Ve="webkitvisibilitychange");var Ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.a)(this,e),this._canvas=t.canvas,this._isDevelopment=t.isDevelopment,this._nuxt=t.nuxt,this._store=t.store,this._renderView=!0,this._debug=this._createDebug(),this._clock=this._createClock(),this._renderer=this._createRenderer(),this._isDevelopment&&(this._stats=this._createStats(),this._statsGpuPanel=this._createStatsGpuPanel()),this._bindHandlers(),this._setupEventListeners(),this._registerBidelloGlobals()}return Object(c.a)(e,[{key:"destroy",value:function(){var e,t,n;this._removeStats(),this._removeEventListeners(),null===(e=this._viewManager)||void 0===e||e.destroy(),null===(t=this._composer)||void 0===t||t.destroy(),null===(n=this._menu)||void 0===n||n.destroy(),this._removeDebug()}},{key:"renderView",get:function(){return this._renderView},set:function(e){this._renderView=e}},{key:"viewManager",get:function(){return this._viewManager}},{key:"_bindHandlers",value:function(){this._resizeHandler=this._resizeHandler.bind(this),this._tickHandler=this._tickHandler.bind(this),this._visibilityChangeHandler=this._visibilityChangeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){y.a.addEventListener("resize",this._resizeHandler),h.b.ticker.add(this._tickHandler),document.addEventListener(Ve,this._visibilityChangeHandler,!1)}},{key:"_removeEventListeners",value:function(){y.a.removeEventListener("resize",this._resizeHandler),h.b.ticker.remove(this._tickHandler),document.removeEventListener(Ve,this._visibilityChangeHandler,!1)}},{key:"_registerBidelloGlobals",value:function(){d.b.registerGlobal("root",this),d.b.registerGlobal("nuxt",this._nuxt),d.b.registerGlobal("store",this._store)}},{key:"_init",value:function(){this._composer=this._createComposer(),this._viewManager=this._createViewManager(),y.a.triggerResize()}},{key:"_start",value:function(){this._menu=this._createMenu(),this._showFirstView(),y.a.triggerResize()}},{key:"_showFirstView",value:function(){var view=new URLSearchParams(window.location.search).get("view"),e=this._store.state.router.current.name.split("__")[0];("index"===e||e.includes("index-"))&&(e="Home"),view&&this._viewManager.show(view)}},{key:"_createStats",value:function(){var e=new _.a;return document.body.appendChild(e.dom),e}},{key:"_createStatsGpuPanel",value:function(){var e=new f.a(this._renderer.getContext());return this._stats.addPanel(e),this._stats.showPanel(0),e}},{key:"_removeStats",value:function(){this._stats&&(document.body.removeChild(this._stats.dom),this._stats=null)}},{key:"_createClock",value:function(){return new m.Clock}},{key:"_createRenderer",value:function(){var e=this,t=new(this.isWebGL2()?m.WebGLRenderer:m.WebGL1Renderer)({antialias:!1,canvas:this._canvas,powerPreference:"high-performance"}),n=new m.Color("#ffffff");if(t.setClearColor(n,0),t.autoClear=!1,t.toneMapping=m.LinearToneMapping,t.shadowMap.enabled=!0,t.shadowMap.type=m.PCFSoftShadowMap,this._debug){var r={NoToneMapping:m.NoToneMapping,LinearToneMapping:m.LinearToneMapping,ReinhardToneMapping:m.ReinhardToneMapping,CineonToneMapping:m.CineonToneMapping,ACESFilmicToneMapping:m.ACESFilmicToneMapping};this._debug.add(t,"toneMapping",{options:r,onChange:function(){if("Home"===e._viewManager.active.name){var n=e._viewManager.active._sectionManager._layers[0].section.instance.scene3D;t.compile(n.scene,n.camera);var r=e._viewManager.active._sectionManager._layers[1].section.instance.scene3D;t.compile(r.scene,r.camera)}else{var o=e._viewManager.active._3DScene;t.compile(o._scene,o._cameraManager.camera)}}}),this._debug.add(t,"toneMappingExposure",{min:0,max:10})}return d.b.registerGlobal("renderer",t),t}},{key:"_createComposer",value:function(){var e=new Y({root:this,renderer:this._renderer});return d.b.registerGlobal("composer",e),e}},{key:"_createViewManager",value:function(){return new I}},{key:"_createMenu",value:function(){return new je}},{key:"_tick",value:function(){var e,t;null===(e=this._stats)||void 0===e||e.begin(),this._update(),this._render(),null===(t=this._stats)||void 0===t||t.end()}},{key:"_update",value:function(){this._triggerBidelloUpdate()}},{key:"_triggerBidelloUpdate",value:function(){var e=this._clock.getDelta(),time=this._clock.getElapsedTime();d.b.trigger({name:"update",fireAtStart:!1},{delta:e,time:time})}},{key:"_render",value:function(){var e,t,n,view=null===(e=this._viewManager)||void 0===e?void 0:e.active;if(view){if(null===(t=this._statsGpuPanel)||void 0===t||t.startQuery(),this._renderView){if("function"==typeof view.render3D)view.render3D();if("function"==typeof view.renderUI){var r=view.renderUI();r&&this._composer.enableUI({map:r.map,bloomMap:r.bloomMap})}else this._composer.disableUI()}if(this._menu&&this._menu.isVisible){var o=this._menu.render();this._composer.enableMenu(o)}else this._composer.disableMenu();this._composer.render(),null===(n=this._statsGpuPanel)||void 0===n||n.endQuery()}}},{key:"_resize",value:function(e){e.renderScale=1,e.renderWidth=e.innerWidth,e.renderHeight=e.innerHeight,this._resizeCanvas(e),this._resizeRenderer(e),this._triggerBidelloResize(e)}},{key:"_resizeCanvas",value:function(e){var t=e.innerWidth,n=e.innerHeight;this._renderer.domElement.style.width="".concat(t,"px"),this._renderer.domElement.style.height="".concat(n,"px")}},{key:"_resizeRenderer",value:function(e){var t=e.renderWidth,n=e.renderHeight,r=e.dpr;this._renderer.setPixelRatio(r),this._renderer.setSize(t,n,!1)}},{key:"_triggerBidelloResize",value:function(e){d.b.trigger({name:"windowResize",fireAtStart:!0},function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Be(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Be(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},e))}},{key:"_resizeHandler",value:function(e){this._resize(e)}},{key:"_tickHandler",value:function(){this._tick()}},{key:"_visibilityChangeHandler",value:function(){document[Ue]?this._clock.stop():this._clock.start()}},{key:"_createDebug",value:function(){if(x.a)return x.a.addGroup("Renderer",{container:"Global"})}},{key:"_removeDebug",value:function(){this._debug&&this._debug.remove()}}]),e}();Object.assign(Ge.prototype,ze);var Ae=Ge;function We(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var Fe={computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?We(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):We(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.b)({isDevelopment:"context/isDevelopment",isLoadingCompleted:"preloader/isLoadingCompleted",isCriticalLoadingCompleted:"preloader/isCriticalLoadingCompleted"})),watch:{isCriticalLoadingCompleted:function(){this.$root.webglApp.init()},isLoadingCompleted:function(){this.$root.webglApp.start()}},created:function(){this.scrollAnimationActive=!1},mounted:function(){this.setupWebglApp()},beforeDestroy:function(){this.$root.webglApp&&(this.$root.webglApp.destroy(),this.$root.webglApp=null)},methods:{setupWebglApp:function(){this.$root.webglApp=new Ae({canvas:this.$refs.canvas,nuxt:this.$root,store:this.$store,isDevelopment:this.isDevelopment}),this.isCriticalLoadingCompleted&&this.$root.webglApp.init(),this.isLoadingCompleted&&this.$root.webglApp.start()}}},Ee=Fe,Ne=(n(752),n(42)),$e=Object(Ne.a)(Ee,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("canvas",{ref:"canvas",staticClass:"background"})])}),[],!1,null,"e5c981ac",null);t.default=$e.exports}}]);