/**
 * Copyright MARS FLAG Corporation. All rights reserved.
 *
 * http://www.marsflag.com/
 */
function initJSONPSuggest(R,Y){var P,h=window,F=h.document,Q=(F&&F.getElementsByTagName),K=h.setInterval,q=h.clearInterval,Z=window.alert,g=navigator.userAgent;var M=R.interface_url||"suggest.x",m=R.tmpl_func||"MF_suggest_tmpl",B=R.handler_name||"parent.suggest_ctxt",A=R.callback||"load_suggest",f=R.selected_bgcolor||"#ddd",i=R.max||10,c=R.array_styles||[],D=R.input_jquery,d=R.suggest_frame||"suggest_frame",E=R.no_result_mess||"",L=R.array_queries,X=R.show_data_graph,r="suggest_area",V=R.to_upper,j=R.debug,I=R.rtl,n=R.ctk||"",b=R.ct||"";var W="GALFSRAM",H=h[W]||{},a;h[W]=H;Y=Y||h.jQuery;function l(AW){if(a){return }try{AW=AW||h.event;if(AW&&AW.type=="readystatechange"&&this.readyState!="complete"){return }if(O){q(O)}a=true;S.onload=S.onreadystatechange=null;var AB=S.contentWindow||h.frames[d];var t=AB.document;var Ab=t.body;var AQ=false;var s=c.join("")+(X?"":".suggest_data_graph {display:none}");if(C||N){Ab.innerHTML="";if(c){var AM=t.createElement("style");AM.type="text/css";if(N&&AM.styleSheet){AM.styleSheet.cssText=s}else{AM.innerHTML=s}Ab.appendChild(AM)}var AK=t.createElement("div");AK.id=r;Ab.appendChild(AK);if(I){Ab.className+=" rtl"}}else{if(c){t.write('<style type="text/css"><!-- '+s+"--></style>")}t.write("<body"+(I?' class="rtl"':"")+'><div id="'+r+'"></div></body>');t.close();var AK=t.getElementById(r)}try{if(Ab){Ab.scroll="no"}}catch(AI){}function u(){var x=D.css("font-size");var Ad=D.css("font-family");var Ac=D.css("height");var Ae=t.styleSheets&&t.styleSheets[0];if(Ae.addRule){Ae.addRule("body *","font-size:"+x+" !important");Ae.addRule("body *","font-family:"+Ad+" !important");Ae.addRule("#suggest_area td","height:"+Ac+" !important")}else{Ae.insertRule("body * {font-size:"+x+"}",Ae.cssRules.length);Ae.insertRule("body * {font-family:"+Ad+"}",Ae.cssRules.length);Ae.insertRule("#suggest_area td {height:"+Ac+" !important}",Ae.cssRules.length)}}u();AK.onselectstart=AK.oncontextmenu=function(){return false};var AV="suggest_data_";var w=B.replace(/^[^.]*\.(.*)$/,"$1");var AJ="parent."+W+"."+w;if(!H[w]){H[w]={}}function AU(){e.css("visibility","visible")}function AY(){e.css("visibility","hidden")}function AX(x,Ac){if(!arguments.length){var Ad=t.getElementsByTagName("TABLE")[0];x=Ad.offsetWidth;Ac=Ad.offsetHeight;if(o){x+=3;Ac++}}S.style.width=x+"px";S.style.height=Ac+"px"}function AZ(){return e.css("visibility")=="visible"}function z(x){return t.getElementById(x)}Y(window).on("resize",AN);function AN(){var x=D.offset();Y(S).width(D.outerWidth()).offset({left:x.left,top:x.top+D.outerHeight()})}function AC(x){AQ=false;if(!x||x.length==0){if(!E){return }AQ=true}if(V){for(var Ad=0;Ad<x.length;Ad++){x[Ad].word=x[Ad].word.toUpperCase()}}AN();if(!D.val()){return }var Ac={prefix:AV,handler:AJ,data:x};if(AQ){Ac.data=[{word:E,point:-1}]}try{h[m](Ac,AK);setTimeout(AX,0);AR=x;y=-1;AU()}catch(Ae){if(j){Z(U(Ae))}}}function v(x){if(x.match(/^\s*$/)){return false}var Ad=["q="+encodeURIComponent(x),"ie=utf8","max="+i,"callback=?"];if(b){Ad=Ad.concat("ct="+encodeURIComponent(b))}if(n){Ad=Ad.concat("ctk="+encodeURIComponent(n))}if(L){Ad=Ad.concat(L)}var Ac=M+"?"+Ad.join("&");AH=Y.getJSON(Ac,function(Ae){AH=P;AC(Ae)})}var AG=D.val();var AH;var AR=[];var y=-1;function AP(x){if(x!=P){AO();y=x}if(AR[y]){var Ac=z(AV+y);Ac.backgroundColorOrg=Ac.style.backgroundColor;Ac.style.backgroundColor=f}}H[w]["focus"]=AP;function AO(){if(AR[y]){var x=z(AV+y);x.style.backgroundColor=x.backgroundColorOrg}}function AE(){if(y<0){y=0}else{AO();y++}if(y>=AR.length){y=-1;return }AP()}function AD(){if(y<0){y=AR.length-1}else{AO();y--;if(y==-1){return }}AP()}function AS(){var x=AR[y];if(x){if(D.val()!=x.word){D.val(x.word);AG=x.word;v(x.word+" ");return 0}}return 1}var AL;H[w]["suggest_mousedown"]=function(x){if(AQ){return }AL=(new Date()).getTime()};H[w]["suggest_click"]=function(x){if(AQ){return false}if(AS()){D[0].form.submit()}else{D[0].focus();return false}};function AT(){if(AH){return }var x=D.val();if(AG==x){return }AG=x;if(x==""){AR=[];AY()}else{v(x)}}var Aa;function AA(){if(!Aa){Aa=K(AT,100)}}function AF(){if(!Aa){return }q(Aa);Aa=null}D.blur(function(Ac){var x=(new Date()).getTime();if(AL+100>x){return }AF();AY()}).focus(function(x){if(AR.length||AQ){AU()}AA()});if(D.is(":focus")){AA()}}catch(AW){if(j){Z(U(AW))}}}function U(v){var t,u=[];for(t in v){u[u.length]=t+" :\t"+v[t]}return u.join("\n")}var O;var o=g.match(/AppleWebKit\/4\d\d/);var C=g.match(/Opera/);var N=g.match(/MSIE/);var p=g.match(/MSIE 6/);var J=g.match(/trident/i);J&&(N=true);var k=g.match(/(iPhone|iPad|iPod|Android|dream|CUPCAKE|blackberry|webOS|incognito|webmate)/);var T=p?"javascript:false;":"about:blank";if(typeof (D)=="string"){D=Y(D)}if(!D||!D[0]){return }D.attr("autocomplete","off");var e=Y("#"+d);var S=e.get(0);var G=false;if(e.length==0){S=F.createElement("IFRAME");e=Y(S);G=true}S.name=S.id=d;S.frameBorder=0;S.scrolling="no";e.css({position:"absolute",visibility:"hidden",zIndex:10000,top:"0px",height:"0px",width:D[0].offsetWidth+"px",border:"0px"});if(!G){e.css("display","block")}if(G){Y(F.body).append(S)}else{e.prependTo(Y(F.body))}if(!(C||N)){S.onload=S.onreadystatechange=l;S.src=T}if(o||C||N){O=K(l,100)}};