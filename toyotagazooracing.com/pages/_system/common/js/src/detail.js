(function(){var l=TMC.Detail={start:b};var k=l.Control={};var d=k.Image={};var g=k.NoScrollX={};var o=k.Movie={};var n=TMC.Common;var f=n.Parameter;var e=n.Control.Resize;var j=k.contentsCtl={};var h=k.topGridCtl={};var a=TMC.Keyvisuals;var p=k.Colorbox={};var m=k.heightLine={};var c=k.tabMenu={};var i=true;function b(){p.onLoad();h.onLoad();j.onLoad();TMC.Common.start();g.onLoad();d.onLoad();o.onLoad();m.onLoad();c.onLoad()}(function(){d.onLoad=function(){$("#main img").error(function(){TMC.Common.Control.Image.error($(this))});$("#keyvisual img").error(function(){TMC.Common.Control.Image.error($(this))})}})();(function(){j.onLoad=function(){$(document).on("changeToPC",q);$(document).on("changeToSP",s);if(TMC.Common.Control.Resize.isPC()){q()}else{s()}};function r(){$(".bx-viewport > .slideShow > li").each(function(){var u=$(this);var t=u.find("img.imgChange");if(parseInt(u.closest(".bx-viewport").css("height"),10)<t.height()){u.closest(".bx-viewport").css("height",t.height())}if(t.length<1){u.closest(".bx-viewport").css("height",u.height()+10)}})}function q(){h.resetTopGrid();$(".imgChange").each(function(){$(this).attr("src",$(this).data("pc"))});r();p.changeToPc()}function s(){h.resetTopGrid();$(".imgChange").each(function(){$(this).attr("src",$(this).data("sp"))});r();p.changeToSp()}})();(function(){h.onLoad=function(){v()};function v(){var y=r(f.noImagePath);var x={href:location.href,target:"_self"};var z=new a(f,e.isPC(),a.PAGE_TYPE.DETAIL,x,f.dispKeyvisualContents);var w=z.toHtml(y);if(w===null){return}s(w,z.getSetting())}function r(x){var w=$("#template .grid").clone();w.find(".grid-thumbnail").error(function(){TMC.Common.Control.Image.error($(this),x)});return w}function t(w){var x=$("#keyvisual > .slides").show().bxSlider($.extend(w.sliderOption,{onSliderLoad:function(){if(w.sliderOption.mode==="vertical"){q()}else{u()}if(w.sliderOption.mode==="fade"){a.setFitTextOnce($("#keyvisual .grid:not(.bx-clone):first"));e.clearEvent();e.addEvent(function(){a.clearFitText()})}else{a.setFitTextAll();e.clearEvent();e.addEvent(function(){if(x){x.reloadSlider();x.find(".grid.active").removeClass("active");x.find(".grid:not(.bx-clone):first").addClass("active")}})}$("#keyvisual .bx-viewport .grid:not(.bx-clone):first").addClass("active")},onSlideBefore:function(A,z,y){A.parent().find("> .grid.active").removeClass("active");$(A.parent().find("> .grid:not(.bx-clone)")[y]).addClass("active")}}))}function s(w,y){$("#keyvisual").append($("<div/>").addClass("pre-loading"));$("#keyvisual").append(w);if(w.find(".grid").length>1){$("#keyvisual").removeClass("is_hidden");var z=f.keyVisualInfo.keyValues.keyVisualInfo.items[0];var x=f.noImagePath;if(e.isPC()){if(z.keyvisualImage){x=z.keyvisualImage.fileUrl}}else{if(z.keyvisualMobileImage){x=z.keyvisualMobileImage.fileUrl}else{if(z.keyvisualImage){x=z.keyvisualImage.fileUrl}}}if(n.Device.isIe8){x=x+"?v="+new Date().getTime()}$("<img>").attr("src",x).load(function(){$("#keyvisual .pre-loading").remove();t(y)}).error(function(){$("#keyvisual .pre-loading").remove();t(y)})}else{$("#keyvisual").removeClass("is_hidden");if($("#keyvisual .grid-thumbnail").length>0){$("#keyvisual .grid-thumbnail").load(function(){a.setFitTextAll();$(window).trigger("resize")})}$("#keyvisual .pre-loading").remove()}}function q(){var y=$("#keyvisual");y.addClass("y-scroll");y.find(".slides.is-hidden").css("width","");y.find(".slides.is-hidden > .grid").css("width","");var x=$("#keyvisual .bx-viewport");var w=x.find("div.grid > div.thumb img.grid-thumbnail:first");x.css("height",w.height());y.find(".slides.is-hidden").css("top",-y.find('.slides.is-hidden > .grid:not(".bx-clone"):first').position().top)}function u(){var w=868;var z=$("#keyvisual .bx-viewport");var x=z.find("div.grid > div.thumb img.grid-thumbnail:first");var A=new Image();$(A).attr("src",x.attr("src"));var y=A.width<w?A.width:w;z.css("max-width",y);z.find("div.slides").css("width",(y+10)*(z.find("div.grid").size()+6))}h.resetTopGrid=function(){e.clearEvent();$("#keyvisual").remove();$("#contents-body").before($("<div/>").attr("id","keyvisual"));v()}})();(function(){o.onLoad=function(){$(".y-wrap-thumb").click(function(){$(this).closest(".bx-viewport").siblings(".bx-controls").find(".bx-pager-item a.active").click();if($(this).hasClass("slide-iframe-thumb")){return false}var D=$(this).children(".imgChange");var A=D.height();$(this).css("display","none");var B=$(this).next("div .youtubedata");var E=B.parent();var F=$("<iframe/>").attr({frameborder:"0",allowfullscreen:"",src:B.attr("data-url"),style:"height:"+A+"px;"});r(F);var C=$("<div/>").append(F).append($("<img/>").attr("src","/pages/contents/include/common/image/colorbox/close.png").addClass("close").click(function(){var I=$(this).parent().parent().find(".y-wrap-thumb");I.css("display","");var H=$(this).parent().parent().find(".youtubeholder");H.remove()})).addClass("youtubeholder");$(C).height(A);$(C).appendTo(E).hide().fadeIn("fast");if($(this).hasClass("bg-movie-img")){var G=$(C).prev("p");$(G).appendTo(E)}return false});$(".slide-iframe-thumb").click(function(){$(this).css("display","none");$iframe=$(this).closest("li").find(".with-thumb").parent().css("display","");$(this).closest("li").find(".bx-caption").css("display","none");return false});$(".measure-movie-on iframe:not(.slide-iframe)").each(function(){v($(this))});$(".measure-movie-on .youtubedata").each(function(){var A=$(this);A.attr("data-url",s(A.attr("data-url")))});$(".measure-movie-on .clboxMovie").each(function(){var A=$(this);A.attr("href",s(A.attr("href")))});$(".measure-movie-on .clboxMovie-column-pc").each(function(){var A=$(this);A.attr("href",s(A.attr("href")))});$(".measure-movie-on .clslide.video-thumbnail").each(function(){var A=$(this);A.attr("href",s(A.attr("href")))});var z=300;var w=0;(function x(){if(w>=z){return}w=w+1;if(!y()){setTimeout(x,100);return}$(".measure-movie-on.bx-clone .slide-iframe").each(function(){$(this).removeAttr("id")});$(".measure-movie-on:not(.bx-clone) .slide-iframe").each(function(){v($(this))})})();function y(){var A=$(".slideShow").length;var B=$(".slideShow .bx-clone").length;if(A===0||B===0){return false}return A*2<=B}};$(document).on("cbox_complete",function(){r($("#cboxLoadedContent .cboxIframe"))});var u=/www\.youtube\.com\/embed\//;var q=/enablejsapi/;function v(w){var x=w.attr("src");if(u.test(x)){w.addClass("scTrack");w.attr("src",s(x))}}var t=1;function r(w){var x=w.attr("src");if(q.test(x)){w.attr("id","YouTubeV"+t);w.addClass("scTrack");t=t+1}else{w.removeClass("scTrack")}}function s(w){if(w&&!q.test(w)){var x=w.indexOf("?")===-1?"?":"&";return w+x+"enablejsapi=1"}return w}})();(function(){g.onLoad=function(){$(".no-scroll-x").parents(".section").css({overflow:"hidden"})}})();(function(){m.onLoad=function(){$(function(){if(typeof $().heightLine==="function"){$(".sort-menu li a").heightLine()}})}})();(function(){c.onLoad=function(){var s="current";$("div.tab-navi a").click(function(){q(s);r($(this),s,$(this).attr("href"));return false});function q(t){$(".tab-menu").find("div").removeClass(t);$(".tab-menu").find("a").removeClass(t)}function r(u,t,v){u.addClass(t);$("div.tab-content div"+v).addClass(t)}}})();(function(){function t(z){var B=z.parents("dl");var A=B.find(".figure-title").html();var y=B.find(".figure-description").html();if(A===undefined&&z.hasClass("clslide")){A=z.children().attr("title")}if(y===undefined&&z.hasClass("clslide")){y=z.children().attr("description")}A=(A===undefined)?"":'<div class="title">'+A+"</div>";y=(y===undefined)?"":'<div class="description">'+y+"</div>";return A+y}function v(y){var z=y.find("dd").html();if(z===undefined&&y.hasClass("clslide")){z=y.children().attr("title")}z=(z===undefined)?"":'<div class="title">'+z+"</div>";return z}function s(){return $(window).width()<500?"70%":"80%"}function w(){return $(window).width()<500?"70%":"80%"}function r(y){return function(){var z=y.parent().find("div").html();return z===undefined?"":z}}function u(){$(".slide-iframe").each(function(){var A=$(this);var z=$(".slide-iframe-thumb");z.css("display","");if(A.hasClass("with-thumb")&&!A.parent().hasClass("y-wrap")){A.parent().css("display","none")}var y=A.closest("li").find("img.imgChange");if(parseInt(A.closest(".bx-viewport").css("height"),10)<y.height()){A.closest(".bx-viewport").css("height",y.height())}if(y.length<1){A.closest(".bx-viewport").css("height",A.height()+10)}})}function q(A){if(e.isPC()){A.find("li").css("width","");A.css("height",A.find("img:first").height())}var y=868;var z=A.width()<y?A.width():y;var D=A.find('ul > li:not(".bx-clone") img');if(D.length!==0){var C=new Image();var B=e.isPC()?"pc":"sp";$(C).attr("src",$(D[0]).data(B));z=C.width<z?C.width:z}A.css("max-width",z);A.find("ul").css("width",(z+10)*(A.find("ul > li").size()+6));if(e.isPC()){A.find("li").css("width",z)}}function x(){$.each($(".section:not(.is-hidden) .slideShow:not(.slideShowAutoFalse)"),function(z,A){var y=$(this).children("li").length;if(y===0){return true}var B=$(A).not(".alreadyInitialized").addClass("alreadyInitialized").bxSlider({auto:true,startSlide:0,speed:300,pause:4000,slideMargin:5,minSlides:1,maxSlides:3,moveSlides:1,nextText:"",prevText:"",controls:(y>1?true:false),captions:true,video:true,useCSS:false,onSliderLoad:function(){q($(A).closest(".bx-viewport"));u();$($(A).find('li:not(".bx-clone")')[0]).addClass("active");if(e.isPC()){$(A).css("left",-$(A).find('li:not(".bx-clone"):first').position().left)}},onSlideBefore:function(E,D,C){E.parent().find('li:not(".bx-clone")').removeClass("active");$(E.parent().find('li:not(".bx-clone")')[C]).addClass("active");$.each(E.parent().find(".slide-iframe"),function(F,G){G.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")})}})});$.each($(".section:not(.is-hidden) .slideShow.slideShowAutoFalse"),function(z,A){var y=$(this).children("li").length;if(y===0){return true}var B=$(A).not(".alreadyInitialized").addClass("alreadyInitialized").bxSlider({startSlide:0,speed:300,pause:4000,slideMargin:5,minSlides:1,maxSlides:3,moveSlides:1,nextText:"",prevText:"",controls:(y>1?true:false),captions:true,video:true,useCSS:false,onSliderLoad:function(){q($(A).closest(".bx-viewport"));u();$($(A).find('li:not(".bx-clone")')[0]).addClass("active");if(e.isPC()){$(A).css("left",-$(A).find('li:not(".bx-clone"):first').position().left)}},onSlideBefore:function(E,D,C){E.parent().find('li:not(".bx-clone")').removeClass("active");$(E.parent().find('li:not(".bx-clone")')[C]).addClass("active");$.each(E.parent().find(".slide-iframe"),function(F,G){G.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")})}})})}p.onLoad=function(){$(".slider-auto-false .slideShow").addClass("slideShowAutoFalse");x();$(document).on("sectionDisplayToggled",function(){x();$(document).trigger("windowSizeChangeEvent");$(document).trigger(e.isPC()?"changeToPC":"changeToSP")});$(".clslide:not(.bx-clone .clslide)").colorbox({transition:"fade",reposition:true,top:"2%",rel:$(this).rel,returnFocus:false,trapFocus:false,iframe:true,innerWidth:640,innerHeight:390,current:"{current} of {total}",title:function(){return t($(this))}});$(".clbox,.clbox-column-pc,.clbox-column-sp").colorbox({transition:"fade",reposition:true,top:"2%",maxWidth:function(){return s()},maxHeight:function(){return w()},rel:$(this).rel,returnFocus:false,trapFocus:false,current:"{current} of {total}",title:function(){return t($(this))}});$(".clbox,.clboxMovie,.clbox-column-pc,.clbox-html,.clbox-html-column-pc,.clboxMovie-column-pc").click(function(){$(".clbox-column-pc,.clbox-html-column-pc,.clboxMovie-column-pc").each(function(C){if(!$(this).hasClass("cboxElement")){$(this).addClass("cboxElement")}});$(".clbox-column-sp,.clbox-html-column-sp,.clboxMovie-column-sp").removeClass("cboxElement")});$(".clbox-column-sp,.clbox-html-column-sp,.clboxMovie-column-sp").click(function(){$(".clbox-column-sp,.clbox-html-column-sp,.clboxMovie-column-sp").each(function(C){if(!$(this).hasClass("cboxElement")){$(this).addClass("cboxElement")}});$(".clbox-column-pc,.clbox-html-column-pc,.clboxMovie-column-pc").removeClass("cboxElement")});$(".clbox-text-link").find("a").colorbox({transition:"fade",reposition:true,top:"2%",maxWidth:function(){return s()},maxHeight:function(){return w()},rel:$(this).rel,returnFocus:false,trapFocus:false,current:"{current} of {total}"});$(".clbox-html-section").colorbox({transition:"fade",reposition:true,top:"2%",maxWidth:function(){return s()},maxHeight:function(){return w()},rel:$(this).rel,returnFocus:false,trapFocus:false,current:"{current} of {total}",title:function(){return v($(this))}});$(".clbox-html,.clbox-html-column-pc,.clbox-html-column-sp").colorbox({transition:"fade",reposition:true,top:"2%",maxWidth:function(){return s()},maxHeight:function(){return w()},rel:$(this).rel,returnFocus:false,trapFocus:false,current:"{current} of {total}",html:function(){return r($(this))}});$(".clboxMovie,.clboxMovie-column-pc,.clboxMovie-column-sp").colorbox({transition:"fade",reposition:true,top:"2%",maxWidth:function(){return s()},maxHeight:function(){return w()},rel:$(this).rel,returnFocus:false,trapFocus:false,iframe:true,innerWidth:640,innerHeight:390,current:"{current} of {total}",title:function(){return t($(this))}});function A(){if(!$($.colorbox.element()).hasClass("clboxMovie")&&!$($.colorbox.element()).hasClass("clboxMovie-column-pc")&&!$($.colorbox.element()).hasClass("clboxMovie-column-sp")&&!$($.colorbox.element()).hasClass("clslide")){if(!z()){var C=$("#cboxLoadedContent").outerHeight()+$("#cboxTitleCopy").outerHeight();$.colorbox.resize({height:C})}i=e.isPC()}else{var F=$("#cboxTitleCopy").outerHeight();F=(F>0?(F+70):0);if(e.isPC()){$.colorbox.resize({height:390+F,width:640});$(".cboxIframe").height($(".cboxIframe").height()-F);i=true}else{if($(window).height()<$(window).width()){var E=$(window).height()*0.65;var D=E/39*64;E=D/64*39+(44);$.colorbox.resize({height:E+F,width:D});$(".cboxIframe").height($(".cboxIframe").height()-F)}else{var D=$(window).width()*0.65;var E=D/64*39+(50);$.colorbox.resize({height:E+F,width:D});$(".cboxIframe").height($(".cboxIframe").height()-F)}$("#cboxTitleCopy").css("display","");i=false}}}function z(){if($($.colorbox.element()).hasClass("clbox-html")||$($.colorbox.element()).hasClass("clbox-html-column-pc")||$($.colorbox.element()).hasClass("clbox-html-column-sp")){return true}return false}var B=0;$(document).bind("cbox_open",function(D,C,F,E){i=e.isPC();B=$(window).scrollTop();$("body").addClass("noscroll");$("body").css("top",(B*-1))});$(document).bind("cbox_complete",function(D,C,F,E){i=e.isPC();y();A();$("#colorbox").find("img.cboxPhoto").attr("alt",$($.colorbox.element()).find("img").data("largealt")||$($.colorbox.element()).find("img").attr("alt"))});function y(){$("#cboxTitleCopy").remove();if(!$("#cboxTitle").find(".title").html()&&!$("#cboxTitle").find(".description").html()){return}$("#cboxContent").prepend("<div id='cboxTitleCopy'></div>");$("#cboxTitleCopy").append($("#cboxTitle").find(".title"));$("#cboxTitleCopy").append($("#cboxTitle").find(".description"));$("#cboxTitle").css("display","none")}$(document).bind("cbox_closed",function(D,C,F,E){$("body").removeClass("noscroll");$("body").css("top",0).scrollTop(B);$("html").scrollTop(B)});$("body").click(function(){if($("#colorbox").is(":visible")){$.colorbox.close()}});$("#cboxContent").click(function(){return false});p.changeToPc=function(){$(".sp-win").css("display","none");$(".pc-clbox").css("display","");$(".pc-clbox").each(function(){$(this).next(".sp-win").attr("href","");$(this).closest("dt").next().find(".sp-win").attr("href","");if($(this).hasClass("clboxMovie")||$(this).hasClass("clboxMovie-column-pc")){$(this).next("a.sp-win").attr("href","")}})};p.changeToSp=function(){$(".sp-win").css("display","");$(".pc-clbox").css("display","none");$(".pc-clbox").each(function(){$(this).next(".sp-win").attr("href",$(this).children().data("href"));$(this).closest("dt").next().find(".sp-win").attr("href",$(this).children().data("href"));if($(this).hasClass("clboxMovie")||$(this).hasClass("clboxMovie-column-sp")){$(this).next("a.sp-win").attr("href",$(this).attr("href"))}if($(this).hasClass("clboxMovie-column-pc")){var C=$(this).closest("div.section.column").find(".cms-sp");if(C.length===0){$(this).next("a.sp-win").attr("href",$(this).attr("href"))}}})};$(window).resize(function(){if(e.isPC()!=i){$.colorbox.close();return}})}})()})();